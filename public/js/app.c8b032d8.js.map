{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue","webpack:///src/App.vue","webpack:///./src/App.vue?60d0","webpack:///./src/App.vue?315a","webpack:///./src/components/WEDueDateDisplay.vue","webpack:///src/components/WEDueDateDisplay.vue","webpack:///./src/components/WEDueDateDisplay.vue?5699","webpack:///./src/components/WEDueDateDisplay.vue?b46c","webpack:///./src/main.js","webpack:///./src/components/WERequests.vue?a32d","webpack:///./src/App.vue?e7d7","webpack:///./src/components/WERequest.vue?27d1","webpack:///./src/web.js","webpack:///./src/components/WEStatistics.vue","webpack:///src/components/WEStatistics.vue","webpack:///./src/components/WEStatistics.vue?4271","webpack:///./src/components/WEStatistics.vue?49b5","webpack:///./src/components/WEMessage.vue","webpack:///src/components/WEMessage.vue","webpack:///./src/components/WEMessage.vue?924d","webpack:///./src/components/WEMessage.vue?66b8","webpack:///./src/components/WEMain.vue","webpack:///./src/components/WERequests.vue","webpack:///src/components/WERequests.vue","webpack:///./src/components/WERequests.vue?6e6a","webpack:///./src/components/WERequests.vue?ecad","webpack:///src/components/WEMain.vue","webpack:///./src/components/WEMain.vue?5eaa","webpack:///./src/components/WEMain.vue?1937","webpack:///./src/components/WELoans.vue","webpack:///src/components/WELoans.vue","webpack:///./src/components/WELoans.vue?3cd8","webpack:///./src/components/WELoans.vue?579e","webpack:///./src/components/WEOrganisation.vue","webpack:///src/components/WEOrganisation.vue","webpack:///./src/components/WEOrganisation.vue?5ae4","webpack:///./src/components/WEOrganisation.vue?8cc9","webpack:///./src/components/WELibrary.vue","webpack:///src/components/WELibrary.vue","webpack:///./src/components/WELibrary.vue?36a0","webpack:///./src/components/WELibrary.vue?36e8","webpack:///./src/components/WERequest.vue","webpack:///./src/components/WEOrderForm.vue","webpack:///src/components/WEOrderForm.vue","webpack:///./src/components/WEOrderForm.vue?d9ee","webpack:///./src/components/WEOrderForm.vue?2488","webpack:///src/components/WERequest.vue","webpack:///./src/components/WERequest.vue?d04a","webpack:///./src/components/WERequest.vue?e1f3","webpack:///./src/assets/images/logo.svg","webpack:///./src/components/WEClient.vue","webpack:///src/components/WEClient.vue","webpack:///./src/components/WEClient.vue?bb21","webpack:///./src/components/WEClient.vue?2289","webpack:///./src/assets/images/arkistoitu_vino.png"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","render","_vm","this","_c","_self","attrs","staticClass","require","path","_v","scopedSlots","_u","fn","_s","$G","user","proxy","login","error","_e","staticRenderFns","logging","intervalID","methods","_this","console","log","fetch","api_url","credentials","then","response","ok","msg","json","shibboleth","catch","e","watch","$route","immediate","handler","to","from","document","title","meta","created","_this2","location","hostname","setInterval","beforeDestroy","clearInterval","component","item","tilaus_saatu","staticStyle","isOverdue","pvm_erapaiva","formatDate","uusittavissa","info","props","Vue","use","BootstrapVue","IconsPlugin","VueRouter","router","base","__dirname","routes","WEMain","WERequest","WEOrganisation","WEClient","WELibrary","WEMessage","WELoanSearch","WEStatistics","config","productionTip","shared","getStatus","status","dd","Date","now","getTime","date","reverse","comb","out","isFinite","getFullYear","getMonth","toString","padStart","getDate","join","getDateFromUUID","uuid","parseInt","substring","formatted","Intl","DateTimeFormat","format","getToday","plusMonth","separator","arguments","undefined","today","setMonth","renderBreaks","text","splitter","split","getInfo","request","lang","lang_info","teoksen_tiedot","computed","local","install","h","App","$mount","web","api","getError","updateRequest","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","request_id","update","url","wrap","_context","prev","next","axios","put","stop","_x","_x2","getLoanCount","_callee2","_context2","abrupt","on","$event","search","year","current_year","stats","fields","libs","label","mounted","ready","search_result","current","_id","domProps","saate","directives","rawName","expression","target","composing","$set","loadData","saveForm","_l","field","model","new_obj","callback","$$v","params","id","method","body","JSON","stringify","$router","editForm","edit","new_requests","tilaaja","sukunimi","etunimi","sahkoposti","reserved_requests","ordered_requests","tilattu","kasittelyssa","uusi","reserved_ready","thStyle","current_request","query","components","WERequests","requests","loan_count","getOverdueLoans","nativeOn","type","indexOf","_k","keyCode","search_term","statuses","kirjasto_id","overdue","DueDate","loading","sortable","sent","_this3","count","nimi","request_fields","loadRelated","_this4","includes","search_lyhenne","fields_search","lyhenne","getLink","loadArchive","archived","replace","alert","_this5","result1","setReturned","openKarhuRequest","show","teos_on","convertToBook","show_modal_cancel_archive","openCancelRequest","show_modal_title","isExternal","searchClients","client_query","clients_result","client_fields","openJoinClient","show_modal_external","mista_loysit_julkaisun_tiedot","hintakatto","maksaja_varmistettu","maksaja","laitos","projekti","kustannuspaikka","maksaja_info","show_modal_payer","huomautuksia","show_modal_note","tarvitaan_viimeistaan","o_id","peruutuksen_syy","o_retudate_has_value","pvm_palautettu","karhut","karhu","pvm_saapunut","kirjaston_nimi","show_modal_loan_date","maksu","$root","$emit","viesti","orders","order_fields","recdate","openArrived","setNotAvailable","primaryBG","primaryText","setLoanDate","new_loan_date","setDueDate","tilaus_uusittavissa","tilaus_info","updateTitle","sending","sendDueNotice","show_modal_due_notice","due_notice","setCancelled","show_modal_cancel_request","laheta_peruutusilmoitus","cancel_reason","setNonArchived","setArrived","show_modal_arrived","arrived_order","erapaiva","laheta_saapumisilmoitus","setNote","note","setPayer","cancelPayer","payer_is_client","organisations","payer_selected","payer_info","saveExternalClient","external_client","kirjastokortin_numero","saveJoinClient","show_modal_join_client","join_client","add_sahkoposti","libraries","selected","lomake","saatteet","message_id","message","sendOrder","send_email","getCurrent","_step","_iterator","_createForOfIteratorHelper","done","info_en","info_fi","err","f","_step2","_iterator2","lib","order","t0","loadMessages","WEOrderForm","client","payer","loan_library_name","tilaajan_sahkoposti","bvModalEvt","update_client","update_url","update_client_url","preventDefault","_toConsumableArray","Set","search_response","client_url","client_response","post","t1","_callee3","_context3","_callee4","_context4","_this6","_callee5","_context5","_this7","_this8","_callee6","_context6","_this9","_this10","_callee7","_context7","_this11","_this12","_this13","order_id","_this14","_this15","checkDate","splitted","reserve","_this16","_callee8","_context8","setLoanLibrary","_this17","_callee9","_context9","_this18","_callee10","_yield$Promise$all","_yield$Promise$all2","r_request","r_organisations","_context10","Promise","all","_slicedToArray","tilaukset","current_client","ulkopuolinen","laina_title","show_all_requests","all_requests","laina_button_title","showAllRequests","filter","x","sortByStatus","items"],"mappings":"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","file":"js/app.c8b032d8.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',[_c('b-navbar',{staticClass:\"nav-weskari\",attrs:{\"toggleable\":\"lg\",\"type\":\"dark\"}},[_c('img',{staticClass:\"mr-3\",attrs:{\"src\":require(\"@/assets/images/logo.svg\"),\"height\":\"40px\"}}),_c('b-navbar-brand',{staticClass:\"brand\",attrs:{\"to\":{ path: '/'}}},[_vm._v(\"WESKARI \")]),_c('b-navbar-toggle',{attrs:{\"target\":\"nav-collapse\"}}),_c('b-collapse',{attrs:{\"id\":\"nav-collapse\",\"is-nav\":\"\"}},[_c('b-navbar-nav',[_c('b-nav-item',{attrs:{\"to\":'/lainat'}},[_vm._v(\"Lainat\")]),_c('b-nav-item',{attrs:{\"to\":'/asiakkaat'}},[_vm._v(\"Asiakkaat\")]),_c('b-nav-item',{attrs:{\"to\":'/kirjastot'}},[_vm._v(\"Kirjastot\")]),_c('b-nav-item',{attrs:{\"to\":'/organisaatiot'}},[_vm._v(\"Organisaatiot\")]),_c('b-nav-item',{attrs:{\"to\":'/saatteet'}},[_vm._v(\"Saatteet\")]),_c('b-nav-item',{attrs:{\"to\":'/tilastot'}},[_vm._v(\"Tilastot\")])],1),_c('b-navbar-nav',{staticClass:\"ml-auto\"},[_c('b-nav-item-dropdown',{attrs:{\"right\":\"\"},scopedSlots:_vm._u([{key:\"button-content\",fn:function(){return [_c('em',[_vm._v(_vm._s(_vm.$G.user))])]},proxy:true}])},[_c('b-dropdown-item',{attrs:{\"href\":\"/Shibboleth.sso/Logout\"}},[_vm._v(\"kirjaudu ulos\")])],1)],1)],1)],1)],1),(_vm.$G.login)?_c('b-container',{attrs:{\"fluid\":\"\"}},[_c('keep-alive',{attrs:{\"include\":\"WELoans,WELibrary,WEClient\"}},[(!_vm.error)?_c('router-view',{staticClass:\"view\"}):_vm._e()],1),(_vm.error)?_c('div',{staticClass:\"alert alert-danger\"},[_vm._v(_vm._s(_vm.error))]):_vm._e()],1):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<style>\n.pointer {\n\tcursor: pointer;\n}\n.nav-weskari {\n\tborder-bottom: 0.1mm solid #002957;\n\tbackground-color: #002957;\n\tmargin-bottom:20px;\n}\n.brand {\n\tmargin-left:10px\n}\n</style>\n<template>\n\n\n  <div id=\"app\">\n\n\n\t\t<div>\n\t\t  <b-navbar toggleable=\"lg\" type=\"dark\" class=\"nav-weskari\">\n\t\t\t<img class=\"mr-3\" src=\"@/assets/images/logo.svg\" height=\"40px\">\n\t\t\t<b-navbar-brand :to=\"{ path: '/'}\" class=\"brand\">WESKARI </b-navbar-brand>\n\n\t\t\t<b-navbar-toggle target=\"nav-collapse\"></b-navbar-toggle>\n\n\t\t\t<b-collapse id=\"nav-collapse\" is-nav>\n\t\t\t  <b-navbar-nav>\n\t\t\t\t<b-nav-item :to=\"'/lainat'\">Lainat</b-nav-item>\n\t\t\t\t<b-nav-item :to=\"'/asiakkaat'\">Asiakkaat</b-nav-item>\n\t\t\t\t<b-nav-item :to=\"'/kirjastot'\">Kirjastot</b-nav-item>\n\t\t\t\t<b-nav-item :to=\"'/organisaatiot'\">Organisaatiot</b-nav-item>\n\t\t\t\t<b-nav-item :to=\"'/saatteet'\">Saatteet</b-nav-item>\n\t\t\t\t<b-nav-item :to=\"'/tilastot'\">Tilastot</b-nav-item>\n\t\t\t  </b-navbar-nav>\n\t\t\t  <!-- Right aligned nav items -->\n\t\t\t <!-- <b-badge class=\"alert alert-danger float-right\">testiversio!</b-badge>-->\n\t\t\t  <b-navbar-nav class=\"ml-auto\">\n\n\n\t\t\t\t<b-nav-item-dropdown right>\n\t\t\t\t  <!-- Using 'button-content' slot -->\n\t\t\t\t  <template v-slot:button-content>\n\t\t\t\t\t<em>{{$G.user}}</em>\n\t\t\t\t  </template>\n\t\t\t\t  <b-dropdown-item href=\"/Shibboleth.sso/Logout\">kirjaudu ulos</b-dropdown-item>\n\t\t\t\t</b-nav-item-dropdown>\n\t\t\t  </b-navbar-nav>\n\t\t\t</b-collapse>\n\t\t  </b-navbar>\n\n\t\t</div>\n\n\n\n\n\t\t<!-- ROUTE VIEW (main) -->\n\t\t<b-container fluid v-if=\"$G.login\" >\n\t\t\t<keep-alive include=\"WELoans,WELibrary,WEClient\">\n\t\t\t\t<router-view class=\"view\" v-if=\"!error\"></router-view>\n\t\t\t</keep-alive>\n\t\t\t<div class=\"alert alert-danger\" v-if=\"error\">{{error}}</div>\n\t\t</b-container>\n\n\n\n  </div>\n</template>\n\n\n<script>\n\n\nexport default {\n\tname: 'app',\n\tdata: function() {\n\t\treturn {\n\t\t\terror: null,\n\t\t\tuser: null,\n\t\t\tlogging: false,\n\t\t\tintervalID: null\n\t\t}\n\t},\n\tmethods: {\n\t\tlogin: function() {\n\n\t\t\tconsole.log('trying login...')\n\t\t\tfetch(this.$G.api_url + \"/api/auth\", {credentials: \"include\"})\n\t\t\t.then(response => {\n\t\t\t\tif(!response.ok) throw({msg: 'session terminated'})\n\t\t\t\treturn response\n\t\t\t})\n\t\t\t.then(response => response.json())\n\t\t\t.then(data => {\n\t\t\t\tthis.$G.user = data.shibboleth.user\n\t\t\t})\n\t\t\t.catch(e => {\n\t\t\t\tconsole.log(e)\n\t\t\t\tif(e.msg && e.msg == 'session terminated')\n\t\t\t\t\tthis.error = 'Kirjautuminen vanheni. Lataa sivu uudestaan.'\n\t\t\t\telse\n\t\t\t\t\tthis.error = 'Kirjautuminen epäonnistui. Kirjautuminen luultavasti vanheni, lataa sivu uudestaan.'\n\t\t\t\tthis.$G.user = ''\n\t\t\t})\n\t\t}\n\t},\n    watch: {\n        $route: {\n            immediate: true,\n            handler(to, from) {\n                document.title = to.meta.title || 'WESKARI';\n            }\n        },\n    },\n\tcreated() {\n\t\tdocument.title = 'WESKARI'\n\t\tconsole.log(window.location.hostname)\n\t\tif(window.location.hostname == 'localhost') this.$G.api_url = '' // set api path dynamically\n\t\tthis.login()\n\t\tthis.intervalID = setInterval(() => this.login(), 30000);\n\t},\n\tbeforeDestroy () {\n\t\tclearInterval(this.intervalID)\n\t}\n\n}\n</script>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=2a5de8c8&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=2a5de8c8&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.item.tilaus_saatu)?_c('div',{staticStyle:{\"min-width\":\"250px\"}},[(_vm.$G.isOverdue(_vm.item.tilaus_saatu.pvm_erapaiva))?_c('div',{staticClass:\"text-danger\"},[_c('b',[_vm._v(_vm._s(_vm.$G.formatDate(_vm.item.tilaus_saatu.pvm_erapaiva,'reverse', '.')))])]):_c('div',{staticClass:\"text-info\"},[_vm._v(_vm._s(_vm.$G.formatDate(_vm.item.tilaus_saatu.pvm_erapaiva,'reverse', '.')))]),(_vm.item.tilaus_saatu.uusittavissa == 'no')?_c('span',{staticClass:\"text-danger\",staticStyle:{\"margin-left\":\"10px\",\"padding\":\"0px\"}},[_vm._v(\"ei voi uusia\")]):_vm._e(),(_vm.item.tilaus_saatu.info && _vm.item.tilaus_saatu.info != 'undefined')?_c('div',[_vm._v(_vm._s(_vm.item.tilaus_saatu.info))]):_vm._e()]):_c('div',[_vm._v(\"-\")])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template >\n\t<div v-if=\"item.tilaus_saatu\" style=\"min-width:250px\">\n\t\t<div v-if=\"$G.isOverdue(item.tilaus_saatu.pvm_erapaiva)\" class=\"text-danger\"><b>{{$G.formatDate(item.tilaus_saatu.pvm_erapaiva,'reverse', '.')}}</b></div>\n\t\t<div v-else class=\"text-info \">{{$G.formatDate(item.tilaus_saatu.pvm_erapaiva,'reverse', '.')}}</div>\n\t\t<span class=\"text-danger\" style=\"margin-left:10px; padding:0px\" v-if=\"item.tilaus_saatu.uusittavissa == 'no'\">ei voi uusia</span>\n\t\t<div v-if=\"item.tilaus_saatu.info && item.tilaus_saatu.info != 'undefined'\">{{item.tilaus_saatu.info}}</div>\n\t</div>\n\t<div v-else>-</div>\n</template>\n\n\n<script>\n\nexport default {\n\tname: 'WEDueDateDisplay',\n\tprops: ['item']\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WEDueDateDisplay.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WEDueDateDisplay.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WEDueDateDisplay.vue?vue&type=template&id=2cd501f8&\"\nimport script from \"./WEDueDateDisplay.vue?vue&type=script&lang=js&\"\nexport * from \"./WEDueDateDisplay.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport { BootstrapVue, IconsPlugin } from 'bootstrap-vue'\nVue.use(BootstrapVue)\nVue.use(IconsPlugin)\nVue.use(VueRouter)\n\n// 2. Define route components\nimport WEMain from './components/WEMain.vue'\nimport WERequest from './components/WERequest.vue'\nimport WEOrganisation from './components/WEOrganisation.vue'\nimport WEClient from './components/WEClient.vue'\nimport WELibrary from './components/WELibrary.vue'\nimport WEMessage from './components/WEMessage.vue'\nimport WELoanSearch from './components/WELoans.vue'\nimport WEStatistics from './components/WEStatistics.vue'\n\n\n// 3. Create the router\nconst router = new VueRouter({\n  //mode: 'history',\n  base: __dirname,\n  routes: [\n    { path: '/', component: WEMain },\n    { path: '/pyynnot/:id', component: WERequest },\n    { path: '/organisaatiot', component: WEOrganisation },\n    { path: '/organisaatiot/:id', component: WEOrganisation },\n    { path: '/asiakkaat', component: WEClient },\n    { path: '/asiakkaat/:id', component: WEClient },\n    { path: '/kirjastot', component: WELibrary },\n    { path: '/kirjastot/:id', component: WELibrary },\n    { path: '/saatteet', component: WEMessage },\n    { path: '/saatteet/:id', component: WEMessage },\n    { path: '/lainat', component: WELoanSearch },\n    { path: '/tilastot', component: WEStatistics },\n  ]\n})\n\nimport 'bootstrap/dist/css/bootstrap.css'\nimport 'bootstrap-vue/dist/bootstrap-vue.css'\n\n\nimport App from './App.vue'\n\nVue.config.productionTip = false\n\n\n// instance property https://vuejs.org/v2/cookbook/adding-instance-properties.html\nvar shared = new Vue({\n\tdata:{\n\t\tapi_url: '/api',\n\t\tlogin: true ,\n\t\terror: null,\n\t\tuser: null\n\t},\n\tmethods: {\n\t\tgetStatus(status) {\n\t\t\tif(status == 'kasittelyssa') return 'käsittelyssä'\n\t\t\telse return status\n\t\t},\n\n\t\tisOverdue(d) {\n\t\t\tvar dd = new Date(d)\n\t\t\tvar now = new Date()\n\t\t\tif(dd.getTime() < now.getTime()) return true\n\t\t\treturn false\n\t\t},\n\n\t\tformatDate(date, reverse, comb) {\n\t\t\tif(!comb) comb = '.'\n\t\t\tvar out = []\n\t\t\tif(date) {\n\t\t\t\tvar d = new Date(date)\n\t\t\t\tif(d instanceof Date && isFinite(d)) {\n\t\t\t\t\tout.push(d.getFullYear())\n\t\t\t\t\tout.push((d.getMonth() + 1).toString().padStart(2, \"0\"))\n\t\t\t\t\tout.push(d.getDate().toString().padStart(2, \"0\"))\n\t\t\t\t\tif(reverse) return out.reverse().join(comb)\n\t\t\t\t\telse return out.join(comb)\n\t\t\t\t} else {\n\t\t\t\t\treturn date\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn '-'\n\t\t\t}\n\t\t},\n\n\t\tgetDateFromUUID(uuid) {\n\t\t\tvar date = new Date( parseInt( uuid.substring(0,8), 16 ) * 1000 )\n\t\t\tvar formatted = new Intl.DateTimeFormat('fi-FI').format(date);\n\t\t\treturn formatted\n\t\t},\n\n\t\tgetToday(reverse, plusMonth, separator='.') {\n\t\t\tvar today = new Date();\n\t\t\tif(plusMonth) {\n\t\t\t\ttoday.setMonth(today.getMonth() + plusMonth)\n\t\t\t}\n\t\t\tif(reverse)\n\t\t\t\treturn (('0' + (today.getDate())).slice(-2) + separator + ('0' + (today.getMonth()+1)).slice(-2) + separator + today.getFullYear());\n\t\t\telse\n\t\t\t\treturn (today.getFullYear() + separator + ('0' + (today.getMonth()+1)).slice(-2) + separator + ('0' + (today.getDate())).slice(-2));\n\t\t},\n\n\t\trenderBreaks(text, splitter) {\n\t\t\tif(text && typeof text === 'string') return text.split(splitter).join('<br>');\n\t\t\telse return '';\n\t\t},\n\n\t\tgetInfo(request, lang) {\n\t\t\tvar lang_info = {\n\t\t\t\t'pyynto_id': {'en':'ID', 'fi': 'ID'},\n\t\t\t\t'teoksen_tiedot': {'en':'title', 'fi': 'teos'},\n\t\t\t\t'sivut': {'en':'pages', 'fi': 'sivut'},\n\t\t\t\t'julkaisun_tiedot': {'en': 'publication', 'fi': 'julkaisu'}\n\t\t\t}\n\t\t\treturn lang_info['teoksen_tiedot'][lang] + ': ' + request.teoksen_tiedot\n\n\t\t},\n\n\t},\n\tcomputed: {\n\t\tlocal: function() {\n\t\t\tif(window.location.hostname == 'localhost')\n\t\t\t\treturn ''\n\t\t\telse\n\t\t\t\treturn this.api_url\n\t\t}\n\t}\n})\n\nshared.install = function(){\n  Object.defineProperty(Vue.prototype, '$G', {\n    get () { return shared }\n  })\n}\nVue.use(shared);\n\n\nnew Vue({\n\trouter,\n\trender: h => h(App),\n}).$mount('#app')\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WERequests.vue?vue&type=style&index=0&id=2205b044&prod&scoped=true&lang=css&\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&id=2a5de8c8&prod&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WERequest.vue?vue&type=style&index=0&id=73c88aa6&prod&scoped=true&lang=css&\"","import axios from \"axios\"\nlet web = {}\n\nconst api = '/api'\n\nweb.updateRequest = async function(request_id, update) {\n\n\tvar url = api + \"/api/pyynnot/\" + request_id ;\n\taxios.put(url, update)\n\t.catch(data => {\n\t\tthrow(getError(data, 'Pyyntö epäonnistui'))\n\t})\n}\n\nweb.getLoanCount = async function() {\n\tvar url = api + \"/api/pyynnot/loan_count\" ;\n\treturn axios.get(url)\n\n\t\n}\n\nfunction getError(e, msg) {\n\tif(e.response && e.response.data && e.response.data.error) return e.response.data.error\n\telse return msg\n}\n\nexport default web\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('b-container',[_c('h1',[_vm._v(\"Tilastot\")]),_c('div',{staticStyle:{\"margin-top\":\"20px\",\"margin-bottom\":\"20px\"}},[_c('b-link',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){return _vm.search(_vm.year)}}},[_vm._v(_vm._s(_vm.year)+\" \")]),_vm._v(\" | \"),_c('b-link',{on:{\"click\":function($event){return _vm.search(_vm.year-1)}}},[_vm._v(_vm._s(_vm.year - 1)+\" | \")]),_c('b-link',{on:{\"click\":function($event){return _vm.search(_vm.year-2)}}},[_vm._v(_vm._s(_vm.year - 2))])],1),_c('b-card',{attrs:{\"title\":_vm.current_year}},[_c('b-row',{staticClass:\"my-1\"},[_c('b-col',{attrs:{\"sm\":\"12\"}},[_c('b-table',{attrs:{\"striped\":\"\",\"items\":_vm.stats,\"fields\":_vm.fields}})],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template >\n\t<b-container>\n\t\t<h1>Tilastot</h1>\n\t\t<div style=\"margin-top:20px; margin-bottom:20px\">\n\t\t\t\t<b-link href=\"#\" @click=\"search(year)\">{{ year }} </b-link> |\n\t\t\t\t<b-link @click=\"search(year-1)\">{{ year - 1 }} | </b-link>\n\t\t\t\t<b-link @click=\"search(year-2)\">{{ year - 2 }}</b-link>\n\t\t\t</div>\n\t\t<b-card :title=\"current_year\">\n\t\t  <b-row class=\"my-1\">\n\t\t\t<b-col sm=\"12\">\n\n\t\t\t\t<b-table striped :items=\"stats\" :fields=\"fields\">\n\n\t\t\t\t</b-table>\n\t\t\t</b-col>\n\t\t  </b-row>\n\t\t</b-card>\n\n\n\n\n\t</b-container>\n\n</template>\n\n\n<script>\n\nexport default {\n\tname: 'WEStatistics',\n\tdata: function() {\n\t\treturn {\n\t\t\tyear:0,\n\t\t\tcurrent_year: 0,\n\t\t\tstats: [],\n\t\t\tlibs: {},\n\t\t\tfields: [\n\t\t\t\t{key:'count', label: 'lainat'},\n\t\t\t\t{key:'kirjaston_nimi', label: 'kirjasto'}\n\t\t\t]\n\t\t\t\n\t\t}\n\t},\n\n\n\n\tmethods: {\n\n\t\tsearch(year) {\n\t\t\tthis.current_year = year\n\t\t\tthis.error = null\n\t\t\t\n\t\t\tfetch(this.$G.api_url + \"/api/tilastot/\" + year)\n\t\t\t.then(response => { \n\t\t\t\tif(!response.ok) throw(response.status)\n\t\t\t\treturn response.json()\n\t\t\t})\n\t\t\t.then(json => { \n\t\t\t\tthis.stats = json\n\t\t\t})\n\n\t\t\t.catch(data => {\n\t\t\t\tconsole.log('error' + data)\n\t\t\t\tthis.error = 'virhe: ' + data\n\t\t\t})\n\t\t}\n\t\t\n\t},\n\n\tmounted() {\n\t\tthis.year = new Date().getFullYear()\n\t\tthis.current_year = this.year\n\t\tthis.search(new Date().getFullYear())\n\t}\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WEStatistics.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WEStatistics.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WEStatistics.vue?vue&type=template&id=39cfcfa0&\"\nimport script from \"./WEStatistics.vue?vue&type=script&lang=js&\"\nexport * from \"./WEStatistics.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('b-container',{attrs:{\"fluid\":\"\"}},[_c('h1',[_vm._v(\"Saatteet\")]),(_vm.ready && _vm.search_result.length !== 0 && !_vm.current && _vm.mode == '')?_c('div',[_c('b-table',{attrs:{\"items\":_vm.search_result,\"fields\":_vm.fields},scopedSlots:_vm._u([{key:\"cell(_id)\",fn:function(data){return [_c('b-link',{attrs:{\"to\":'/saatteet/' + data.item._id}},[_vm._v(_vm._s(data.value))])]}}],null,false,1829266232)})],1):_vm._e(),(_vm.ready && _vm.current)?_c('b-card',{attrs:{\"title\":_vm.current._id,\"header-bg-variant\":\"dark\"}},[_c('div',{staticStyle:{\"max-width\":\"700px\"},domProps:{\"innerHTML\":_vm._s(_vm.$G.renderBreaks(_vm.current.saate,'\\n'))}}),_c('br'),_c('br'),(_vm.mode != 'edit')?_c('b-button',{on:{\"click\":function($event){_vm.mode = 'edit'}}},[_vm._v(\"muokkaa\")]):_vm._e()],1):_vm._e(),(_vm.current && _vm.mode == 'edit')?_c('b-card',{attrs:{\"title\":_vm.current._id,\"header-bg-variant\":\"dark\"}},[(_vm.mode == 'edit')?_c('table',[_c('tr',[_c('td',{staticStyle:{\"min-width\":\"200px\"}},[_vm._v(\"saate\")]),_c('td',[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.current['saate']),expression:\"current['saate']\"}],attrs:{\"cols\":\"80\",\"rows\":\"16\"},domProps:{\"value\":(_vm.current['saate'])},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.current, 'saate', $event.target.value)}}})])])]):_vm._e(),_c('b-container',[_c('b-button',{on:{\"click\":function($event){return _vm.loadData()}}},[_vm._v(\"peru\")]),_c('b-button',{attrs:{\"variant\":\"info\"},on:{\"click\":function($event){return _vm.saveForm()}}},[_vm._v(\"tallenna\")])],1)],1):_vm._e(),_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"Näillä placeholdereilla voit määrittää mihin mikin tieto tulee saatteessa. \"),_c('ul',[_c('li',[_vm._v(\"[[ID]] = pyynnön tunniste\")]),_c('li',[_vm._v(\"[[FI]] = teoksen tiedot suomeksi \")]),_c('li',[_vm._v(\"[[EN]] = teoksen tiedot englanniksi \")]),_c('li',[_vm._v(\"[[ERAPAIVA]] = eräpäivä (saapumisilmoituksessa) \")]),_c('li',[_vm._v(\"[[TARVITAAN_VIIMEISTAAN]] = tarvitaan viimeistään (tilauksessa) \")])])]),(_vm.current)?_c('b-link',{attrs:{\"to\":'/saatteet'}},[_vm._v(\"takaisin\")]):_vm._e(),(_vm.mode == 'add_new')?_c('b-card',{attrs:{\"title\":\"uusi saate\",\"header-bg-variant\":\"dark\"}},[_c('table',_vm._l((_vm.fields),function(field){return _c('tr',{key:field.key},[_c('td',{staticStyle:{\"min-width\":\"200px\"}},[_vm._v(_vm._s(field.key))]),_c('td',[_c('b-form-input',{model:{value:(_vm.new_obj[field.key]),callback:function ($$v) {_vm.$set(_vm.new_obj, field.key, $$v)},expression:\"new_obj[field.key]\"}})],1)])}),0),_c('b-button',{on:{\"click\":function($event){_vm.mode = ''}}},[_vm._v(\"peru\")]),_c('b-button',{attrs:{\"variant\":\"info\"},on:{\"click\":function($event){return _vm.saveForm()}}},[_vm._v(\"tallenna\")])],1):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template >\n\t<b-container fluid>\n\t\t<h1>Saatteet</h1>\n\n\t\t<!-- <b-button class=\"float-right\" v-if=\"!current && mode == ''\" @click=\"mode = 'add_new'\" variant=\"info\">lisää uusi</b-button> -->\n\n\t\t<!-- display search result -->\n\t\t<div v-if=\"ready && search_result.length !== 0 && !current && mode == ''\">\n\t\t\t\t<b-table :items=\"search_result\" :fields=\"fields\">\n\n\t\t\t\t\t<template v-slot:cell(_id)=\"data\">\n\t\t\t\t\t\t\t<b-link :to=\"'/saatteet/' + data.item._id\">{{data.value}}</b-link>\n\t\t\t\t\t</template>\n\t\t\t\t</b-table>\n\t\t</div>\n\n\n\t\t<!-- display individual item -->\n\t\t<b-card v-if=\"ready && current\" :title=\"current._id\" header-bg-variant=\"dark\">\n\n\t\t\t<div style=\"max-width:700px\" v-html=\"$G.renderBreaks(current.saate,'\\n')\"></div>\n\t\t\t<br><br>\n\t\t\t<b-button v-if=\"mode != 'edit'\" @click=\"mode = 'edit'\">muokkaa</b-button>\n\n\t\t</b-card>\n\n\n\n\t\t<!-- edit form -->\n\t\t<b-card v-if=\"current && mode == 'edit'\" :title=\"current._id\" header-bg-variant=\"dark\">\n\t\t\t<table v-if=\"mode == 'edit'\">\n\t\t\t\t<tr>\n\n\t\t\t\t\t<td style=\"min-width:200px\">saate</td>\n\t\t\t\t\t<td><textarea cols=\"80\" rows=\"16\" v-model=\"current['saate']\"></textarea></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\t\t\t<b-container>\n\n\n\t\t\t<b-button  @click=\"loadData()\">peru</b-button>\n\t\t\t<b-button  @click=\"saveForm()\" variant=\"info\">tallenna</b-button>\n\t\t\t</b-container>\n\t\t</b-card>\n\n\t\t\t<div class=\"alert alert-info\">Näillä placeholdereilla voit määrittää mihin mikin tieto tulee saatteessa.\n\t\t\t\t<ul>\n\t\t\t\t\t<li>[[ID]] = pyynnön tunniste</li>\n\t\t\t\t\t<li>[[FI]] = teoksen tiedot suomeksi </li>\n\t\t\t\t\t<li>[[EN]] = teoksen tiedot englanniksi </li>\n\t\t\t\t\t<li>[[ERAPAIVA]] = eräpäivä (saapumisilmoituksessa) </li>\n\t\t\t\t\t<li>[[TARVITAAN_VIIMEISTAAN]] = tarvitaan viimeistään (tilauksessa) </li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\n\t\t<b-link v-if=\"current\" :to=\"'/saatteet'\">takaisin</b-link>\n\n\n\t\t<!-- add new item-->\n\t\t<b-card v-if=\"mode == 'add_new'\" title=\"uusi saate\" header-bg-variant=\"dark\">\n\t\t\t<table>\n\t\t\t\t<tr v-for=\"field in fields\" :key=\"field.key\">\n\t\t\t\t\t<td style=\"min-width:200px\">{{field.key}}</td>\n\t\t\t\t\t<td><b-form-input v-model=\"new_obj[field.key]\"></b-form-input></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t\t<b-button @click=\"mode = ''\">peru</b-button>\n\t\t\t<b-button @click=\"saveForm()\" variant=\"info\">tallenna</b-button>\n\t\t</b-card>\n\n\t</b-container>\n\n</template>\n\n\n<script>\n\nexport default {\n\tname: 'WEMessage',\n\tdata: function() {\n\t\treturn {\n\t\t\tsearch_result: [],\n\t\t\tcurrent: null,\n\t\t\tready: false,\n\t\t\tmode: '',\n\t\t\tnew_obj: {},\n\t\t\tfields: [\n\t\t\t\t{key: '_id'},\n\t\t\t\t{key: 'saate'}\n\t\t\t],\n\t\t}\n\t},\n\n\twatch: {\n\t\t$route(to, from) {\n\t\t\tif(this.$route.params.id) {\n\t\t\t\tthis.loadData()\n\t\t\t} else {\n\t\t\t\tthis.current = null\n\t\t\t\tthis.loadData()\n\t\t\t}\n\t\t}\n\t},\n\n\tmethods: {\n\n\t\tsaveForm() {\n\t\t\tif(this.mode == 'add_new') {\n\t\t\t\tfetch(this.$G.api_url + \"/api/saatteet\", {method:'POST', body: JSON.stringify(this.new_obj)})\n\t\t\t\t.then(response => { return response.json()})\n\t\t\t\t.then(json => {\n\t\t\t\t\tthis.$router.push(\"/saatteet/\" + json._id)\n\t\t\t\t})\n\t\t\t\t.catch(data => {console.log('error' + data)})\n\t\t\t} else if(this.mode == 'edit') {\n\t\t\t\tconsole.log('edit')\n\t\t\t\tdelete this.current._id\n\t\t\t\tconsole.log(this.current)\n\t\t\t\tfetch(this.$G.api_url + \"/api/saatteet/\" + this.$route.params.id, {method:'PUT', body: JSON.stringify(this.current)})\n\t\t\t\t.then(response => { return response.json()})\n\t\t\t\t.then(json => {\n\t\t\t\t\tthis.loadData()\n\t\t\t\t})\n\t\t\t\t.catch(data => {console.log('error' + data)})\n\t\t\t}\n\t\t},\n\n\t\teditForm() {\n\t\t\tconsole.log(this.edit)\n\t\t\tconsole.log('sdf')\n\t\t\tthis.edit = !this.edit\n\t\t},\n\n\n\n\t\tloadData() {\n\n\t\t\tif(this.$route.params.id) {\n\t\t\t\tthis.mode = ''\n\t\t\t\tthis.ready = false\n\t\t\t\tthis.current = null\n\t\t\t\tfetch(this.$G.api_url + \"/api/saatteet/\" + this.$route.params.id)\n\t\t\t\t.then(response => { return response.json()})\n\t\t\t\t.then(json => {\n\t\t\t\t\tthis.current = json\n\t\t\t\t\tthis.ready = true\n\t\t\t\t})\n\t\t\t\t.catch(data => {console.log('error' + data)})\n\t\t\t} else {\n\t\t\t\tfetch(this.$G.api_url + \"/api/saatteet?sort=_id\")\n\t\t\t\t.then(response => { return response.json()})\n\t\t\t\t.then(json => {\n\t\t\t\t\tthis.search_result = json\n\t\t\t\t\tthis.ready = true\n\t\t\t\t})\n\t\t\t\t.catch(data => {console.log('error' + data)})\n\t\t\t}\n\t\t}\n\t},\n\n\tmounted() {\n\t\tthis.loadData()\n\t}\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WEMessage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WEMessage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WEMessage.vue?vue&type=template&id=67d1c888&\"\nimport script from \"./WEMessage.vue?vue&type=script&lang=js&\"\nexport * from \"./WEMessage.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('b-col',[_c('div',[_c('WERequests')],1),_c('div',[_c('hr',{staticClass:\"my-4\"}),_c('p',[_vm._v(\"by OSC/vepa\")])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('b-container',{attrs:{\"fluid\":\"\"}},[_c('h1',[_vm._v(\"Pyynnöt\")]),(_vm.error)?_c('div',{staticClass:\"alert- alert-danger\"},[_vm._v(_vm._s(_vm.error))]):_vm._e(),_c('div',[_c('h4',[_vm._v(\"uudet\")]),(_vm.ready['uusi'])?[_c('b-table',{attrs:{\"small\":\"\",\"striped\":\"\",\"hover\":\"\",\"items\":_vm.new_requests,\"fields\":_vm.fields},scopedSlots:_vm._u([{key:\"cell(tiedot)\",fn:function(data){return [_c('b-link',{attrs:{\"to\":{ path: '/pyynnot/' + data.item._id }}},[_vm._v(_vm._s(data.item.teoksen_tiedot))])]}},{key:\"cell(tilaaja)\",fn:function(data){return [(data.item.tilaaja)?_c('b-link',{attrs:{\"to\":{ path: '/asiakkaat/' + data.item.tilaaja._id }}},[_vm._v(_vm._s(data.item.tilaaja.sukunimi + ', ' + data.item.tilaaja.etunimi))]):_c('div',[_vm._v(_vm._s(data.item.sukunimi)+\", \"+_vm._s(data.item.etunimi)+\" ulkopuolinen\")])]}},{key:\"cell(sahkoposti)\",fn:function(data){return [(data.item.tilaaja)?_c('div',[_vm._v(_vm._s(data.item.tilaaja.sahkoposti.join(', ')))]):_c('div',{staticClass:\"alert alert-warning\"},[_vm._v(\"ulkopuolinen\")])]}}],null,false,3739004769)})]:_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"ei uusia pyyntöjä\")])],2),_c('h4',[_vm._v(\"käsittelyssä\")]),(_vm.ready['kasittelyssa'])?[_c('b-table',{attrs:{\"small\":\"\",\"striped\":\"\",\"hover\":\"\",\"items\":_vm.reserved_requests,\"fields\":_vm.fields},scopedSlots:_vm._u([{key:\"cell(tiedot)\",fn:function(data){return [_c('b-link',{attrs:{\"to\":{ path: '/pyynnot/' + data.item._id }}},[_vm._v(_vm._s(data.item.teoksen_tiedot))])]}},{key:\"cell(tilaaja)\",fn:function(data){return [(data.item.tilaaja)?_c('b-link',{attrs:{\"to\":{ path: '/asiakkaat/' + data.item.tilaaja._id }}},[_vm._v(_vm._s(data.item.tilaaja.sukunimi + ', ' + data.item.tilaaja.etunimi))]):_c('div',[_vm._v(_vm._s(data.item.sukunimi)+\", \"+_vm._s(data.item.etunimi)+\" ulkopuolinen\")])]}},{key:\"cell(sahkoposti)\",fn:function(data){return [(data.item.tilaaja)?_c('div',[_vm._v(_vm._s(data.item.tilaaja.sahkoposti.join(', ')))]):_c('div',{staticClass:\"alert alert-warning\"},[_vm._v(\"ulkopuolinen\")])]}}],null,false,3739004769)})]:_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"ei käsittelyssä olevia pyyntöjä\")]),_c('h4',[_vm._v(\"tilattu\")]),(_vm.ready['tilattu'])?[_c('b-table',{attrs:{\"small\":\"\",\"striped\":\"\",\"hover\":\"\",\"items\":_vm.ordered_requests,\"fields\":_vm.fields},scopedSlots:_vm._u([{key:\"cell(tiedot)\",fn:function(data){return [_c('b-link',{attrs:{\"to\":{ path: '/pyynnot/' + data.item._id }}},[_vm._v(_vm._s(data.item.teoksen_tiedot))])]}},{key:\"cell(tilaaja)\",fn:function(data){return [(data.item.tilaaja)?_c('b-link',{attrs:{\"to\":{ path: '/asiakkaat/' + data.item.tilaaja._id }}},[_vm._v(_vm._s(data.item.tilaaja.sukunimi + ', ' + data.item.tilaaja.etunimi))]):_vm._e()]}},{key:\"cell(sahkoposti)\",fn:function(data){return [(data.item.tilaaja)?_c('div',[_vm._v(_vm._s(data.item.tilaaja.sahkoposti.join(', ')))]):_vm._e()]}}],null,false,2542628187)})]:_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"ei saapumattomia tilauksia\")])],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<style scoped>\n\ttable {\n\t\tmargin-bottom:60px;\n\t}\n</style>\n\n<template >\n\t<b-container fluid>\n\t\t<h1>Pyynnöt</h1>\n\t\t<div class=\"alert- alert-danger\" v-if=\"error\">{{error}}</div>\n\t\t<div>\n\t\t\t<h4>uudet</h4>\n\t\t\t<template v-if=\"ready['uusi']\">\n\t\t\t\t<b-table small striped hover :items=\"new_requests\" :fields=\"fields\" >\n\t\t\t\t\t<template v-slot:cell(tiedot)=\"data\">\n\t\t\t\t\t\t<b-link :to=\"{ path: '/pyynnot/' + data.item._id }\">{{data.item.teoksen_tiedot}}</b-link>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-slot:cell(tilaaja)=\"data\">\n\t\t\t\t\t\t<b-link v-if=\"data.item.tilaaja\" :to=\"{ path: '/asiakkaat/' + data.item.tilaaja._id }\">{{ data.item.tilaaja.sukunimi + ', ' + data.item.tilaaja.etunimi }}</b-link>\n\t\t\t\t\t\t<div v-else>{{data.item.sukunimi}}, {{data.item.etunimi}} ulkopuolinen</div>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-slot:cell(sahkoposti)=\"data\">\n\t\t\t\t\t\t<div v-if=\"data.item.tilaaja\">{{ data.item.tilaaja.sahkoposti.join(', ')}}</div>\n\t\t\t\t\t\t<div v-else class=\"alert alert-warning\">ulkopuolinen</div>\n\t\t\t\t\t</template>\n\t\t\t\t</b-table>\n\t\t\t</template>\n\t\t\t<div class=\"alert alert-info\" v-else>ei uusia pyyntöjä</div>\n\n\t\t</div>\n\n\n\t\t<h4>käsittelyssä</h4>\n\t\t<template v-if=\"ready['kasittelyssa']\">\n\t\t\t<b-table small striped hover :items=\"reserved_requests\" :fields=\"fields\" >\n\n\t\t\t\t<template v-slot:cell(tiedot)=\"data\">\n\t\t\t\t\t<b-link :to=\"{ path: '/pyynnot/' + data.item._id }\">{{data.item.teoksen_tiedot}}</b-link>\n\t\t\t\t</template>\n\t\t\t\t<template v-slot:cell(tilaaja)=\"data\">\n\t\t\t\t\t<b-link v-if=\"data.item.tilaaja\" :to=\"{ path: '/asiakkaat/' + data.item.tilaaja._id }\">{{ data.item.tilaaja.sukunimi + ', ' + data.item.tilaaja.etunimi }}</b-link>\n\t\t\t\t\t<div v-else>{{data.item.sukunimi}}, {{data.item.etunimi}} ulkopuolinen</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-slot:cell(sahkoposti)=\"data\">\n\t\t\t\t\t<div v-if=\"data.item.tilaaja\">{{ data.item.tilaaja.sahkoposti.join(', ')}}</div>\n\t\t\t\t\t<div class=\"alert alert-warning\" v-else>ulkopuolinen</div>\n\t\t\t\t</template>\n\t\t\t</b-table>\n\t\t</template>\n\t\t<div class=\"alert alert-info\" v-else>ei käsittelyssä olevia pyyntöjä</div>\n\n\n\t\t<h4>tilattu</h4>\n\t\t<template v-if=\"ready['tilattu']\">\n\t\t\t<b-table small striped hover :items=\"ordered_requests\" :fields=\"fields\" >\n\n\t\t\t\t<template v-slot:cell(tiedot)=\"data\">\n\t\t\t\t\t<b-link :to=\"{ path: '/pyynnot/' + data.item._id }\">{{data.item.teoksen_tiedot}}</b-link>\n\t\t\t\t</template>\n\t\t\t\t<template v-slot:cell(tilaaja)=\"data\">\n\t\t\t\t\t<b-link v-if=\"data.item.tilaaja\" :to=\"{ path: '/asiakkaat/' + data.item.tilaaja._id }\">{{ data.item.tilaaja.sukunimi + ', ' + data.item.tilaaja.etunimi }}</b-link>\n\t\t\t\t</template>\n\t\t\t\t<template v-slot:cell(sahkoposti)=\"data\">\n\t\t\t\t\t<div v-if=\"data.item.tilaaja\">{{ data.item.tilaaja.sahkoposti.join(', ')}}</div>\n\t\t\t\t</template>\n\t\t\t</b-table>\n\t\t</template>\n\t\t<div class=\"alert alert-info\" v-else>ei saapumattomia tilauksia</div>\n\n\n\n\n\t</b-container>\n\n</template>\n\n\n<script>\nimport axios from 'axios'\n\nexport default {\n\tname: 'WERequests',\n\tdata: function() {\n\t\treturn {\n\t\t\tnew_requests: [],\n\t\t\treserved_requests: [],\n\t\t\tordered_requests: [],\n\t\t\tcurrent: null,\n\t\t\tready: {tilattu: false, kasittelyssa: false, uusi: false},\n\t\t\treserved_ready: false,\n\t\t\terror: null,\n\t\t\tfields: [\n\t\t\t\t{key:'_id', label: 'ID', thStyle:'width:10em'},\n\t\t\t\t{key:'teos_on', label: 'tyyppi', thStyle:'width:6em'},\n\t\t\t\t{key:'tiedot', thStyle:'min-width:50%'},\n\t\t\t\t//{key:'sahkoposti', label: 'sähköposti'},\n\t\t\t\t{key:'maksaja', label:'maksaja'},\n\t\t\t\t{key:'tilaaja', label: 'asiakas'},\n\t\t\t\t{key:'kasittelija', label: 'käsittelijä'}\n\t\t\t]\n\t\t}\n\t},\n\tprops: ['status'],\n\n\twatch: {\n\t\tcurrent: function() {\n\t\t\tthis.$G.current_request = this.current\n\t\t}\n\t},\n\n\tmethods: {\n\t\tloadData(status, target, query) {\n\n\t\t\taxios.get(this.$G.api_url + \"/api/pyynnot?status=\" + status + query)\n\t\t\t.then(response => {\n\t\t\t\tthis[target] = response.data\n\t\t\t\tif(this[target].length)\n\t\t\t\t\tthis.ready[status] = true\n\t\t\t\telse\n\t\t\t\t\tthis.ready[status] = false\n\t\t\t})\n\t\t\t.catch(data => {\n\t\t\t\tconsole.log('error' + data.response)\n\t\t\t\tthis.error = 'virhe: ' + data.response.data.error\n\t\t\t})\n\t\t}\n\t},\n\n\tmounted() {\n\t\tthis.loadData('uusi', 'new_requests', '')\n\t\tthis.loadData('kasittelyssa', 'reserved_requests', '')\n\t\tthis.loadData('tilattu', 'ordered_requests', '')\n\t}\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WERequests.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WERequests.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WERequests.vue?vue&type=template&id=2205b044&scoped=true&\"\nimport script from \"./WERequests.vue?vue&type=script&lang=js&\"\nexport * from \"./WERequests.vue?vue&type=script&lang=js&\"\nimport style0 from \"./WERequests.vue?vue&type=style&index=0&id=2205b044&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2205b044\",\n  null\n  \n)\n\nexport default component.exports","<template>\n\n\t<b-col>\n\n\t<!-- / deals-and-packages section-->\n\n\t\t<div>\n\t\t\t<WERequests></WERequests>\n\t\t</div>\n\t\t<div>\n\n\t\t  <hr class=\"my-4\">\n\t\t  <p>by OSC/vepa</p>\n\n\n\t\t</div>\n\t</b-col>\n\n</template>\n\n\n\n<script>\n\nimport WERequests from './WERequests.vue'\n\n\nexport default {\n\tname: 'WEMain',\n\tcomponents: {\n\t\tWERequests\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\trequests: {}\n\t\t}\n\t},\n\tmethods: {\n\n\t},\n\t mounted() {\n\n\t}\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WEMain.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WEMain.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WEMain.vue?vue&type=template&id=9dd41298&\"\nimport script from \"./WEMain.vue?vue&type=script&lang=js&\"\nexport * from \"./WEMain.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('b-container',{attrs:{\"fluid\":\"\"}},[_c('h1',[_vm._v(\"Lainat\")]),_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"lainassa tällä hetkellä: \"),_c('b',[_vm._v(_vm._s(_vm.loan_count))])]),_c('div',[_c('b-tabs',{attrs:{\"content-class\":\"mt-3\"},on:{\"activate-tab\":function($event){return _vm.getOverdueLoans()}}},[_c('b-tab',{attrs:{\"title\":\"lainahaku\",\"active\":\"\"}},[_c('b-row',{staticClass:\"my-1\"},[_c('b-col',{attrs:{\"sm\":\"4\"}},[_c('b-form-input',{attrs:{\"id\":\"input-default\",\"placeholder\":\"hakutermi\"},nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.search.apply(null, arguments)}},model:{value:(_vm.search_term),callback:function ($$v) {_vm.search_term=$$v},expression:\"search_term\"}}),_c('b-button',{on:{\"click\":_vm.search}},[_vm._v(\"hae\")]),(_vm.error)?_c('div',{staticClass:\"alert alert-danger\"},[_vm._v(_vm._s(_vm.error))]):_vm._e()],1),_c('b-col',[_c('b-form-select',{attrs:{\"options\":_vm.statuses},on:{\"change\":_vm.search},model:{value:(_vm.status),callback:function ($$v) {_vm.status=$$v},expression:\"status\"}})],1),_c('b-col',[_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"lainahaku hakee teoksen tiedoista. Tietyn henkilön lainat löytyy asiakashaun kautta.\")])])],1),_c('b-row',[(_vm.search_result.length != 0)?_c('div',[_c('b-table',{attrs:{\"small\":\"\",\"striped\":\"\",\"hover\":\"\",\"items\":_vm.search_result,\"fields\":_vm.fields},scopedSlots:_vm._u([{key:\"cell(teoksen_tiedot)\",fn:function(data){return [_c('b-link',{attrs:{\"to\":{ path: '/pyynnot/' + data.item._id }}},[_vm._v(_vm._s(data.item.teoksen_tiedot))])]}},{key:\"cell(tilaaja)\",fn:function(data){return [(data.item.tilaaja)?_c('b-link',{attrs:{\"to\":{ path: '/asiakkaat/' + data.item.tilaaja._id }}},[_vm._v(_vm._s(data.item.tilaaja.sukunimi)+\", \"+_vm._s(data.item.tilaaja.etunimi))]):_vm._e()]}},{key:\"cell(tilaus_saatu.kirjaston_nimi)\",fn:function(data){return [_c('div',[(data.item.tilaus_saatu)?_c('b-link',{attrs:{\"to\":'/kirjastot/' + data.item.tilaus_saatu.kirjasto_id}},[_vm._v(_vm._s(data.value))]):_vm._e()],1)]}},{key:\"cell(tilaus_saatu.pvm_erapaiva)\",fn:function(data){return [_c('DueDate',{attrs:{\"item\":data.item}})]}}],null,false,1711254347)})],1):_c('div',[_vm._v(\"ei tuloksia\")])])],1),_c('b-tab',{attrs:{\"title\":\"erääntyneet\"}},[(_vm.overdue.length != 0)?[_c('div',[_vm._v(\"erääntyneitä lainoja \"+_vm._s(_vm.overdue.length))]),_c('b-table',{attrs:{\"small\":\"\",\"striped\":\"\",\"hover\":\"\",\"items\":_vm.overdue,\"fields\":_vm.fields},scopedSlots:_vm._u([{key:\"cell(teoksen_tiedot)\",fn:function(data){return [_c('b-link',{attrs:{\"to\":{ path: '/pyynnot/' + data.item._id }}},[_vm._v(_vm._s(data.value))])]}},{key:\"cell(tilaaja)\",fn:function(data){return [_c('div',[(data.item.tilaaja)?_c('b-link',{attrs:{\"to\":'/asiakkaat/' + data.value._id}},[_vm._v(_vm._s(data.value.etunimi)+\" \"+_vm._s(data.value.sukunimi)+\" \")]):_vm._e()],1)]}},{key:\"cell(tilaus_saatu.pvm_erapaiva)\",fn:function(data){return [_c('DueDate',{attrs:{\"item\":data.item}})]}}],null,false,3871784930)})]:_vm._e()],2)],1)],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template >\n\t<b-container fluid>\n\t\t<h1>Lainat</h1>\n\t\t<div class=\"alert alert-info\">lainassa tällä hetkellä: <b>{{loan_count}}</b></div>\n\t\t<div>\n\t\t\t<b-tabs content-class=\"mt-3\" @activate-tab=\"getOverdueLoans()\">\n\t\t\t\t<b-tab title=\"lainahaku\" active>\n\t\t\t\t\t<b-row class=\"my-1\">\n\t\t\t\t\t\t<b-col sm=\"4\">\n\t\t\t\t\t\t\t<b-form-input @keydown.enter.native=\"search\" v-model=\"search_term\" id=\"input-default\" placeholder=\"hakutermi\"></b-form-input>\n\t\t\t\t\t\t\t<b-button @click=\"search\">hae</b-button>\n\t\t\t\t\t\t\t<div class=\"alert alert-danger\" v-if=\"error\">{{error}}</div>\n\t\t\t\t\t\t</b-col>\n\t\t\t\t\t\t<b-col>\n\t\t\t\t\t\t\t<b-form-select v-model=\"status\" :options=\"statuses\" @change=\"search\"></b-form-select>\n\n\t\t\t\t\t\t</b-col>\n\t\t\t\t\t\t<b-col>\n\t\t\t\t\t\t\t<div class=\"alert alert-info\">lainahaku hakee teoksen tiedoista. Tietyn henkilön lainat löytyy asiakashaun kautta.</div>\n\t\t\t\t\t\t</b-col>\n\t\t\t\t\t</b-row>\n\t\t\t\t\t<b-row>\n\t\t\t\t\t\t<div v-if=\"search_result.length != 0\">\n\t\t\t\t\t\t\t<b-table small striped  hover :items=\"search_result\" :fields=\"fields\" >\n\t\t\t\t\t\t\t\t<template v-slot:cell(teoksen_tiedot)=\"data\">\n\t\t\t\t\t\t\t\t\t<b-link :to=\"{ path: '/pyynnot/' + data.item._id }\">{{data.item.teoksen_tiedot}}</b-link>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<template v-slot:cell(tilaaja)=\"data\">\n\t\t\t\t\t\t\t\t\t<b-link v-if=\"data.item.tilaaja\" :to=\"{ path: '/asiakkaat/' + data.item.tilaaja._id }\">{{ data.item.tilaaja.sukunimi}}, {{data.item.tilaaja.etunimi}}</b-link>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<template v-slot:cell(tilaus_saatu.kirjaston_nimi)=\"data\">\n\t\t\t\t\t\t\t\t\t<div><b-link v-if=\"data.item.tilaus_saatu\" :to=\"'/kirjastot/' + data.item.tilaus_saatu.kirjasto_id\">{{data.value}}</b-link></div>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<template v-slot:cell(tilaus_saatu.pvm_erapaiva)=\"data\">\n\t\t\t\t\t\t\t\t\t<DueDate :item=\"data.item\"></DueDate>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</b-table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-else>ei tuloksia</div>\n\t\t\t\t\t</b-row>\n\n\t\t\t\t</b-tab>\n\n\t\t\t\t<b-tab title=\"erääntyneet\">\n\t\t\t\t\t<template v-if=\"overdue.length != 0\" >\n\t\t\t\t\t\t<div>erääntyneitä lainoja {{overdue.length}}</div>\n\t\t\t\t\t\t<b-table small striped  hover :items=\"overdue\" :fields=\"fields\" >\n\t\t\t\t\t\t\t<template v-slot:cell(teoksen_tiedot)=\"data\">\n\t\t\t\t\t\t\t\t<b-link :to=\"{ path: '/pyynnot/' + data.item._id }\">{{data.value}}</b-link>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-slot:cell(tilaaja)=\"data\">\n\t\t\t\t\t\t\t\t<div><b-link v-if=\"data.item.tilaaja\" :to=\"'/asiakkaat/' + data.value._id\">{{data.value.etunimi}} {{data.value.sukunimi}} </b-link></div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-slot:cell(tilaus_saatu.pvm_erapaiva)=\"data\">\n\t\t\t\t\t\t\t\t<DueDate :item=\"data.item\"></DueDate>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</b-table>\n\t\t\t\t\t</template>\n\t\t\t\t</b-tab>\n\t\t\t</b-tabs>\n\t\t</div>\n\n\n\n\n\t</b-container>\n\n</template>\n\n\n<script>\nimport axios from 'axios'\nimport DueDate from './WEDueDateDisplay.vue'\nimport web from './../web.js'\nexport default {\n\tname: 'WELoans',\n\tcomponents: {DueDate},\n\tdata: function() {\n\t\treturn {\n\t\t\tsearch_result: [],\n\t\t\tsearch_term: '',\n\t\t\tcurrent: null,\n\t\t\tloading: false,\n\t\t\terror: null,\n\t\t\toverdue: [],\n\t\t\tloan_count: 0,\n\t\t\tstatus: 'lainassa',\n\t\t\tstatuses: ['ei valintaa','kasittelyssa', 'lainassa', 'tilattu', 'arkistoitu', 'peruttu'],\n\t\t\tfields: [\n\t\t\t\t{key:'_id', label: 'tunnus'},\n\t\t\t\t{key:'teoksen_tiedot', label: 'kirjan nimi'},\n\t\t\t\t{key:'tilaaja', label: 'tilaaja'},\n\t\t\t\t{key:'tilaus_saatu.kirjaston_nimi', label: 'kirjasto'},\n\t\t\t\t{key:'status', label: 'status'},\n\t\t\t\t{key:'tilaus_saatu.pvm_erapaiva', label: 'eräpäivä', sortable:true}\n\n\t\t\t]\n\t\t}\n\t},\n\n\n\n\tmethods: {\n\n\t\tasync getOverdueLoans() {\n\t\t\tvar response = await axios(this.$G.api_url + \"/api/pyynnot/overdue_loans\")\n\t\t\tthis.overdue = response.data\n\t\t},\n\n\t\tsearch() {\n\t\t\tif(this.search_term == '') {\n\t\t\t\tthis.error = \"anna hakuehto\"\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.error = null\n\t\t\tvar query = ''\n\t\t\tif(this.status == 'ei valintaa')\n\t\t\t\tquery = \"?search=\" + this.search_term\n\t\t\telse\n\t\t\t\tquery = \"?search=\" + this.search_term + \"&status=\" + this.status + \"&sort=tilaus_saatu.pvm_erapaiva&reverse=1\"\n\n\t\t\tfetch(this.$G.api_url + \"/api/pyynnot\" + query)\n\t\t\t.then(response => {\n\t\t\t\tif(!response.ok) throw(response.status)\n\t\t\t\treturn response.json()\n\t\t\t})\n\t\t\t.then(json => {\n\t\t\t\tthis.search_result = json\n\t\t\t\tthis.ready = true\n\t\t\t})\n\t\t\t.catch(data => {\n\t\t\t\tconsole.log('error' + data)\n\t\t\t\tthis.error = 'virhe: ' + data\n\t\t\t})\n\t\t}\n\t},\n\n\tasync mounted() {\n\t\t var count = await web.getLoanCount()\n\t\t this.loan_count = count.data\n\t}\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WELoans.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WELoans.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WELoans.vue?vue&type=template&id=4999d048&\"\nimport script from \"./WELoans.vue?vue&type=script&lang=js&\"\nexport * from \"./WELoans.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('b-container',{attrs:{\"fluid\":\"\"}},[_c('h1',[_vm._v(\"Organisaatiot\")]),(!_vm.current && _vm.mode == '')?_c('b-card',{attrs:{\"title\":\"haku\"}},[_c('b-row',{staticClass:\"my-1\"},[_c('b-col',{attrs:{\"sm\":\"4\"}},[_c('b-form-input',{attrs:{\"id\":\"input-default\",\"placeholder\":\"hae nimen alkukirjaimilla\"},nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.search.apply(null, arguments)}},model:{value:(_vm.search_term),callback:function ($$v) {_vm.search_term=$$v},expression:\"search_term\"}}),_c('b-button',{on:{\"click\":_vm.search}},[_vm._v(\"hae\")])],1)],1)],1):_vm._e(),(!_vm.current && _vm.mode == '')?_c('b-button',{staticClass:\"float-right\",staticStyle:{\"margin\":\"20px\"},attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){_vm.mode = 'add_new'}}},[_vm._v(\"lisää uusi\")]):_vm._e(),(_vm.search_result.length !== 0 && !_vm.current && _vm.mode == '')?_c('div',[_c('b-table',{attrs:{\"items\":_vm.search_result,\"fields\":_vm.fields},scopedSlots:_vm._u([{key:\"cell(sahkoposti)\",fn:function(data){return [_c('b',{staticClass:\"text-info\"},[_vm._v(_vm._s(data.value))])]}},{key:\"cell(nimi)\",fn:function(data){return [_c('b-link',{attrs:{\"to\":'/organisaatiot/' + data.item._id}},[_vm._v(_vm._s(data.value))])]}}],null,false,1488930706)})],1):_vm._e(),(_vm.current && _vm.mode != 'edit')?_c('b-card',{attrs:{\"title\":_vm.current.nimi,\"header-bg-variant\":\"dark\"}},[_c('table',_vm._l((_vm.fields),function(field){return _c('tr',{key:field.key},[_c('td',{staticStyle:{\"min-width\":\"200px\"}},[_vm._v(_vm._s(field.key))]),_c('td',[_c('b',[_vm._v(_vm._s(_vm.current[field.key]))])])])}),0),(_vm.mode != 'edit')?_c('b-icon',{staticClass:\"float-right pointer\",attrs:{\"icon\":\"pen\",\"variant\":\"primary\"},on:{\"click\":function($event){_vm.mode = 'edit'}}},[_vm._v(\"muokkaa\")]):_vm._e()],1):_vm._e(),(_vm.current && _vm.mode == 'edit')?_c('b-card',{attrs:{\"title\":_vm.current.nimi,\"header-bg-variant\":\"dark\"}},[(_vm.mode == 'edit')?_c('table',_vm._l((_vm.fields),function(field){return _c('tr',{key:field.key},[_c('td',{staticStyle:{\"min-width\":\"200px\"}},[_vm._v(_vm._s(field.key))]),_c('td',[_c('b-form-input',{model:{value:(_vm.current[field.key]),callback:function ($$v) {_vm.$set(_vm.current, field.key, $$v)},expression:\"current[field.key]\"}})],1)])}),0):_vm._e(),_c('b-container',[_c('b-button',{staticClass:\"float-right\",staticStyle:{\"margin-left\":\"20px\"},attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){return _vm.saveForm()}}},[_vm._v(\"tallenna\")]),_c('b-button',{staticClass:\"float-right\",on:{\"click\":function($event){return _vm.loadData()}}},[_vm._v(\"peru\")])],1)],1):_vm._e(),(_vm.current)?_c('b-link',{attrs:{\"to\":'/organisaatiot'}},[_vm._v(\"takaisin hakuun\")]):_vm._e(),(_vm.mode == 'add_new')?_c('b-card',{attrs:{\"title\":\"uusi organisaatio\",\"header-bg-variant\":\"dark\"}},[_c('table',_vm._l((_vm.fields),function(field){return _c('tr',{key:field.key},[_c('td',{staticStyle:{\"min-width\":\"200px\"}},[_vm._v(_vm._s(field.key))]),_c('td',[_c('b-form-input',{model:{value:(_vm.new_obj[field.key]),callback:function ($$v) {_vm.$set(_vm.new_obj, field.key, $$v)},expression:\"new_obj[field.key]\"}})],1)])}),0),_c('b-button',{staticClass:\"float-right\",staticStyle:{\"margin-left\":\"20px\"},attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){return _vm.saveForm()}}},[_vm._v(\"tallenna\")]),_c('b-button',{staticClass:\"float-right\",on:{\"click\":function($event){_vm.mode = ''}}},[_vm._v(\"peru\")])],1):_vm._e(),_c('br'),_c('br'),(_vm.current)?_c('h2',[_vm._v(\"maksut\")]):_vm._e(),(_vm.current)?_c('b-card',[_c('b-table',{attrs:{\"items\":_vm.requests,\"fields\":_vm.request_fields},scopedSlots:_vm._u([{key:\"cell(tiedot)\",fn:function(data){return [_c('b-link',{attrs:{\"to\":'/pyynnot/' + data.item._id}},[_vm._v(_vm._s(data.item.teoksen_tiedot))])]}},{key:\"cell(tilaaja)\",fn:function(data){return [_c('b-link',{attrs:{\"to\":'/asiakkaat/' + data.item.tilaaja._id}},[_vm._v(_vm._s(data.value.sukunimi)+\", \"+_vm._s(data.value.etunimi))])]}}],null,false,2186137256)})],1):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template >\n\t<b-container fluid>\n\t\t<h1>Organisaatiot</h1>\n\n\n\t\t<!-- display search -->\n\t\t<b-card title=\"haku\" v-if=\"!current && mode == ''\">\n\t\t  <b-row class=\"my-1\">\n\t\t\t<b-col sm=\"4\">\n\t\t\t  <b-form-input @keydown.enter.native=\"search\" v-model=\"search_term\" id=\"input-default\" placeholder=\"hae nimen alkukirjaimilla\"></b-form-input>\n\t\t\t  <b-button @click=\"search\">hae</b-button>\n\t\t\t</b-col>\n\t\t  </b-row>\n\t\t</b-card>\n\n\t\t<b-button class=\"float-right\" v-if=\"!current && mode == ''\" @click=\"mode = 'add_new'\" variant=\"primary\" style=\"margin:20px\">lisää uusi</b-button>\n\n\t\t<!-- display search result -->\n\t\t<div v-if=\"search_result.length !== 0 && !current && mode == ''\">\n\t\t\t\t<b-table :items=\"search_result\" :fields=\"fields\">\n\t\t\t\t\t<template v-slot:cell(sahkoposti)=\"data\">\n\t\t\t\t\t\t<b class=\"text-info\">{{ data.value }}</b>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-slot:cell(nimi)=\"data\">\n\t\t\t\t\t\t\t<b-link :to=\"'/organisaatiot/' + data.item._id\">{{data.value}}</b-link>\n\t\t\t\t\t</template>\n\t\t\t\t</b-table>\n\t\t</div>\n\n\n\t\t<!-- display individual item -->\n\t\t<b-card v-if=\"current && mode != 'edit'\" :title=\"current.nimi\" header-bg-variant=\"dark\">\n\n\t\t\t<table>\n\t\t\t\t<tr v-for=\"field in fields\" :key=\"field.key\">\n\t\t\t\t\t<td style=\"min-width:200px\">{{field.key}}</td>\n\t\t\t\t\t<td><b>{{current[field.key]}}</b></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t\t<b-icon v-if=\"mode != 'edit'\" @click=\"mode = 'edit'\" icon=\"pen\" class=\"float-right pointer\" variant=\"primary\">muokkaa</b-icon>\n\n\t\t</b-card>\n\n\n\t\t<!-- edit form -->\n\t\t<b-card v-if=\"current && mode == 'edit'\" :title=\"current.nimi\" header-bg-variant=\"dark\">\n\t\t\t<table v-if=\"mode == 'edit'\">\n\t\t\t\t<tr v-for=\"field in fields\" :key=\"field.key\">\n\t\t\t\t\t<td style=\"min-width:200px\">{{field.key}}</td>\n\t\t\t\t\t<td><b-form-input v-model=\"current[field.key]\"></b-form-input></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\t\t\t<b-container>\n\t\t\t\t<b-button  @click=\"saveForm()\" class=\"float-right\" variant=\"primary\" style=\"margin-left:20px\">tallenna</b-button>\n\t\t\t\t<b-button  @click=\"loadData()\" class=\"float-right\" >peru</b-button>\n\t\t\t</b-container>\n\t\t</b-card>\n\n\t\t<b-link v-if=\"current\" :to=\"'/organisaatiot'\">takaisin hakuun</b-link>\n\n\n\t\t<!-- add new item-->\n\t\t<b-card v-if=\"mode == 'add_new'\" title=\"uusi organisaatio\" header-bg-variant=\"dark\">\n\t\t\t<table>\n\t\t\t\t<tr v-for=\"field in fields\" :key=\"field.key\">\n\t\t\t\t\t<td style=\"min-width:200px\">{{field.key}}</td>\n\t\t\t\t\t<td><b-form-input v-model=\"new_obj[field.key]\"></b-form-input></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t\t<b-button  @click=\"saveForm()\" class=\"float-right\" variant=\"primary\" style=\"margin-left:20px\">tallenna</b-button>\n\t\t\t<b-button @click=\"mode = ''\" class=\"float-right\">peru</b-button>\n\t\t</b-card>\n\n\t\t<br><br><h2 v-if=\"current\">maksut</h2>\n\t\t<b-card v-if=\"current\">\n\t\t\t<b-table :items=\"requests\" :fields=\"request_fields\">\n\t\t\t\t<template v-slot:cell(tiedot)=\"data\">\n\t\t\t\t\t\t<b-link :to=\"'/pyynnot/' + data.item._id\">{{data.item.teoksen_tiedot}}</b-link>\n\t\t\t\t</template>\n\t\t\t\t<template v-slot:cell(tilaaja)=\"data\">\n\t\t\t\t\t\t<b-link :to=\"'/asiakkaat/' + data.item.tilaaja._id\">{{data.value.sukunimi}}, {{data.value.etunimi}}</b-link>\n\t\t\t\t</template>\n\n\t\t\t</b-table>\n\t\t</b-card>\n\n\t</b-container>\n\n</template>\n\n\n<script>\n\nexport default {\n\tname: 'WEOrganisation',\n\tdata: function() {\n\t\treturn {\n\t\t\tsearch_term: '',\n\t\t\tsearch_result: [],\n\t\t\tcurrent: null,\n\t\t\trequests: [],\n\t\t\tready: false,\n\t\t\tmode: '',\n\t\t\tnew_obj: {},\n\t\t\tfields: [\n\t\t\t\t{key: 'nimi'},\n\t\t\t\t{key: 'kustannuspaikka'},\n\t\t\t\t{key: 'huomio', label:'lisätieto'}\n\t\t\t],\n\t\t\trequest_fields: [\n\n\t\t\t\t{key: '_id', label:'tunniste'},\n\t\t\t\t{key: 'teos_on', label:'tyyppi'},\n\t\t\t\t{key: 'tiedot'},\n\t\t\t\t{key: 'tilaaja'},\n\t\t\t\t{key: 'kasittelija', label: 'käsittelijä'},\n\t\t\t\t{key: 'status'},\n\t\t\t\t{key: 'maksu'},\n\t\t\t\t{key: 'maksaja_info'}\n\t\t\t]\n\t\t}\n\t},\n\n\twatch: {\n\t\t$route(to, from) {\n\t\t\tif(this.$route.params.id) {\n\t\t\t\tthis.loadData()\n\t\t\t} else {\n\t\t\t\tthis.current = null\n\t\t\t}\n\t\t}\n\t},\n\n\tmethods: {\n\n\t\tsaveForm() {\n\t\t\tconsole.log('saveform')\n\t\t\tif(this.mode == 'add_new') {\n\t\t\t\tfetch(this.$G.api_url + \"/api/organisaatiot\", {method:'POST', body: JSON.stringify(this.new_obj)})\n\t\t\t\t.then(response => { return response.json()})\n\t\t\t\t.then(json => {\n\t\t\t\t\tthis.$router.push(\"/organisaatiot/\" + json._id)\n\t\t\t\t})\n\t\t\t\t.catch(data => {console.log('error' + data)})\n\t\t\t} else if(this.mode == 'edit') {\n\t\t\t\tconsole.log('edit')\n\t\t\t\tdelete this.current._id\n\t\t\t\tconsole.log(this.current)\n\t\t\t\tfetch(this.$G.api_url + \"/api/organisaatiot/\" + this.$route.params.id, {method:'PUT', body: JSON.stringify(this.current)})\n\t\t\t\t.then(response => { return response.json()})\n\t\t\t\t.then(json => {\n\t\t\t\t\tthis.loadData()\n\t\t\t\t})\n\t\t\t\t.catch(data => {console.log('error' + data)})\n\t\t\t}\n\t\t},\n\n\t\teditForm() {\n\t\t\tconsole.log(this.edit)\n\t\t\tconsole.log('sdf')\n\t\t\tthis.edit = !this.edit\n\t\t},\n\n\t\tloadRelated() {\n\t\t\tfetch(this.$G.api_url + \"/api/pyynnot/?sort=_id&reverse=1&maksaja_varmistettu=\" + this.$route.params.id)\n\t\t\t.then(response => { return response.json()})\n\t\t\t.then(json => {\n\t\t\t\tthis.requests = json\n\t\t\t\tthis.ready = true\n\t\t\t})\n\t\t\t.catch(data => {console.log('error' + data)})\n\t\t},\n\n\t\tloadData() {\n\t\t\tif(this.$route.params.id) {\n\t\t\t\tthis.mode = ''\n\t\t\t\tthis.ready = false\n\t\t\t\tthis.current = null\n\t\t\t\tfetch(this.$G.api_url + \"/api/organisaatiot/\" + this.$route.params.id)\n\t\t\t\t.then(response => { return response.json()})\n\t\t\t\t.then(json => {\n\t\t\t\t\tthis.current = json\n\t\t\t\t\tthis.loadRelated()\n\t\t\t\t})\n\t\t\t\t.catch(data => {console.log('error' + data)})\n\t\t\t}\n\t\t},\n\t\tasync search() {\n\t\t\tthis.current = null\n\t\t\tif(this.search_term !== '') {\n\t\t\t\tif(!this.search_term.includes('*')) this.search_term = this.search_term + '*'\n\t\t\t\tvar search = 'nimi=' + this.search_term\n\n\t\t\t\tvar result = await fetch(this.$G.api_url + \"/api/organisaatiot?\" + search)\n\t\t\t\tthis.search_result = await result.json()\n\t\t\t}\n\t\t}\n\t},\n\n\tmounted() {\n\t\tthis.loadData()\n\t}\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WEOrganisation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WEOrganisation.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WEOrganisation.vue?vue&type=template&id=48e731e5&\"\nimport script from \"./WEOrganisation.vue?vue&type=script&lang=js&\"\nexport * from \"./WEOrganisation.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('b-container',{attrs:{\"fluid\":\"\"}},[_c('h1',[_vm._v(\"Kirjastot\")]),(!_vm.current && _vm.mode == '')?_c('b-card',{attrs:{\"title\":\"haku\"}},[_c('b-row',{staticClass:\"my-1\"},[_c('b-col',{attrs:{\"sm\":\"4\"}},[_c('b-form-input',{attrs:{\"id\":\"input-default\",\"placeholder\":\"hae nimen alkukirjaimilla\"},nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.search.apply(null, arguments)}},model:{value:(_vm.search_term),callback:function ($$v) {_vm.search_term=$$v},expression:\"search_term\"}}),_c('label',[_vm._v(\"TAI \")]),_c('b-form-input',{attrs:{\"id\":\"input-default2\",\"placeholder\":\"hae lyhenteellä\"},nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.search.apply(null, arguments)}},model:{value:(_vm.search_lyhenne),callback:function ($$v) {_vm.search_lyhenne=$$v},expression:\"search_lyhenne\"}}),_c('b-button',{on:{\"click\":_vm.search}},[_vm._v(\"hae\")])],1)],1)],1):_vm._e(),_c('br'),(!_vm.current && _vm.mode == '')?_c('b-button',{staticClass:\"float-right\",attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){_vm.mode = 'add_new'}}},[_vm._v(\"lisää uusi\")]):_vm._e(),(_vm.loading)?_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"haen...\")]):_vm._e(),(_vm.search_result.length !== 0 && !_vm.current && _vm.mode == '')?_c('div',[_c('b-table',{attrs:{\"items\":_vm.search_result,\"fields\":_vm.fields_search},scopedSlots:_vm._u([{key:\"cell(sahkoposti)\",fn:function(data){return [_c('b',{staticClass:\"text-info\"},[_vm._v(_vm._s(data.value))])]}},{key:\"cell(nimi)\",fn:function(data){return [_c('b-link',{attrs:{\"to\":'/kirjastot/' + data.item._id}},[_vm._v(_vm._s(data.value))])]}}],null,false,1824578108)})],1):_vm._e(),(_vm.current && _vm.mode != 'edit')?_c('b-card',{attrs:{\"title\":_vm.current.nimi + ' (' + _vm.current.lyhenne + ')',\"header-bg-variant\":\"dark\"}},[_c('table',{staticClass:\"table table-sm\"},_vm._l((_vm.fields),function(field){return _c('tr',{key:field.key},[_c('td',{staticStyle:{\"min-width\":\"200px\"}},[_vm._v(_vm._s(field.key))]),(field.key == 'lomake' || field.key == 'kotisivut')?_c('td',[_c('a',{attrs:{\"target\":\"_blank\",\"href\":_vm.getLink(_vm.current[field.key])}},[_vm._v(_vm._s(_vm.current[field.key]))])]):_c('td',[_c('b',[_vm._v(_vm._s(_vm.current[field.key]))])])])}),0),(_vm.mode != 'edit')?_c('b-icon',{staticClass:\"float-right pointer\",attrs:{\"icon\":\"pen\",\"variant\":\"primary\"},on:{\"click\":function($event){_vm.mode = 'edit'}}},[_vm._v(\"muokkaa\")]):_vm._e()],1):_vm._e(),(_vm.current && _vm.mode == 'edit')?_c('b-card',{attrs:{\"title\":_vm.current.nimi,\"header-bg-variant\":\"dark\"}},[_c('table',{staticClass:\"table table-striped\"},_vm._l((_vm.fields),function(field){return _c('tr',{key:field.key},[(field.key != '_id')?[(field.label)?_c('td',{staticStyle:{\"min-width\":\"200px\"}},[_vm._v(_vm._s(field.label))]):_c('td',{staticStyle:{\"min-width\":\"200px\"}},[_vm._v(_vm._s(field.key))]),_c('td',{staticStyle:{\"min-width\":\"350px\"}},[_c('b-form-input',{model:{value:(_vm.current[field.key]),callback:function ($$v) {_vm.$set(_vm.current, field.key, $$v)},expression:\"current[field.key]\"}})],1)]:_vm._e()],2)}),0),_c('b-container',[_c('b-button',{staticClass:\"float-right\",staticStyle:{\"margin-left\":\"20px\"},attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){return _vm.saveForm()}}},[_vm._v(\"tallenna\")]),_c('b-button',{staticClass:\"float-right\",on:{\"click\":function($event){return _vm.loadData()}}},[_vm._v(\"peru\")])],1)],1):_vm._e(),(_vm.current)?_c('b-link',{attrs:{\"to\":'/kirjastot'}},[_vm._v(\"takaisin hakuun\")]):_vm._e(),(_vm.mode == 'add_new')?_c('b-card',{attrs:{\"title\":\"uusi kirjasto\",\"header-bg-variant\":\"dark\"}},[_c('table',_vm._l((_vm.fields),function(field){return _c('tr',{key:field.key},[(field.label)?_c('td',{staticStyle:{\"min-width\":\"200px\"}},[_vm._v(_vm._s(field.label))]):_c('td',{staticStyle:{\"min-width\":\"200px\"}},[_vm._v(_vm._s(field.key))]),_c('td',{staticStyle:{\"min-width\":\"350px\"}},[_c('b-form-input',{model:{value:(_vm.new_obj[field.key]),callback:function ($$v) {_vm.$set(_vm.new_obj, field.key, $$v)},expression:\"new_obj[field.key]\"}})],1)])}),0),_c('b-button',{on:{\"click\":function($event){_vm.mode = ''}}},[_vm._v(\"peru\")]),_c('b-button',{attrs:{\"variant\":\"info\"},on:{\"click\":function($event){return _vm.saveForm()}}},[_vm._v(\"tallenna\")])],1):_vm._e(),(_vm.error)?_c('div',{staticClass:\"alert alert-danger\"},[_vm._v(_vm._s(_vm.error))]):_vm._e(),_c('br'),_c('br'),(_vm.current)?_c('h2',[_vm._v(\"lainassa olevat\")]):_vm._e(),(_vm.current)?_c('b-card',[_c('b-table',{attrs:{\"items\":_vm.requests,\"fields\":_vm.request_fields},scopedSlots:_vm._u([{key:\"cell(tiedot)\",fn:function(data){return [_c('b-link',{attrs:{\"to\":'/pyynnot/' + data.item._id}},[_vm._v(_vm._s(data.item.teoksen_tiedot))])]}},{key:\"cell(tilaaja)\",fn:function(data){return [(data.item.tilaaja)?_c('b-link',{attrs:{\"to\":{ path: '/asiakkaat/' + data.item.tilaaja._id }}},[_vm._v(_vm._s(data.item.tilaaja.sukunimi)+\", \"+_vm._s(data.item.tilaaja.etunimi))]):_vm._e()]}},{key:\"cell(erapaiva)\",fn:function(data){return [_c('DueDate',{attrs:{\"item\":data.item}})]}}],null,false,458813704)})],1):_vm._e(),(_vm.current)?_c('h2',[_vm._v(\"arkistoidut\")]):_vm._e(),(_vm.current)?_c('b-card',[_c('b-button',{on:{\"click\":function($event){return _vm.loadArchive()}}},[_vm._v(\"näytä arkistoidut\")]),_c('b-table',{attrs:{\"items\":_vm.archived,\"fields\":_vm.request_fields},scopedSlots:_vm._u([{key:\"cell(tiedot)\",fn:function(data){return [_c('b-link',{attrs:{\"to\":'/pyynnot/' + data.item._id}},[_vm._v(_vm._s(data.item.teoksen_tiedot))])]}},{key:\"cell(tilaaja)\",fn:function(data){return [(data.item.tilaaja)?_c('b-link',{attrs:{\"to\":{ path: '/asiakkaat/' + data.item.tilaaja._id }}},[_vm._v(_vm._s(data.item.tilaaja.sukunimi)+\", \"+_vm._s(data.item.tilaaja.etunimi))]):_vm._e()]}},{key:\"cell(erapaiva)\",fn:function(data){return [_c('DueDate',{attrs:{\"item\":data.item}})]}}],null,false,458813704)})],1):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template >\n\t<b-container fluid>\n\t\t<h1>Kirjastot</h1>\n\n\n\t\t<!-- display search -->\n\t\t<b-card title=\"haku\" v-if=\"!current && mode == ''\">\n\t\t  <b-row class=\"my-1\">\n\t\t\t<b-col sm=\"4\">\n\t\t\t  <b-form-input @keydown.enter.native=\"search\" v-model=\"search_term\" id=\"input-default\" placeholder=\"hae nimen alkukirjaimilla\"></b-form-input>\n\t\t\t  <label>TAI </label>\n\t\t\t  <b-form-input @keydown.enter.native=\"search\" v-model=\"search_lyhenne\" id=\"input-default2\" placeholder=\"hae lyhenteellä\"></b-form-input>\n\t\t\t  <b-button @click=\"search\">hae</b-button>\n\t\t\t</b-col>\n\t\t  </b-row>\n\t\t</b-card>\n\t\t<br>\n\t\t<b-button class=\"float-right\" v-if=\"!current && mode == ''\" @click=\"mode = 'add_new'\" variant=\"primary\">lisää uusi</b-button>\n\n\t\t<div v-if=\"loading\" class=\"alert alert-info\">haen...</div>\n\n\t\t<!-- display search result -->\n\t\t<div v-if=\"search_result.length !== 0 && !current && mode == ''\">\n\t\t\t\t<b-table :items=\"search_result\" :fields=\"fields_search\">\n\t\t\t\t\t<template v-slot:cell(sahkoposti)=\"data\">\n\t\t\t\t\t\t<b class=\"text-info\">{{ data.value }}</b>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-slot:cell(nimi)=\"data\">\n\t\t\t\t\t\t\t<b-link :to=\"'/kirjastot/' + data.item._id\">{{data.value}}</b-link>\n\t\t\t\t\t</template>\n\t\t\t\t</b-table>\n\t\t</div>\n\n\n\t\t<!-- display individual item -->\n\t\t<b-card v-if=\"current && mode != 'edit'\" :title=\"current.nimi + ' (' + current.lyhenne + ')'\" header-bg-variant=\"dark\">\n\n\t\t\t<table class=\"table table-sm\">\n\t\t\t\t<tr v-for=\"field in fields\" :key=\"field.key\">\n\n\t\t\t\t\t<td style=\"min-width:200px\">{{field.key}}</td>\n\t\t\t\t\t<td v-if=\"field.key == 'lomake' || field.key == 'kotisivut'\"><a target=\"_blank\" :href=\"getLink(current[field.key])\">{{current[field.key]}}</a></td>\n\t\t\t\t\t<td v-else><b>{{current[field.key]}}</b></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t\t<b-icon v-if=\"mode != 'edit'\" @click=\"mode = 'edit'\" icon=\"pen\" class=\"float-right pointer\" variant=\"primary\">muokkaa</b-icon>\n\n\t\t</b-card>\n\n\n\t\t<!-- edit form -->\n\t\t<b-card v-if=\"current && mode == 'edit'\" :title=\"current.nimi\" header-bg-variant=\"dark\">\n\t\t\t<table class=\"table table-striped\">\n\t\t\t\t<tr v-for=\"field in fields\" :key=\"field.key\">\n\t\t\t\t\t<template v-if=\"field.key != '_id'\">\n\t\t\t\t\t\t<td v-if=\"field.label\" style=\"min-width:200px\">{{field.label}}</td>\n\t\t\t\t\t\t<td v-else style=\"min-width:200px\">{{field.key}}</td>\n\t\t\t\t\t\t<td style=\"min-width:350px\" ><b-form-input v-model=\"current[field.key]\"></b-form-input></td>\n\t\t\t\t\t</template>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\t\t\t<b-container>\n\n\t\t\t\t<b-button  @click=\"saveForm()\" class=\"float-right\" variant=\"primary\" style=\"margin-left:20px\">tallenna</b-button>\n\t\t\t\t<b-button  @click=\"loadData()\" class=\"float-right\" >peru</b-button>\n\n\t\t\t</b-container>\n\t\t</b-card>\n\n\t\t<b-link v-if=\"current\" :to=\"'/kirjastot'\">takaisin hakuun</b-link>\n\n\n\t\t<!-- add new item-->\n\t\t<b-card v-if=\"mode == 'add_new'\" title=\"uusi kirjasto\" header-bg-variant=\"dark\">\n\t\t\t<table>\n\t\t\t\t<tr v-for=\"field in fields\" :key=\"field.key\">\n\t\t\t\t\t<td v-if=\"field.label\" style=\"min-width:200px\">{{field.label}}</td>\n\t\t\t\t\t<td v-else style=\"min-width:200px\">{{field.key}}</td>\n\t\t\t\t\t<td style=\"min-width:350px\" ><b-form-input v-model=\"new_obj[field.key]\"></b-form-input></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t\t<b-button @click=\"mode = ''\">peru</b-button>\n\t\t\t<b-button @click=\"saveForm()\" variant=\"info\">tallenna</b-button>\n\t\t</b-card>\n\n\t\t<div class=\"alert alert-danger\" v-if=\"error\">{{error}}</div>\n\n\t\t<br><br><h2 v-if=\"current\">lainassa olevat</h2>\n\t\t<b-card v-if=\"current\">\n\t\t\t<b-table :items=\"requests\" :fields=\"request_fields\">\n\t\t\t\t<template v-slot:cell(tiedot)=\"data\">\n\t\t\t\t\t\t<b-link :to=\"'/pyynnot/' + data.item._id\">{{data.item.teoksen_tiedot}}</b-link>\n\t\t\t\t</template>\n\t\t\t\t<template v-slot:cell(tilaaja)=\"data\">\n\t\t\t\t\t<b-link v-if=\"data.item.tilaaja\" :to=\"{ path: '/asiakkaat/' + data.item.tilaaja._id }\">{{ data.item.tilaaja.sukunimi}}, {{data.item.tilaaja.etunimi}}</b-link>\n\t\t\t\t</template>\n\t\t\t\t<template v-slot:cell(erapaiva)=\"data\">\n\t\t\t\t\t\t<DueDate :item=\"data.item\"></DueDate>\n\t\t\t\t</template>\n\t\t\t</b-table>\n\n\n\t\t</b-card>\n\n\t\t<h2 v-if=\"current\">arkistoidut</h2>\n\t\t<b-card v-if=\"current\">\n\n\t\t\t<b-button @click=\"loadArchive()\">näytä arkistoidut</b-button>\n\t\t\t<b-table :items=\"archived\" :fields=\"request_fields\">\n\t\t\t\t<template v-slot:cell(tiedot)=\"data\">\n\t\t\t\t\t\t<b-link :to=\"'/pyynnot/' + data.item._id\">{{data.item.teoksen_tiedot}}</b-link>\n\t\t\t\t</template>\n\t\t\t\t<template v-slot:cell(tilaaja)=\"data\">\n\t\t\t\t\t<b-link v-if=\"data.item.tilaaja\" :to=\"{ path: '/asiakkaat/' + data.item.tilaaja._id }\">{{ data.item.tilaaja.sukunimi}}, {{data.item.tilaaja.etunimi}}</b-link>\n\t\t\t\t</template>\n\t\t\t\t<template v-slot:cell(erapaiva)=\"data\">\n\t\t\t\t\t\t<DueDate :item=\"data.item\"></DueDate>\n\t\t\t\t</template>\n\t\t\t</b-table>\n\n\t</b-container>\n\n</template>\n\n\n<script>\nimport DueDate from './WEDueDateDisplay.vue'\nexport default {\n\tname: 'WELibrary',\n\tcomponents: {DueDate},\n\tdata: function() {\n\t\treturn {\n\t\t\tsearch_term: '',\n\t\t\tsearch_lyhenne: '',\n\t\t\tsearch_result: [],\n\t\t\tarchived: [],\n\t\t\tcurrent: null,\n\t\t\trequests: [],\n\t\t\tready: false,\n\t\t\tloading: false,\n\t\t\terror: null,\n\t\t\tmode: '',\n\t\t\tnew_obj: {},\n\t\t\tfields_search: [\n\t\t\t\t{key: 'nimi'},\n\t\t\t\t{key: 'lyhenne'},\n\t\t\t\t{key: 'email', label: 'sähköposti'},\n\t\t\t\t{key: 'puhelin'}\n\t\t\t],\n\t\t\tfields: [\n\t\t\t\t{key: 'nimi'},\n\t\t\t\t{key: 'puhelin'},\n\t\t\t\t{key: 'lyhenne'},\n\t\t\t\t{key: 'email', label: 'sähköposti'},\n\t\t\t\t{key: 'osoite'},\n\t\t\t\t{key: 'huomio'},\n\t\t\t\t{key: 'lomake', label: 'tilauslomakkeen URL'},\n\t\t\t\t{key: 'kotisivut', label: 'kotisivujen URL'}\n\t\t\t],\n\t\t\trequest_fields: [\n\t\t\t\t{key: '_id', label: 'tunniste'},\n\t\t\t\t{key: 'tiedot'},\n\t\t\t\t{key: 'status'},\n\t\t\t\t{key: 'tilaaja', label: 'asiakas'},\n\t\t\t\t{key: 'erapaiva', label: 'eräpäivä'}\n\t\t\t]\n\t\t}\n\t},\n\n\twatch: {\n\t\t$route(to, from) {\n\t\t\tif(to.path.includes('/kirjastot')) {\n\t\t\t\tif(this.$route.params.id) {\n\t\t\t\t\tthis.loadData()\n\t\t\t\t\t// if we hit back button *while in* library view, then we reset current library\n\t\t\t\t} else if(from.path.includes('/kirjastot')) {\n\t\t\t\t\tthis.current = null\n\t\t\t\t\t// if we came from somewhere else with current set, then re-route so that URL matches current id\n\t\t\t\t} else {\n\t\t\t\t\tif(this.current) this.$router.replace({path:'/kirjastot/' + this.current._id})\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tmethods: {\n\n\t\tgetLink(value) {\n\t\t\tif(value) {\n\t\t\t\tif(value.includes('http')) return value\n\t\t\t\telse return 'http://' + value\n\t\t\t}\n\t\t},\n\n\t\tsaveForm() {\n\t\t\tconsole.log('saveform')\n\t\t\tif(this.mode == 'add_new') {\n\t\t\t\tif(!this.new_obj.nimi || this.new_obj.nimi == '') {alert('Nimi täytyy antaa'); return}\n\t\t\t\tfetch(this.$G.api_url + \"/api/kirjastot\", {method:'POST', body: JSON.stringify(this.new_obj)})\n\t\t\t\t.then(response => { return response.json()})\n\t\t\t\t.then(json => {\n\t\t\t\t\tthis.$router.push(\"/kirjastot/\" + json._id)\n\t\t\t\t})\n\t\t\t\t.catch(data => {console.log('error' + data)})\n\t\t\t} else if(this.mode == 'edit') {\n\t\t\t\tdelete this.current._id\n\t\t\t\tfetch(this.$G.api_url + \"/api/kirjastot/\" + this.$route.params.id, {method:'PUT', body: JSON.stringify(this.current)})\n\t\t\t\t.then(response => { return response.json()})\n\t\t\t\t.then(json => {\n\t\t\t\t\tthis.loadData()\n\t\t\t\t})\n\t\t\t\t.catch(data => {console.log('error' + data)})\n\t\t\t}\n\t\t},\n\n\t\teditForm() {\n\t\t\tconsole.log(this.edit)\n\t\t\tthis.edit = !this.edit\n\t\t},\n\n\t\tloadData() {\n\t\t\tif(this.$route.params.id) {\n\t\t\t\tthis.mode = ''\n\t\t\t\tthis.error = null\n\t\t\t\tthis.ready = false\n\t\t\t\tthis.loading = true\n\t\t\t\tthis.current = null\n\t\t\t\tthis.archived = []\n\t\t\t\tfetch(this.$G.api_url + \"/api/kirjastot/\" + this.$route.params.id)\n\t\t\t\t.then(response => { return response.json()})\n\t\t\t\t.then(json => {\n\t\t\t\t\tthis.current = json\n\t\t\t\t\tthis.loadRelated()\n\t\t\t\t})\n\t\t\t\t.catch(data => {\n\t\t\t\t\tthis.error = data\n\t\t\t\t\tconsole.log('error' + data)\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\n\t\tloadRelated() {\n\t\t\tfetch(this.$G.api_url + \"/api/kirjastot/\" + this.$route.params.id + \"/loans\")\n\t\t\t.then(response => { return response.json()})\n\t\t\t.then(json => {\n\t\t\t\tthis.requests = json\n\t\t\t\tthis.ready = true\n\t\t\t\tthis.loading = false\n\t\t\t})\n\t\t\t.catch(data => {console.log('error' + data)})\n\t\t},\n\n\t\tasync loadArchive() {\n\t\t\tvar result = await fetch(this.$G.api_url + \"/api/kirjastot/\" + this.$route.params.id + \"/loans?status=arkistoitu\")\n\t\t\t\tthis.archived = await result.json()\n\t\t},\n\n\t\tasync search() {\n\t\t\tthis.current = null\n\t\t\tthis.error = null\n\t\t\tthis.loading = true\n\t\t\tvar query = ''\n\t\t\tif(this.search_term !== '') {\n\t\t\t\tif(!this.search_term.includes('*')) this.search_term = this.search_term + '*'\n\t\t\t\tquery = 'nimi=' + this.search_term\n\n\t\t\t\tvar result1 = await fetch(this.$G.api_url + \"/api/kirjastot?\" + query)\n\t\t\t\tthis.search_result = await result1.json()\n\t\t\t\tthis.loading = false\n\t\t\t} else if(this.search_lyhenne !== '') {\n\t\t\t\tquery = 'lyhenne=' + this.search_lyhenne\n\t\t\t\tvar result = await fetch(this.$G.api_url + \"/api/kirjastot?\" + query)\n\t\t\t\tthis.search_result = await result.json()\n\t\t\t\tthis.loading = false\n\t\t\t}\n\t\t}\n\t},\n\n\tmounted() {\n\t\tthis.loadData()\n\t}\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WELibrary.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WELibrary.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WELibrary.vue?vue&type=template&id=b36de13a&\"\nimport script from \"./WELibrary.vue?vue&type=script&lang=js&\"\nexport * from \"./WELibrary.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('b-container',[(_vm.ready)?_c('div',[_c('b-card',{attrs:{\"header\":\"kaukolainapyyntö\"},scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('b-nav',{staticClass:\"float-right\"},[_c('b-nav-item-dropdown',{attrs:{\"id\":\"my-nav-dropdown\",\"text\":\"toiminnot\",\"toggle-class\":\"nav-link-custom\",\"right\":\"\"}},[(_vm.request.status == 'lainassa')?_c('b-dropdown-item',{staticClass:\"float-right\",on:{\"click\":function($event){return _vm.setReturned()}}},[_c('b',[_vm._v(\"merkitse palautetuksi ja arkistoi\")])]):_vm._e(),(_vm.request.tilaus_saatu && _vm.request.tilaus_saatu.status == 'lainassa')?_c('b-dropdown-item',{on:{\"click\":function($event){return _vm.openKarhuRequest()}}},[_vm._v(\"lähetä karhuviesti\")]):_vm._e(),(_vm.request.status == 'kasittelyssa' || _vm.request.status == 'tilattu' || _vm.request.status == 'uusi')?_c('b-dropdown-item',{on:{\"click\":function($event){_vm.show = !_vm.show}}},[_c('b',[_vm._v(\"tee uusi tilaus\")])]):_vm._e(),_c('b-dropdown-divider'),((_vm.request.status == 'kasittelyssa' || _vm.request.status == 'tilattu') && _vm.request.teos_on == 'artikkeli')?_c('b-dropdown-item',{on:{\"click\":function($event){return _vm.convertToBook()}}},[_vm._v(\"muuta kirjapyynnöksi\")]):_vm._e(),(_vm.request.status === 'peruttu' && !_vm.request.tilaus_saatu)?_c('b-dropdown-item',{on:{\"click\":function($event){_vm.show_modal_cancel_archive = true}}},[_vm._v(\"palauta käsittelyyn\")]):_vm._e(),(_vm.request.status != 'peruttu' && !_vm.request.tilaus_saatu)?_c('b-dropdown-item',{on:{\"click\":function($event){return _vm.openCancelRequest()}}},[_vm._v(\"peruuta pyyntö\")]):_vm._e()],1)],1),_c('h3',[_vm._v(_vm._s(_vm.request.teos_on)+\"pyyntö: \"),_c('b',[_vm._v(_vm._s(_vm.request._id))]),_vm._v(\" (\"),_c('span',{staticClass:\"text-info\"},[_vm._v(_vm._s(_vm.$G.getStatus(_vm.request.status)))]),_vm._v(\")\")])]},proxy:true}],null,false,2560333342)},[_c('b-card-body',[_c('b-card-title',[_vm._v(_vm._s(_vm.request.teoksen_tiedot)+\" \"),(_vm.request.status != 'arkistoitu')?_c('b-icon',{staticClass:\"float-right cursor\",attrs:{\"icon\":\"pen\",\"variant\":\"primary\",\"id\":\"edit-note\"},on:{\"click\":function($event){_vm.show_modal_title = true}}}):_vm._e()],1),_c('table',{staticClass:\"table\"},[_c('tbody',[(_vm.request.tilaaja)?_c('tr',[_c('td',{staticStyle:{\"width\":\"200px\"}},[_vm._v(\"asiakas\")]),_c('td',[_c('b',[_c('b-link',{attrs:{\"to\":'/asiakkaat/' + _vm.request.tilaaja._id}},[_vm._v(_vm._s(_vm.request.tilaaja.etunimi)+\" \"+_vm._s(_vm.request.tilaaja.sukunimi)+\" \")])],1),(!_vm.request.tilaaja.sukunimi || _vm.request.tilaaja.sukunimi == '')?_c('b-link',{attrs:{\"to\":'/asiakkaat/' + _vm.request.tilaaja._id}},[_vm._v(\"nimi puuttuu \")]):_vm._e(),(_vm.isExternal())?_c('div',[_c('p',{staticClass:\"alert alert-warning\"},[_vm._v(\"Kaukolainapyyntö on tehty kaukolainahenkilökunnan tunnuksilla, joten asiakas täytyy liittää pyyntöön käsin (ja mahdollisesti lisätä sähköposti) tai luoda uusi asiakas.\")]),_c('p',[_c('b',[_vm._v(_vm._s(_vm.request.sukunimi)+\", \"+_vm._s(_vm.request.etunimi))])]),_c('p',[_c('b-input',{nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.searchClients()}},model:{value:(_vm.client_query),callback:function ($$v) {_vm.client_query=$$v},expression:\"client_query\"}}),_c('b-button',{on:{\"click\":function($event){return _vm.searchClients()}}},[_vm._v(\"hae\")])],1),(_vm.clients_result && _vm.clients_result.length)?[_c('b-table',{attrs:{\"small\":\"\",\"striped\":\"\",\"hover\":\"\",\"items\":_vm.clients_result,\"fields\":_vm.client_fields},scopedSlots:_vm._u([{key:\"cell(sahkoposti)\",fn:function(data){return [_vm._v(\" \"+_vm._s(data.value.join(', '))+\" \")]}},{key:\"cell(valitse)\",fn:function(data){return [_c('b-button',{attrs:{\"title\":\"liitä asiakas ja anna tarvittaessa toinen sähköposti\",\"variant\":\"primary\"},on:{\"click\":function($event){return _vm.openJoinClient(data.item)}}},[_vm._v(\"liitä\")])]}}],null,false,1859691286)})]:_c('div',[_vm._v(\"ei tuloksia\")]),_c('b-button',{staticClass:\"float-right\",staticStyle:{\"margin-top\":\"40px\"},attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){_vm.show_modal_external = !_vm.show_modal_external}}},[_vm._v(\"Luo uusi asiakas\")])],2):_vm._e()],1),_c('td')]):_c('tr',[_c('td',[_vm._v(\"asiakas\")]),_c('td',[(_vm.isExternal())?_c('div',[_c('p',[_c('b',[_vm._v(_vm._s(_vm.request.sukunimi)+\", \"+_vm._s(_vm.request.etunimi))])]),_c('p',{staticClass:\"alert alert-warning\"},[_vm._v(\"Kaukolainapyyntö on tehty kaukolainahenkilökunnan tunnuksilla, joten asiakas täytyy liittää pyyntöön käsin (ja mahdollisesti lisätä sähköposti) tai luoda uusi asiakas.\")]),_c('p',[_c('b-input',{nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.searchClients()}},model:{value:(_vm.client_query),callback:function ($$v) {_vm.client_query=$$v},expression:\"client_query\"}}),_c('b-button',{on:{\"click\":function($event){return _vm.searchClients()}}},[_vm._v(\"hae\")])],1),(_vm.clients_result && _vm.clients_result.length)?[_c('b-table',{attrs:{\"small\":\"\",\"striped\":\"\",\"hover\":\"\",\"items\":_vm.clients_result,\"fields\":_vm.client_fields},scopedSlots:_vm._u([{key:\"cell(sahkoposti)\",fn:function(data){return [_vm._v(\" \"+_vm._s(data.value.join(', '))+\" \")]}},{key:\"cell(valitse)\",fn:function(data){return [_c('b-button',{attrs:{\"title\":\"liitä asiakas ja anna tarvittaessa toinen sähköposti\",\"variant\":\"primary\"},on:{\"click\":function($event){return _vm.openJoinClient(data.item)}}},[_vm._v(\"liitä\")])]}}],null,false,1859691286)})]:_c('div',[_vm._v(\"ei tuloksia\")]),_c('b-button',{staticClass:\"float-right\",staticStyle:{\"margin-top\":\"40px\"},attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){_vm.show_modal_external = !_vm.show_modal_external}}},[_vm._v(\"Luo uusi asiakas\")])],2):_vm._e()]),_c('td')]),(_vm.request.teos_on == 'artikkeli')?[_c('tr',[_c('td',{staticStyle:{\"min-width\":\"200px\"}},[_vm._v(\"mistä löysit?\")]),_c('td',[_c('b',[_vm._v(_vm._s(_vm.request.mista_loysit_julkaisun_tiedot))])]),_c('td')])]:_vm._e(),_c('tr',[_c('td',[_vm._v(\" maksaja \")]),_c('td',[(_vm.request.hintakatto)?_c('b-badge',{staticClass:\"float-right alert alert-info\"},[_vm._v(\"hintakatto: \"+_vm._s(_vm.request.hintakatto))]):_vm._e(),(!_vm.request.maksaja_varmistettu && _vm.request.maksaja != 'asiakas')?_c('div',{staticClass:\"alert alert-warning\"},[_vm._v(\"maksajaa ei ole liitetty mihinkään organisaatioon\")]):_vm._e(),(_vm.request.maksaja == 'asiakas')?_c('div',[_c('b',[_vm._v(\"asiakas itse\")])]):(!_vm.request.maksaja_varmistettu)?_c('div',[(!_vm.request.maksaja_varmistettu)?_c('b',[_vm._v(\" \"+_vm._s(_vm.request.maksaja)+\": \"+_vm._s(_vm.request.laitos)+\" \"+_vm._s(_vm.request.projekti))]):_vm._e()]):_c('div',[_c('span',{attrs:{\"title\":\"lomakkeelta tullut maksajatieto\"}},[_vm._v(_vm._s(_vm.request.laitos)+\": \")]),_c('b-link',{attrs:{\"title\":\"linkitetty maksajatieto\",\"to\":'/organisaatiot/' + _vm.request.maksaja_varmistettu._id}},[_vm._v(_vm._s(_vm.request.maksaja_varmistettu.nimi))])],1),(_vm.request.maksaja_varmistettu)?_c('div',[_c('table',{staticClass:\"table table-striped\"},[_c('tbody',[(_vm.request.projekti)?_c('tr',[_c('td',[_vm._v(\"projekti:\")]),_c('td',[_c('b',[_vm._v(\" \"+_vm._s(_vm.request.projekti))])])]):_vm._e(),(_vm.request.kustannuspaikka)?_c('tr',[_c('td',[_vm._v(\"kustannuspaikka:\")]),_c('td',[_c('b',[_vm._v(\" \"+_vm._s(_vm.request.kustannuspaikka))])])]):_vm._e()])]),(_vm.request.maksaja_info && _vm.request.maksaja_varmistettu)?_c('div',{staticClass:\"alert alert-info\"},[_vm._v(_vm._s(_vm.request.maksaja_info))]):_vm._e()]):_vm._e()],1),_c('td',{attrs:{\"title\":\"muokkaa maksajatietoja\"}},[(_vm.request.status != 'arkistoitu')?_c('b-icon',{staticClass:\"float-right cursor\",attrs:{\"icon\":\"pen\",\"variant\":\"primary\",\"id\":\"edit-note\"},on:{\"click\":function($event){_vm.show_modal_payer = true}}}):_vm._e()],1)]),_c('tr',[_c('td',{staticStyle:{\"min-width\":\"200px\"}},[_vm._v(\"huomautuksia \"),_c('br'),_vm._v(\"(sisäinen)\")]),_c('td',[(_vm.request.huomautuksia != '')?_c('div',{staticClass:\"alert alert-info\",domProps:{\"innerHTML\":_vm._s(_vm.$G.renderBreaks(_vm.request.huomautuksia,'\\n'))}}):_vm._e()]),_c('td',{attrs:{\"title\":\"muokkaa huomautuksia\"}},[_c('b-icon',{staticClass:\"float-right cursor\",attrs:{\"icon\":\"pen\",\"variant\":\"primary\",\"id\":\"edit-note\"},on:{\"click\":function($event){_vm.show_modal_note = !_vm.show_modal_note}}})],1)])],2)]),(_vm.request.tarvitaan_viimeistaan)?_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"tarvitaan viimeistään: \"+_vm._s(_vm.request.tarvitaan_viimeistaan))]):_vm._e(),(_vm.request.o_id)?_c('div',{staticClass:\"alert alert-danger\"},[_vm._v(\"Vanha laina Kakesta!\")]):_vm._e(),(_vm.request.peruutuksen_syy)?_c('div',[_vm._v(\"peruutuksen syy: \"),_c('b',{staticClass:\"text-danger\"},[_vm._v(_vm._s(_vm.request.peruutuksen_syy)+\" \")])]):_vm._e(),(_vm.request.o_retudate_has_value == 'yes')?_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"Tämä lienee palautettu \"+_vm._s(_vm.request.pvm_palautettu)+\"?\")]):_vm._e(),(_vm.request.karhut && _vm.request.karhut.length)?_c('div',_vm._l((_vm.request.karhut),function(karhu){return _c('div',{key:karhu,staticClass:\"alert alert-danger\"},[_vm._v(\" karhuttu: \"+_vm._s(karhu)+\" \")])}),0):_vm._e()],1)],1),_c('br'),((_vm.request.status == 'lainassa' || _vm.request.status == 'arkistoitu') && _vm.request.tilaus_saatu)?_c('b-card',{attrs:{\"footer\":'palautettu: ' + _vm.formatDate(_vm.request.tilaus_saatu.pvm_palautettu,'reverse', '.'),\"header-class\":\"dim\",\"header-text-variant\":\"white\"},scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('h6',{staticClass:\"mb-0\"},[_c('b',[_vm._v(\"kaukolaina\")]),_vm._v(\" (saapunut: \"+_vm._s(_vm.formatDate(_vm.request.tilaus_saatu.pvm_saapunut, 'reverse', '.'))+\")\")])]},proxy:true}],null,false,3341928750)},[_c('table',{staticClass:\"table\"},[_c('tr',[_c('td',[_vm._v(\"kirjastosta\")]),_c('td',[_c('b-link',{attrs:{\"text-variant\":\"white\",\"to\":'/kirjastot/' + _vm.request.tilaus_saatu.kirjasto_id}},[_vm._v(\" \"+_vm._s(_vm.request.tilaus_saatu.kirjaston_nimi))])],1),_c('td')]),(_vm.request.teos_on == 'kirja')?_c('tr',[_c('td',{staticStyle:{\"width\":\"200px\"}},[_vm._v(\"eräpäivä\")]),_c('td',[_c('DueDate',{attrs:{\"item\":_vm.request}})],1),_c('td',{attrs:{\"title\":\"muokkaa eräpäivää\"},on:{\"click\":function($event){_vm.show_modal_loan_date = true}}},[_c('b-icon',{staticClass:\"float-right cursor\",attrs:{\"icon\":\"pen\",\"variant\":\"primary\",\"id\":\"edit-note\"}})],1)]):_vm._e(),_c('tr',[_c('td',{staticStyle:{\"width\":\"200px\"}},[_vm._v(\"maksu\")]),_c('td',[_vm._v(_vm._s(_vm.request.tilaus_saatu.maksu))]),_c('td')]),_c('tr',[_c('td',{staticStyle:{\"width\":\"200px\"}},[_vm._v(\"tilausviesti\")]),_c('td',[_c('div',{staticClass:\"cursor\",attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.$root.$emit('bv::toggle::collapse', _vm.request.tilaus_saatu._id)}}},[_c('b-icon',{attrs:{\"icon\":\"caret-right\"}}),_vm._v(\"tilausviesti\")],1),_c('b-collapse',{attrs:{\"id\":_vm.request.tilaus_saatu._id,\"accordion\":\"my-accordion\",\"role\":\"tabpanel\"}},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.$G.renderBreaks(_vm.request.tilaus_saatu.viesti,'\\n'))}})])],1),_c('td')])])]):_vm._e(),_c('br'),(_vm.orders.length)?_c('div',[_c('b-table',{staticClass:\"table table-striped\",attrs:{\"items\":_vm.orders,\"fields\":_vm.order_fields},scopedSlots:_vm._u([{key:\"cell(kirjaston_nimi)\",fn:function(data){return [_c('div',{staticStyle:{\"min-width\":\"350px\"}},[_c('b-link',{attrs:{\"to\":'/kirjastot/' + data.item.kirjasto_id}},[_vm._v(\" \"+_vm._s(data.value))]),_c('div',{staticClass:\"cursor\",attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.$root.$emit('bv::toggle::collapse', data.item._id)}}},[_c('b-icon',{attrs:{\"icon\":\"caret-right\"}}),_vm._v(\"tilausviesti\")],1),_c('b-collapse',{attrs:{\"id\":data.item._id,\"accordion\":\"my-accordion\",\"role\":\"tabpanel\"}},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.$G.renderBreaks(data.item.viesti,'\\n'))}})])],1)]}},{key:\"cell(pvm)\",fn:function(data){return [(data.item.recdate)?_c('div',[_vm._v(_vm._s(data.item.recdate))]):_c('div',[_vm._v(_vm._s(_vm.$G.getDateFromUUID(data.item._id)))])]}},{key:\"cell(pvm_saapunut)\",fn:function(data){return [_c('div',[_vm._v(_vm._s(_vm.formatDate(data.value)))])]}},{key:\"cell(pvm_palautettu)\",fn:function(data){return [_c('b',{staticClass:\"text text-info\"},[_vm._v(_vm._s(_vm.formatDate(data.value)))])]}},{key:\"cell(status)\",fn:function(data){return [_c('b',{staticClass:\"text text-info\"},[_vm._v(_vm._s(data.value.replace('_', ' ')))])]}},{key:\"cell(toiminto)\",fn:function(data){return [(_vm.request.status !== 'arkistoitu')?_c('b-nav',{staticClass:\"float-right\"},[(data.item.status !== 'palautettu' && data.item.status !== 'ei_saatavilla')?_c('b-nav-item-dropdown',{attrs:{\"id\":\"tilaus-nav-dropdown\",\"text\":\"toiminnot\",\"toggle-class\":\"nav-link-custom\",\"right\":\"\"}},[_c('b-dropdown-divider'),((_vm.request.status == 'kasittelyssa' || _vm.request.status == 'tilattu') && _vm.request.teos_on == 'kirja')?_c('b-dropdown-item',{staticClass:\"float-right\",attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){return _vm.openArrived(data.item)}}},[_vm._v(\"merkitse saapuneeksi ja lainaa\")]):_vm._e(),((_vm.request.status == 'kasittelyssa' || _vm.request.status == 'tilattu') && _vm.request.teos_on == 'artikkeli')?_c('b-dropdown-item',{staticClass:\"float-right\",attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){return _vm.openArrived(data.item)}}},[_vm._v(\"merkitse saapuneeksi ja arkistoi\")]):_vm._e(),(!data.item.status || data.item.status == 'tilattu')?_c('b-dropdown-item',{on:{\"click\":function($event){return _vm.setNotAvailable(data.item._id)}}},[_vm._v(\"ei saatavilla\")]):_vm._e()],1):_vm._e()],1):_vm._e()]}}],null,false,1422393677)})],1):_vm._e(),(_vm.error)?_c('div',{staticClass:\"alert alert-danger\"},[_vm._v(_vm._s(_vm.error))]):_vm._e(),_c('b-modal',{attrs:{\"title\":\"muuta eräpäivää\",\"cancel-title\":\"peru\",\"ok-title\":\"tallenna\",\"header-bg-variant\":_vm.primaryBG,\"header-text-variant\":_vm.primaryText},on:{\"ok\":_vm.setLoanDate},model:{value:(_vm.show_modal_loan_date),callback:function ($$v) {_vm.show_modal_loan_date=$$v},expression:\"show_modal_loan_date\"}},[(_vm.request.tilaus_saatu)?_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"nykyinen eräpäivä: \"+_vm._s(_vm.formatDate(_vm.request.tilaus_saatu.pvm_erapaiva, 'reverse','.')))]):_vm._e(),_vm._v(\" uusi eräpäivä: \"),_c('b-input',{model:{value:(_vm.new_loan_date),callback:function ($$v) {_vm.new_loan_date=$$v},expression:\"new_loan_date\"}}),_c('b-form-checkbox',{attrs:{\"id\":\"checkbox-ei-peruutusviestia\",\"name\":\"checkbox-ei-peruutusviestia\",\"value\":\"no\",\"unchecked-value\":\"yes\"},on:{\"change\":function($event){return _vm.setDueDate()}},model:{value:(_vm.tilaus_uusittavissa),callback:function ($$v) {_vm.tilaus_uusittavissa=$$v},expression:\"tilaus_uusittavissa\"}},[_vm._v(\" ei voi enää uusia \")]),(_vm.tilaus_uusittavissa == 'no')?[_vm._v(\"lisätieto: \"),_c('b-input',{model:{value:(_vm.tilaus_info),callback:function ($$v) {_vm.tilaus_info=$$v},expression:\"tilaus_info\"}})]:_vm._e()],2),_c('b-modal',{attrs:{\"title\":\"Muokkaa otsikkoa\",\"cancel-title\":\"peru\",\"ok-title\":\"tallenna\",\"header-bg-variant\":_vm.primaryBG,\"header-text-variant\":_vm.primaryText},on:{\"ok\":_vm.updateTitle},model:{value:(_vm.show_modal_title),callback:function ($$v) {_vm.show_modal_title=$$v},expression:\"show_modal_title\"}},[_c('b-form-textarea',{attrs:{\"rows\":\"3\"},model:{value:(_vm.title),callback:function ($$v) {_vm.title=$$v},expression:\"title\"}}),(_vm.sending)?_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"lähetetään...\")]):_vm._e()],1),_c('b-modal',{attrs:{\"title\":\"Lähetä karhuviesti\",\"cancel-title\":\"peru\",\"ok-title\":\"lähetä\",\"header-bg-variant\":_vm.primaryBG,\"header-text-variant\":_vm.primaryText},on:{\"ok\":_vm.sendDueNotice},model:{value:(_vm.show_modal_due_notice),callback:function ($$v) {_vm.show_modal_due_notice=$$v},expression:\"show_modal_due_notice\"}},[_vm._v(\" karhuviesti asiakkaalle: \"),_c('b-form-textarea',{attrs:{\"rows\":\"6\"},model:{value:(_vm.due_notice),callback:function ($$v) {_vm.due_notice=$$v},expression:\"due_notice\"}}),(_vm.sending)?_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"lähetetään...\")]):_vm._e()],1),_c('b-modal',{attrs:{\"title\":\"peruuta kaukolainapyyntö\",\"cancel-title\":\"peru\",\"ok-title\":\"merkitse peruutetuksi\",\"header-bg-variant\":_vm.primaryBG,\"header-text-variant\":_vm.primaryText},on:{\"ok\":function($event){return _vm.setCancelled()}},model:{value:(_vm.show_modal_cancel_request),callback:function ($$v) {_vm.show_modal_cancel_request=$$v},expression:\"show_modal_cancel_request\"}},[(_vm.request.status == 'lainassa')?_c('div',{staticClass:\"alert alert-danger\"},[_vm._v(\"Teos on lainassa! \")]):_vm._e(),(_vm.laheta_peruutusilmoitus === 'yes')?[_vm._v(\" peruutusviesti asiakkaalle: \"),_c('b-form-textarea',{attrs:{\"rows\":\"6\"},model:{value:(_vm.cancel_reason),callback:function ($$v) {_vm.cancel_reason=$$v},expression:\"cancel_reason\"}})]:_vm._e(),_c('b-form-checkbox',{attrs:{\"id\":\"checkbox-ei-peruutusviestia\",\"name\":\"checkbox-ei-peruutusviestia\",\"value\":\"yes\",\"unchecked-value\":\"no\"},model:{value:(_vm.laheta_peruutusilmoitus),callback:function ($$v) {_vm.laheta_peruutusilmoitus=$$v},expression:\"laheta_peruutusilmoitus\"}},[_vm._v(\" lähetä sähköposti-ilmoitus asiakkaalle \")]),(_vm.sending)?_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"lähetetään...\")]):_vm._e()],2),_c('b-modal',{attrs:{\"title\":\"palauta käsittelyyn\",\"cancel-title\":\"peru\",\"ok-title\":\"palauta käsittelyyn\",\"header-bg-variant\":_vm.primaryBG,\"header-text-variant\":_vm.primaryText},on:{\"ok\":function($event){return _vm.setNonArchived()}},model:{value:(_vm.show_modal_cancel_archive),callback:function ($$v) {_vm.show_modal_cancel_archive=$$v},expression:\"show_modal_cancel_archive\"}},[(_vm.sending)?_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"lähetetään...\")]):_vm._e()]),_c('b-modal',{attrs:{\"size\":\"lg\",\"title\":\"merkitse saapuneeksi\",\"cancel-title\":\"peru\",\"ok-title\":\"merkitse saapuneeksi\",\"header-bg-variant\":_vm.primaryBG,\"header-text-variant\":_vm.primaryText},on:{\"ok\":_vm.setArrived},model:{value:(_vm.show_modal_arrived),callback:function ($$v) {_vm.show_modal_arrived=$$v},expression:\"show_modal_arrived\"}},[(_vm.arrived_order)?_c('b-form-group',{staticStyle:{\"max-width\":\"450px\"}},[(_vm.request.teos_on == 'kirja')?[_c('label',[_vm._v(\"eräpäivä (pp.kk.vvvv)\")]),_c('b-input',{model:{value:(_vm.arrived_order.erapaiva),callback:function ($$v) {_vm.$set(_vm.arrived_order, \"erapaiva\", $$v)},expression:\"arrived_order.erapaiva\"}})]:_vm._e(),_c('label',[_vm._v(\"maksu\")]),_c('b-input',{model:{value:(_vm.arrived_order.maksu),callback:function ($$v) {_vm.$set(_vm.arrived_order, \"maksu\", $$v)},expression:\"arrived_order.maksu\"}}),_c('b-form-checkbox',{attrs:{\"id\":\"checkbox-2\",\"name\":\"checkbox-2\",\"value\":\"yes\",\"unchecked-value\":\"no\"},model:{value:(_vm.laheta_saapumisilmoitus),callback:function ($$v) {_vm.laheta_saapumisilmoitus=$$v},expression:\"laheta_saapumisilmoitus\"}},[_vm._v(\" lähetä saapumisilmoitus \")])],2):_vm._e(),(_vm.sending)?_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"lähetetään...\")]):_vm._e(),(_vm.error)?_c('div',{staticClass:\"alert alert-danger\"},[_vm._v(_vm._s(_vm.error))]):_vm._e()],1),_c('b-modal',{attrs:{\"size\":\"lg\",\"title\":\"huomautuksia\",\"header-bg-variant\":_vm.primaryBG,\"header-text-variant\":_vm.primaryText},on:{\"ok\":_vm.setNote,\"cancel\":function($event){_vm.note = _vm.request.huomautuksia}},model:{value:(_vm.show_modal_note),callback:function ($$v) {_vm.show_modal_note=$$v},expression:\"show_modal_note\"}},[_c('b-form-textarea',{attrs:{\"id\":\"textarea\",\"placeholder\":\"\",\"rows\":\"10\"},model:{value:(_vm.note),callback:function ($$v) {_vm.note=$$v},expression:\"note\"}}),(_vm.sending)?_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"lähetetään...\")]):_vm._e()],1),_c('b-modal',{attrs:{\"size\":\"lg\",\"title\":\"tilauslomake\",\"header-bg-variant\":_vm.primaryBG,\"header-text-variant\":_vm.primaryText},scopedSlots:_vm._u([{key:\"modal-footer\",fn:function(){return [_c('div')]},proxy:true}],null,false,2017372688),model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_c('WEOrderForm',{attrs:{\"request\":_vm.request},on:{\"exit\":function($event){return _vm.loadData()}}})],1),_c('b-modal',{attrs:{\"size\":\"lg\",\"title\":\"maksaja\",\"header-bg-variant\":_vm.primaryBG,\"header-text-variant\":_vm.primaryText},on:{\"ok\":_vm.setPayer,\"cancel\":_vm.cancelPayer},model:{value:(_vm.show_modal_payer),callback:function ($$v) {_vm.show_modal_payer=$$v},expression:\"show_modal_payer\"}},[_c('b-form-checkbox',{attrs:{\"id\":\"checkbox-1\",\"name\":\"checkbox-1\",\"value\":\"yes\",\"unchecked-value\":\"no\"},model:{value:(_vm.payer_is_client),callback:function ($$v) {_vm.payer_is_client=$$v},expression:\"payer_is_client\"}},[_vm._v(\" asiakas maksaa itse \")]),(_vm.payer_is_client != 'yes')?_c('b-form',[_c('b-form-group',{staticStyle:{\"margin-top\":\"30px\"}},[_c('label',[_vm._v(\"valitse maksaja\")]),_c('b-select',{attrs:{\"options\":_vm.organisations,\"value-field\":\"_id\",\"text-field\":\"nimi\"},model:{value:(_vm.payer_selected),callback:function ($$v) {_vm.payer_selected=$$v},expression:\"payer_selected\"}}),(_vm.payer_selected)?_c('b-form-textarea',{attrs:{\"id\":\"textarea\",\"placeholder\":\"Lisätietoa maksuun liittyen...\",\"rows\":\"3\",\"max-rows\":\"6\"},model:{value:(_vm.payer_info),callback:function ($$v) {_vm.payer_info=$$v},expression:\"payer_info\"}}):_vm._e()],1)],1):_vm._e(),(_vm.sending)?_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"lähetetään...\")]):_vm._e()],1),_c('b-modal',{attrs:{\"title\":\"ulkopuolinen asiakas\"},on:{\"ok\":_vm.saveExternalClient},model:{value:(_vm.show_modal_external),callback:function ($$v) {_vm.show_modal_external=$$v},expression:\"show_modal_external\"}},[_c('b-form-group',{staticStyle:{\"margin-top\":\"30px\"}},[_c('label',[_vm._v(\"sukunimi\")]),_c('b-input',{model:{value:(_vm.external_client.sukunimi),callback:function ($$v) {_vm.$set(_vm.external_client, \"sukunimi\", $$v)},expression:\"external_client.sukunimi\"}}),_c('label',[_vm._v(\"etunnimi\")]),_c('b-input',{model:{value:(_vm.external_client.etunimi),callback:function ($$v) {_vm.$set(_vm.external_client, \"etunimi\", $$v)},expression:\"external_client.etunimi\"}}),_c('label',[_vm._v(\"sähköposti (PAKOLLINEN)\")]),_c('b-input',{model:{value:(_vm.external_client.sahkoposti),callback:function ($$v) {_vm.$set(_vm.external_client, \"sahkoposti\", $$v)},expression:\"external_client.sahkoposti\"}}),_c('label',[_vm._v(\"kortin numero\")]),_c('b-input',{model:{value:(_vm.external_client.kirjastokortin_numero),callback:function ($$v) {_vm.$set(_vm.external_client, \"kirjastokortin_numero\", $$v)},expression:\"external_client.kirjastokortin_numero\"}})],1),(_vm.sending)?_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"lähetetään...\")]):_vm._e()],1),_c('b-modal',{attrs:{\"title\":\"liitä asiakas pyyntöön\",\"cancel-title\":\"peru\",\"ok-title\":\"liitä\"},on:{\"ok\":_vm.saveJoinClient},model:{value:(_vm.show_modal_join_client),callback:function ($$v) {_vm.show_modal_join_client=$$v},expression:\"show_modal_join_client\"}},[(_vm.join_client)?_c('b-form-group',{staticStyle:{\"margin-top\":\"30px\"}},[_c('label',[_vm._v(\"sukunimi\")]),_c('p',[_c('b',[_vm._v(_vm._s(_vm.join_client.sukunimi))])]),_c('label',[_vm._v(\"etunnimi\")]),_c('p',[_c('b',[_vm._v(_vm._s(_vm.join_client.etunimi))])]),_c('label',[_vm._v(\"kortin numero\")]),_c('p',[_vm._v(_vm._s(_vm.join_client.kirjastokortin_numero))]),_c('label',[_vm._v(\"sähköposti(t)\")]),_c('p',[_c('b',[_vm._v(_vm._s(_vm.join_client.sahkoposti.join(', ')))])]),_c('label',[_vm._v(\"lisää sähköposti asiakkaalle (valinnainen)\")]),_c('b-input',{model:{value:(_vm.add_sahkoposti),callback:function ($$v) {_vm.add_sahkoposti=$$v},expression:\"add_sahkoposti\"}})],1):_vm._e(),(_vm.sending)?_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"lähetetään...\")]):_vm._e()],1)],1):_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"lataan...\")]),(_vm.ready && (_vm.request.status == 'arkistoitu' || _vm.request.status == 'peruttu'))?_c('img',{staticStyle:{\"position\":\"absolute\",\"top\":\"120px\",\"left\":\"0%\"},attrs:{\"src\":require(\"@/assets/images/arkistoitu_vino.png\")}}):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('b-form-group',[_c('label',[_vm._v(\"valitse kirjasto\")]),_c('b-select',{attrs:{\"id\":\"lib_select\",\"options\":_vm.libraries,\"value-field\":\"_id\",\"text-field\":\"nimi\"},model:{value:(_vm.selected),callback:function ($$v) {_vm.selected=$$v},expression:\"selected\"}}),(_vm.current)?_c('b-container',[_c('h3',[_vm._v(_vm._s(_vm.current.nimi))]),_c('b-card',[_c('table',_vm._l((_vm.fields),function(field){return _c('tr',{key:field.key},[_c('td',{staticStyle:{\"min-width\":\"200px\"}},[_vm._v(_vm._s(field.key))]),(field.key == 'lomake' || field.key == 'kotisivut')?_c('td',[_c('a',{attrs:{\"target\":\"_blank\",\"href\":_vm.current[field.key]}},[_vm._v(_vm._s(_vm.current[field.key]))])]):_c('td',[_c('b',[_vm._v(_vm._s(_vm.current[field.key]))])])])}),0)]),(!_vm.current.lomake)?_c('div',[_c('label',[_vm._v(\"saatepohjat\")]),_c('b-select',{attrs:{\"id\":\"saate_select\",\"options\":_vm.saatteet,\"value-field\":\"_id\",\"text-field\":\"_id\"},model:{value:(_vm.message_id),callback:function ($$v) {_vm.message_id=$$v},expression:\"message_id\"}}),_c('label',[_vm._v(\"saateviesti\")]),_c('b-form-textarea',{attrs:{\"id\":\"textarea\",\"placeholder\":\"valitse saatepohja...\",\"rows\":\"10\"},model:{value:(_vm.message),callback:function ($$v) {_vm.message=$$v},expression:\"message\"}})],1):_vm._e(),(_vm.current.lomake && _vm.current.lomake != '')?_c('div',[_c('div',{staticClass:\"alert alert-info\"},[_c('a',{attrs:{\"target\":\"_blank\",\"href\":_vm.current.lomake}},[_vm._v(\"tilauslomake\")]),_vm._v(\" (aukeaa uuteen ikkunaan)\")]),_c('br')]):_vm._e(),_c('b-button',{staticClass:\"float-right\",staticStyle:{\"margin-top\":\"20px\"},attrs:{\"id\":\"send-order\",\"variant\":\"primary\"},on:{\"click\":function($event){return _vm.sendOrder()}}},[_vm._v(\"lähetä tilaus\")]),(_vm.sending)?_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"Lähetetään...\")]):_vm._e(),_c('b-form-checkbox',{attrs:{\"id\":\"checkbox-2\",\"name\":\"checkbox-2\",\"value\":\"no\",\"unchecked-value\":\"yes\"},model:{value:(_vm.send_email),callback:function ($$v) {_vm.send_email=$$v},expression:\"send_email\"}},[_vm._v(\" älä lähetä tilausta sähköpostitse \")])],1):_vm._e()],1),(_vm.error)?_c('div',{staticClass:\"alert alert-danger\"},[_vm._v(_vm._s(_vm.error))]):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template >\n\t<div>\n\n\t\t<b-form-group>\n\t\t\t<label>valitse kirjasto</label>\n\t\t\t<b-select id=\"lib_select\"\n\t\t\t\tv-model=\"selected\"\n\t\t\t\t:options=\"libraries\"\n\t\t\t\tvalue-field=\"_id\"\n\t\t\t\ttext-field=\"nimi\">\n\t\t\t</b-select>\n\n\n\t\t\t<b-container v-if=\"current\">\n\n\t\t\t\t<h3>{{current.nimi}}</h3>\n\t\t\t\t<b-card>\n\t\t\t\t\t<table>\n\t\t\t\t\t\t<tr v-for=\"field in fields\" :key=\"field.key\">\n\n\t\t\t\t\t\t\t<td style=\"min-width:200px\">{{field.key}}</td>\n\t\t\t\t\t\t\t<td v-if=\"field.key == 'lomake' || field.key == 'kotisivut'\"><a target=\"_blank\" :href=\"current[field.key]\">{{current[field.key]}}</a></td>\n\t\t\t\t\t\t\t<td v-else><b>{{current[field.key]}}</b></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</table>\n\n\t\t\t\t</b-card>\n\n\t\t\t\t<div v-if=\"!current.lomake\">\n\n\t\t\t\t\t<label>saatepohjat</label>\n\t\t\t\t\t<b-select id=\"saate_select\"\n\t\t\t\t\t\t:options=\"saatteet\"\n\t\t\t\t\t\tvalue-field=\"_id\"\n\t\t\t\t\t\ttext-field=\"_id\"\n\t\t\t\t\t\tv-model=\"message_id\">\n\t\t\t\t\t</b-select>\n\n\t\t\t\t\t<label>saateviesti</label>\n\t\t\t\t\t<b-form-textarea\n\t\t\t\t\t  id=\"textarea\"\n\t\t\t\t\t  v-model=\"message\"\n\t\t\t\t\t  placeholder=\"valitse saatepohja...\"\n\t\t\t\t\t  rows=\"10\"\n\t\t\t\t\t></b-form-textarea>\n\t\t\t\t</div>\n\n\t\t\t\t<div v-if=\"current.lomake && current.lomake != ''\">\n\t\t\t\t\t<div class=\"alert alert-info\"><a target=\"_blank\" :href=\"current.lomake\">tilauslomake</a> (aukeaa uuteen ikkunaan)</div><br>\n\n\t\t\t\t</div>\n\t\t\t\t<!--\n\t\t\t\t<label>lisätieto (ei lähetetä)</label>\n\t\t\t\t<b-form-textarea v-if=\"current\"\n\t\t\t\t  id=\"textarea\"\n\t\t\t\t  v-model=\"info\"\n\t\t\t\t  placeholder=\"Lisätietoa tilaukseen liittyen...\"\n\t\t\t\t  rows=\"3\"\n\t\t\t\t  max-rows=\"3\"\n\t\t\t\t></b-form-textarea>\n\t\t\t\t-->\n\n\t\t\t\t<b-button id=\"send-order\" variant=\"primary\" @click=\"sendOrder()\" class=\"float-right\" style=\"margin-top:20px\">lähetä tilaus</b-button>\n\t\t\t\t<div v-if=\"sending\" class=\"alert alert-info\">Lähetetään...</div>\n\t\t\t\t<b-form-checkbox\n\t\t\t\t  id=\"checkbox-2\"\n\t\t\t\t  v-model=\"send_email\"\n\t\t\t\t  name=\"checkbox-2\"\n\t\t\t\t  value=\"no\"\n\t\t\t\t  unchecked-value=\"yes\"\n\t\t\t\t>\n\t\t\t\t  älä lähetä tilausta sähköpostitse\n\t\t\t\t</b-form-checkbox>\n\t\t\t</b-container>\n\n\t\t</b-form-group>\n\n\t\t<div class=\"alert alert-danger\" v-if=\"error\">{{error}}</div>\n\n\t</div>\n\n</template>\n\n\n<script>\n\nexport default {\n\tname: 'WEOrderForm',\n\tdata: function() {\n\t\treturn {\n\t\t\tlibraries: [],\n\t\t\tmessage: '',\n\t\t\tmessage_id: null,\n\t\t\tinfo: '',\n\t\t\tselected: null,\n\t\t\tcurrent: null,\n\t\t\terror: null,\n\t\t\tfields: [\n\t\t\t\t{key: 'email', label:'sähköposti'},\n\t\t\t\t{key: 'osoite'},\n\t\t\t\t{key: 'kotisivut'}\n\t\t\t],\n\t\t\tsaatteet: [],\n\t\t\tsend_email: 'yes',\n\t\t\tsending: false\n\t\t}\n\t},\n\n\tprops: ['request'],\n\n\twatch: {\n\t\tselected() {\n\t\t\tthis.getCurrent()\n\t\t},\n\t\tmessage_id() {\n\t\t\tfor(var m of this.saatteet) {\n\t\t\t\tif(m._id == this.message_id) {\n\t\t\t\t\tthis.message = m.saate\n\t\t\t\t\tvar info_en = this.getInfo('en')\n\t\t\t\t\tvar info_fi = this.getInfo('fi')\n\t\t\t\t\tthis.message = this.message.replace('[[ID]]', this.request._id)\n\t\t\t\t\tif(this.request.tarvitaan_viimeistaan && this.request.tarvitaan_viimeistaan != 'undefined')\n\t\t\t\t\t\tthis.message = this.message.replace('[[TARVITAAN_VIIMEISTAAN]]', this.request.tarvitaan_viimeistaan)\n\t\t\t\t\tthis.message = this.message.replace('[[EN]]', info_en)\n\t\t\t\t\tthis.message = this.message.replace('[[FI]]', info_fi)\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t},\n\tmethods: {\n\t\tgetCurrent() {\n\t\t\tfor(var lib of this.libraries) {\n\t\t\t\tif(lib._id == this.selected) {\n\t\t\t\t\tthis.current = lib\n\t\t\t\t\tthis.message = lib.saate\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tgetInfo(lang) {\n\t\t\tvar lang_info = {\n\t\t\t\t'pyynto_id': {'en':'ID', 'fi': 'ID'},\n\t\t\t\t'teoksen_tiedot': {'en':'title', 'fi': 'teos'}\n\t\t\t}\n\n\t\t\treturn lang_info['teoksen_tiedot'][lang] + ': ' + this.request.teoksen_tiedot\n\n\t\t},\n\n\t\tasync sendOrder() {\n\t\t\tif(!this.message) {\n\t\t\t\talert('Saateviesti on pakollinen!')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.sending = true;\n\t\t\tvar order = {\n\t\t\t\t'kirjasto_id' : this.current._id,\n\t\t\t\t'kirjaston_nimi': this.current.nimi,\n\t\t\t\t'viesti': this.message,\n\t\t\t\t'info': this.info,\n\t\t\t\t'message_id': this.message_id,\n\t\t\t\t'send_mail': this.send_email\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tvar response = await fetch(this.$G.api_url + \"/api/pyynnot/\" + this.$route.params.id + \"/tilaukset\", {method:\"POST\", body: JSON.stringify(order)})\n\t\t\t\tvar json = await response.json()\n\t\t\t\tif(!response.ok) throw('fail')\n\t\t\t\telse {\n\t\t\t\t\tthis.sending = false\n\t\t\t\t\tthis.$emit('exit', true)\n\t\t\t\t}\n\t\t\t} catch(e) {\n\t\t\t\tthis.sending = false\n\t\t\t\tif(json && json.error) alert(json.error)\n\t\t\t\telse alert('virhe ' + e)\n\t\t\t}\n\n\t\t},\n\n\t\tloadMessages() {\n\t\t\tfetch(this.$G.api_url + \"/api/saatteet?_id=tilaussaate*\")\n\t\t\t.then(response => { return response.json()})\n\t\t\t.then(json => {\n\t\t\t\tthis.saatteet = json\n\t\t\t\tthis.ready = true\n\t\t\t})\n\t\t\t.catch(data => {console.log('error' + data)})\n\t\t},\n\n\t\tloadData() {\n\t\t\tthis.ready = false\n\t\t\tfetch(this.$G.api_url + \"/api/kirjastot?sort=nimi\")\n\t\t\t.then(response => { return response.json()})\n\t\t\t.then(json => {\n\t\t\t\tthis.libraries = json\n\t\t\t\tthis.loadMessages()\n\t\t\t\tthis.ready = true\n\t\t\t})\n\t\t\t.catch(data => {alert('error' + data)})\n\t\t}\n\t},\n\n\tmounted() {\n\t\tthis.loadData()\n\n\t}\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WEOrderForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WEOrderForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WEOrderForm.vue?vue&type=template&id=2172208f&\"\nimport script from \"./WEOrderForm.vue?vue&type=script&lang=js&\"\nexport * from \"./WEOrderForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<style scoped>\n\t.cursor {\n\t\tcursor: pointer;\n\t}\n\t.card-body {\n\t\t#padding: 0px\n\t}\n\t.card-title {\n\t\tfont-style: italic;\n\t}\n\t.card-header {\n\t\tborder-color: #002957;\n\t\tborder-width: 5px;\n\t\tbackground-color: white;\n\t}\n\t.text-danger {\n\t\tfont-weight: bold;\n\t}\n\t.dim {\n\t\tbackground-color: #f1f1f2;\n\t}\n</style>\n\n<template >\n\t<b-container>\n\t\t<div v-if=\"ready\">\n\n\t\t\t<b-card header=\"kaukolainapyyntö\">\n\t\t\t\t<template #header>\n\t\t\t\t\t<b-nav class=\"float-right\">\n\t  \t\t\t\t    <b-nav-item-dropdown\n\t  \t\t\t\t      id=\"my-nav-dropdown\"\n\t  \t\t\t\t      text=\"toiminnot\"\n\t  \t\t\t\t      toggle-class=\"nav-link-custom\"\n\t  \t\t\t\t      right\n\t  \t\t\t\t    >\n\n\t\t\t\t\t\t<b-dropdown-item v-if=\"request.status == 'lainassa'\" class=\"float-right\"  @click=\"setReturned()\"><b>merkitse palautetuksi ja arkistoi</b></b-dropdown-item>\n\t\t\t\t\t\t  <b-dropdown-item v-if=\"request.tilaus_saatu && request.tilaus_saatu.status == 'lainassa'\" @click=\"openKarhuRequest()\" >lähetä karhuviesti</b-dropdown-item>\n\t  \t\t\t\t      <b-dropdown-item v-if=\"request.status == 'kasittelyssa' || request.status == 'tilattu' || request.status == 'uusi'\" @click=\"show = !show\" ><b>tee uusi tilaus</b></b-dropdown-item>\n\n\t  \t\t\t\t      <b-dropdown-divider></b-dropdown-divider>\n\t  \t\t\t\t      <b-dropdown-item v-if=\"(request.status == 'kasittelyssa' || request.status == 'tilattu') && request.teos_on == 'artikkeli'\" @click=\"convertToBook()\">muuta kirjapyynnöksi</b-dropdown-item>\n\t\t\t\t\t\t  <b-dropdown-item  @click=\"show_modal_cancel_archive = true\" v-if=\"request.status === 'peruttu' && !request.tilaus_saatu\">palauta käsittelyyn</b-dropdown-item >\n\t  \t\t\t\t\t  <b-dropdown-item v-if=\"request.status != 'peruttu' && !request.tilaus_saatu\" @click=\"openCancelRequest()\">peruuta pyyntö</b-dropdown-item>\n\t  \t\t\t\t    </b-nav-item-dropdown>\n\t  \t\t\t\t  </b-nav>\n\t\t\t\t\t<h3 >{{request.teos_on}}pyyntö: <b>{{request._id}}</b> (<span class=\"text-info\">{{$G.getStatus(request.status)}}</span>)</h3>\n\t\t\t\t</template>\n\n\t\t\t\t<b-card-body>\n\t\t\t\t\t<b-card-title>{{request.teoksen_tiedot}} <b-icon v-if=\"request.status != 'arkistoitu'\" icon=\"pen\" variant=\"primary\" id=\"edit-note\" class=\"float-right cursor\" @click=\"show_modal_title = true\"></b-icon></b-card-title>\n\n\t\t\t\t<table class=\"table\">\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<tr v-if=\"request.tilaaja\">\n\t\t\t\t\t\t\t<td style=\"width:200px\">asiakas</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<b><b-link :to=\"'/asiakkaat/' + request.tilaaja._id\">{{request.tilaaja.etunimi}} {{request.tilaaja.sukunimi}} </b-link></b>\n\t\t\t\t\t\t\t\t<b-link v-if=\"!request.tilaaja.sukunimi || request.tilaaja.sukunimi == ''\" :to=\"'/asiakkaat/' + request.tilaaja._id\">nimi puuttuu </b-link>\n\n\t\t\t\t\t\t\t\t<div v-if=\"isExternal()\">\n\t\t\t\t\t\t\t\t\t<p class=\"alert alert-warning\">Kaukolainapyyntö on tehty kaukolainahenkilökunnan tunnuksilla, joten asiakas täytyy liittää pyyntöön käsin (ja mahdollisesti lisätä sähköposti) tai luoda uusi asiakas.</p>\n\t\t\t\t\t\t\t\t\t<p><b>{{request.sukunimi}}, {{request.etunimi}}</b></p>\n\t\t\t\t\t\t\t\t\t<p><b-input @keydown.enter.native=\"searchClients()\" v-model=\"client_query\"></b-input>\n\t\t\t\t\t\t\t\t\t\t<b-button @click=\"searchClients()\">hae</b-button>\n\t\t\t\t\t\t\t\t\t</p>\n\n\t\t\t\t\t\t\t\t\t<template v-if=\"clients_result && clients_result.length\">\n\t\t\t\t\t\t\t\t\t\t<b-table small striped hover :items=\"clients_result\" :fields=\"client_fields\">\n\t\t\t\t\t\t\t\t\t\t\t<template v-slot:cell(sahkoposti)=\"data\">\n\t\t\t\t\t\t\t\t\t\t\t\t{{data.value.join(', ')}}\n\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t\t<template v-slot:cell(valitse)=\"data\">\n\t\t\t\t\t\t\t\t\t\t\t\t<b-button title=\"liitä asiakas ja anna tarvittaessa toinen sähköposti\" variant=\"primary\" @click=\"openJoinClient(data.item)\">liitä</b-button>\n\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t</b-table>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<div v-else>ei tuloksia</div>\n\n\t\t\t\t\t\t\t\t\t<b-button class=\"float-right\" style=\"margin-top:40px\" variant=\"primary\" @click=\"show_modal_external = !show_modal_external\">Luo uusi asiakas</b-button>\n\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\n\t\t\t\t\t\t<tr v-else>\n\t\t\t\t\t\t\t<td>asiakas</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<div v-if=\"isExternal()\">\n\t\t\t\t\t\t\t\t\t<p><b>{{request.sukunimi}}, {{request.etunimi}}</b></p>\n\t\t\t\t\t\t\t\t\t<p class=\"alert alert-warning\">Kaukolainapyyntö on tehty kaukolainahenkilökunnan tunnuksilla, joten asiakas täytyy liittää pyyntöön käsin (ja mahdollisesti lisätä sähköposti) tai luoda uusi asiakas.</p>\n\t\t\t\t\t\t\t\t\t<p><b-input @keydown.enter.native=\"searchClients()\" v-model=\"client_query\"></b-input>\n\t\t\t\t\t\t\t\t\t\t<b-button @click=\"searchClients()\">hae</b-button>\n\t\t\t\t\t\t\t\t\t</p>\n\n\t\t\t\t\t\t\t\t\t<template v-if=\"clients_result && clients_result.length\">\n\t\t\t\t\t\t\t\t\t\t<b-table small striped hover :items=\"clients_result\" :fields=\"client_fields\">\n\t\t\t\t\t\t\t\t\t\t\t<template v-slot:cell(sahkoposti)=\"data\">\n\t\t\t\t\t\t\t\t\t\t\t\t{{data.value.join(', ')}}\n\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t\t<template v-slot:cell(valitse)=\"data\">\n\t\t\t\t\t\t\t\t\t\t\t\t<b-button title=\"liitä asiakas ja anna tarvittaessa toinen sähköposti\" variant=\"primary\" @click=\"openJoinClient(data.item)\">liitä</b-button>\n\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t</b-table>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<div v-else>ei tuloksia</div>\n\n\t\t\t\t\t\t\t\t\t<b-button class=\"float-right\" style=\"margin-top:40px\" variant=\"primary\" @click=\"show_modal_external = !show_modal_external\">Luo uusi asiakas</b-button>\n\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t</tr>\n<!--\n\t\t\t\t\t\t<tr v-if=\"request.status == 'lainassa'\">\n\t\t\t\t\t\t\t<td>kirjastosta</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<b-link  :to=\"'/kirjastot/' + request.lainassa_kirjastosta\">{{loan_library_name}}</b-link>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t</tr>\n\n\t\t\t\t\t\t<tr v-if=\"request.status == 'lainassa' && request.tilaus_saatu\">\n\t\t\t\t\t\t\t<td>eräpäivä</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<b>{{formatDate(request.tilaus_saatu.pvm_erapaiva, 'reverse','.')}} </b>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<b-button class=\"float-right\" variant=\"primary\" @click=\"show_modal_loan_date = true\" size=\"sm\">muuta eräpäivää</b-button><br><br>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\n\t\t\t\t\t-->\n\n\t\t\t\t\t\t<template v-if=\"request.teos_on == 'artikkeli'\">\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td style=\"min-width:200px\">mistä löysit?</td>\n\t\t\t\t\t\t\t\t<td><b>{{request.mista_loysit_julkaisun_tiedot}}</b></td>\n\t\t\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t<tr >\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\tmaksaja\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<b-badge v-if=\"request.hintakatto\" class=\"float-right alert alert-info\">hintakatto: {{request.hintakatto}}</b-badge>\n\t\t\t\t\t\t\t\t<div v-if=\"!request.maksaja_varmistettu && request.maksaja != 'asiakas'\" class=\"alert alert-warning\">maksajaa ei ole liitetty mihinkään organisaatioon</div>\n\t\t\t\t\t\t\t\t<div v-if=\"request.maksaja == 'asiakas'\"><b>asiakas itse</b></div>\n\t\t\t\t\t\t\t\t<div v-else-if=\"!request.maksaja_varmistettu\">\n\t\t\t\t\t\t\t\t\t<b v-if=\"!request.maksaja_varmistettu\"> {{request.maksaja}}: {{request.laitos}} {{request.projekti}}</b>\n\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div v-else>\n\t\t\t\t\t\t\t\t\t<span title=\"lomakkeelta tullut maksajatieto\">{{request.laitos}}: </span>\n\t\t\t\t\t\t\t\t\t<b-link title=\"linkitetty maksajatieto\" :to=\"'/organisaatiot/' + request.maksaja_varmistettu._id\">{{request.maksaja_varmistettu.nimi}}</b-link>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div v-if=\"request.maksaja_varmistettu\">\n\t\t\t\t\t\t\t\t\t<table class=\"table table-striped\">\n\t\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t\t<tr v-if=\"request.projekti\"><td>projekti:</td><td><b> {{request.projekti}}</b></td></tr>\n\t\t\t\t\t\t\t\t\t\t\t<tr v-if=\"request.kustannuspaikka\"><td>kustannuspaikka:</td><td><b> {{request.kustannuspaikka}}</b></td></tr>\n\t\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t</table>\n\n\t\t\t\t\t\t\t\t\t<div v-if=\"request.maksaja_info && request.maksaja_varmistettu\" class=\"alert alert-info\">{{request.maksaja_info}}</div>\n\n\t\t\t\t\t\t\t\t</div>\n\n\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td title = \"muokkaa maksajatietoja\"><b-icon v-if=\"request.status != 'arkistoitu'\" icon=\"pen\" variant=\"primary\" id=\"edit-note\" class=\"float-right cursor\" @click=\"show_modal_payer = true\"></b-icon></td>\n\t\t\t\t\t\t</tr>\n<!--\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td style=\"min-width:200px\">maksu</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{{request.maksu}} (tieto tulee tilauksesta)\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t</tr>\n-->\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td style=\"min-width:200px\">huomautuksia <br>(sisäinen)</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<div v-if=\"request.huomautuksia != ''\" class=\"alert alert-info\" v-html=\"$G.renderBreaks(request.huomautuksia,'\\n')\"></div>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td title = \"muokkaa huomautuksia\"><b-icon icon=\"pen\" variant=\"primary\" id=\"edit-note\" class=\"float-right cursor\" @click=\"show_modal_note = !show_modal_note\"></b-icon></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t\t<div v-if=\"request.tarvitaan_viimeistaan\" class=\"alert alert-info\">tarvitaan viimeistään: {{request.tarvitaan_viimeistaan}}</div>\n\t\t\t\t<div v-if=\"request.o_id\" class=\"alert alert-danger\">Vanha laina Kakesta!</div>\n\t\t\t\t<div v-if=\"request.peruutuksen_syy\">peruutuksen syy: <b class=\"text-danger\">{{request.peruutuksen_syy}} </b> </div>\n\t\t\t\t<div v-if=\"request.o_retudate_has_value == 'yes'\" class=\"alert alert-info\" >Tämä lienee palautettu {{request.pvm_palautettu}}?</div>\n\n\t\t\t\t<div v-if=\"request.karhut && request.karhut.length\">\n\t\t\t\t\t<div v-for=\"karhu in request.karhut\" :key=\"karhu\" class=\"alert alert-danger\">\n\t\t\t\t\t\tkarhuttu: {{karhu}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</b-card-body>\n\t\t</b-card>\n\t\t<br>\n\n\n\t\t<b-card v-if=\"(request.status == 'lainassa' || request.status == 'arkistoitu') && request.tilaus_saatu\" :footer=\"'palautettu: ' + formatDate(request.tilaus_saatu.pvm_palautettu,'reverse', '.')\" header-class=\"dim\" header-text-variant=\"white\">\n\t\t\t<template #header >\n\n\t\t\t  <h6 class=\"mb-0\"><b>kaukolaina</b> (saapunut: {{formatDate(request.tilaus_saatu.pvm_saapunut, 'reverse', '.')}})</h6>\n\n\t        </template>\n\t\t\t<table class=\"table\">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>kirjastosta</td>\n\t\t\t\t\t<td><b-link text-variant=\"white\" :to=\"'/kirjastot/' + request.tilaus_saatu.kirjasto_id\"> {{request.tilaus_saatu.kirjaston_nimi}}</b-link></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\n\t\t\t\t<tr v-if=\"request.teos_on == 'kirja'\">\n\t\t\t\t\t<td style=\"width:200px\">eräpäivä</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<DueDate :item=\"request\"></DueDate>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td @click=\"show_modal_loan_date = true\" title=\"muokkaa eräpäivää\"><b-icon icon=\"pen\" variant=\"primary\" id=\"edit-note\" class=\"float-right cursor\"></b-icon></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td style=\"width:200px\">maksu</td>\n\t\t\t\t\t<td>{{request.tilaus_saatu.maksu}}</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<!--\n\t\t\t\t<tr>\n\t\t\t\t\t<td style=\"width:200px\">info</td>\n\t\t\t\t\t<td>{{request.tilaus_saatu.info}}</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t-->\n\t\t\t\t<tr>\n\t\t\t\t\t<td style=\"width:200px\">tilausviesti</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<div class=\"cursor\" @click=\"$root.$emit('bv::toggle::collapse', request.tilaus_saatu._id)\" size=\"sm\"><b-icon icon=\"caret-right\" />tilausviesti</div>\n\t\t\t\t\t\t<b-collapse :id=\"request.tilaus_saatu._id\" accordion=\"my-accordion\" role=\"tabpanel\">\n\t\t\t\t\t\t\t<div v-html=\"$G.renderBreaks(request.tilaus_saatu.viesti,'\\n')\"></div>\n\t\t\t\t\t\t</b-collapse>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\n\t\t\t</table>\n\n\t\t</b-card>\n\n\n\n\t\t<br>\n\n\n\t\t\t<!-- TILAUKSET -->\n\t\t\t<!--<b-card v-if=\"request.tilaaja\" header=\"tilaukset\" header-tag=\"h5\" style=\"border:none\">-->\n\n\n\t\t\t\t<div v-if=\"orders.length\">\n\t\t\t\t\t<b-table :items=\"orders\" :fields=\"order_fields\" class=\"table table-striped\">\n\n\t\t\t\t\t\t<template v-slot:cell(kirjaston_nimi)=\"data\">\n\t\t\t\t\t\t\t<div style=\"min-width:350px\">\n\t\t\t\t\t\t\t\t<b-link :to=\"'/kirjastot/' + data.item.kirjasto_id\"> {{data.value}}</b-link>\n\n\t\t\t\t\t\t\t\t<div class=\"cursor\" @click=\"$root.$emit('bv::toggle::collapse', data.item._id)\" size=\"sm\"><b-icon icon=\"caret-right\" />tilausviesti</div>\n\n\t\t\t\t\t\t\t\t<b-collapse :id=\"data.item._id\" accordion=\"my-accordion\" role=\"tabpanel\">\n\t\t\t\t\t\t\t\t\t<div v-html=\"$G.renderBreaks(data.item.viesti,'\\n')\"></div>\n\t\t\t\t\t\t\t\t</b-collapse>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t<template v-slot:cell(pvm)=\"data\">\n\t\t\t\t\t\t\t<div v-if=\"data.item.recdate\">{{ data.item.recdate}}</div>\n\t\t\t\t\t\t\t<div v-else>{{ $G.getDateFromUUID(data.item._id) }}</div>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t<template v-slot:cell(pvm_saapunut)=\"data\">\n\t\t\t\t\t\t\t<div>{{formatDate(data.value)}}</div>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t<template v-slot:cell(pvm_palautettu)=\"data\">\n\t\t\t\t\t\t\t<b class=\"text text-info\">{{formatDate(data.value)}}</b>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t<template v-slot:cell(status)=\"data\">\n\t\t\t\t\t\t\t<b class=\"text text-info\">{{data.value.replace('_', ' ')}}</b>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t<template v-slot:cell(toiminto)=\"data\">\n\n\t\t\t\t\t\t\t<b-nav v-if=\"request.status !== 'arkistoitu'\" class=\"float-right\">\n\t\t\t\t\t\t\t\t<b-nav-item-dropdown\n\t\t\t\t\t\t\t\t\tv-if=\"data.item.status !== 'palautettu' && data.item.status !== 'ei_saatavilla'\"\n\t\t\t\t\t\t\t\t\tid=\"tilaus-nav-dropdown\"\n\t\t\t\t\t\t\t\t\ttext=\"toiminnot\"\n\t\t\t\t\t\t\t\t\ttoggle-class=\"nav-link-custom\"\n\t\t\t\t\t\t\t\t\tright\n\t\t\t\t\t\t\t\t>\n\n\t\t\t  \t\t\t\t      <b-dropdown-divider></b-dropdown-divider>\n\n\t\t\t  \t\t\t\t      <b-dropdown-item v-if=\"(request.status == 'kasittelyssa' || request.status == 'tilattu') && request.teos_on == 'kirja'\" class=\"float-right\" variant=\"primary\" @click=\"openArrived(data.item)\">merkitse saapuneeksi ja lainaa</b-dropdown-item>\n\n\t\t\t\t\t\t\t\t  <b-dropdown-item  v-if=\"(request.status == 'kasittelyssa' || request.status == 'tilattu') && request.teos_on == 'artikkeli'\" variant=\"primary\" class=\"float-right\" @click=\"openArrived(data.item)\">merkitse saapuneeksi ja arkistoi</b-dropdown-item >\n\n\t\t\t  \t\t\t\t\t  <b-dropdown-item v-if=\"!data.item.status || data.item.status == 'tilattu'\" @click=\"setNotAvailable(data.item._id)\" >ei saatavilla</b-dropdown-item>\n\t\t\t  \t\t\t\t    </b-nav-item-dropdown>\n\t\t\t  \t\t\t\t  </b-nav>\n\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</b-table>\n\n\t\t\t\t</div>\n\n\t\t\t<!--</b-card>-->\n\n\n\t\t\t<div class=\"alert alert-danger\" v-if=\"error\">{{error}}</div>\n\n\n\n\t\t\t<!-- MODAL ERÄPÄIVÄNVAIHTO-->\n\t\t\t<b-modal v-model=\"show_modal_loan_date\"\n\t\t\t\t\ttitle=\"muuta eräpäivää\"\n\t\t\t\t\tcancel-title=\"peru\"\n\t\t\t\t\tok-title=\"tallenna\"\n\t\t\t\t\t@ok=\"setLoanDate\"\n\t\t\t\t\t:header-bg-variant=\"primaryBG\"\n\t\t\t\t\t:header-text-variant=\"primaryText\">\n\t\t\t\t\t<div v-if=\"request.tilaus_saatu\" class=\"alert alert-info\">nykyinen eräpäivä: {{formatDate(request.tilaus_saatu.pvm_erapaiva, 'reverse','.')}}</div>\n\t\t\t\t\tuusi eräpäivä: <b-input v-model=\"new_loan_date\"></b-input>\n\t\t\t\t\t<b-form-checkbox\n\t\t\t\t\t  id=\"checkbox-ei-peruutusviestia\"\n\t\t\t\t\t  v-model=\"tilaus_uusittavissa\"\n\t\t\t\t\t  name=\"checkbox-ei-peruutusviestia\"\n\t\t\t\t\t  value=\"no\"\n\t\t\t\t\t  unchecked-value=\"yes\"\n\t\t\t\t\t  @change =\"setDueDate()\"\n\t\t\t\t\t>\n\t\t\t\t\t  ei voi enää uusia\n\t\t\t\t\t</b-form-checkbox>\n\t\t\t\t\t<template v-if=\"tilaus_uusittavissa == 'no'\">lisätieto: <b-input v-model=\"tilaus_info\"></b-input></template>\n\n\t\t\t</b-modal>\n\n\t\t\t<!-- MODAL OTSIKKO -->\n\t\t\t<b-modal v-model=\"show_modal_title\"\n\t\t\t\ttitle=\"Muokkaa otsikkoa\"\n\t\t\t\tcancel-title=\"peru\"\n\t\t\t\tok-title=\"tallenna\"\n\t\t\t\t@ok=\"updateTitle\"\n\t\t\t\t:header-bg-variant=\"primaryBG\"\n\t\t\t\t:header-text-variant=\"primaryText\">\n\t\t\t\t<b-form-textarea v-model=\"title\" rows=\"3\"></b-form-textarea>\n\t\t\t\t<div v-if=\"sending\" class=\"alert alert-info\">lähetetään...</div>\n\t\t\t</b-modal>\n\n\t\t\t<!-- MODAL KARHUVIESTI -->\n\t\t\t<b-modal v-model=\"show_modal_due_notice\"\n\t\t\t\ttitle=\"Lähetä karhuviesti\"\n\t\t\t\tcancel-title=\"peru\"\n\t\t\t\tok-title=\"lähetä\"\n\t\t\t\t@ok=\"sendDueNotice\"\n\t\t\t\t:header-bg-variant=\"primaryBG\"\n\t\t\t\t:header-text-variant=\"primaryText\">\n\t\t\t\tkarhuviesti asiakkaalle:\n\t\t\t\t<b-form-textarea v-model=\"due_notice\" rows=\"6\"></b-form-textarea>\n\t\t\t\t<div v-if=\"sending\" class=\"alert alert-info\">lähetetään...</div>\n\t\t\t</b-modal>\n\n\t\t\t<!-- MODAL PYYNNÖN PERUUTUS -->\n\t\t\t<b-modal v-model=\"show_modal_cancel_request\"\n\t\t\t\ttitle=\"peruuta kaukolainapyyntö\"\n\t\t\t\tcancel-title=\"peru\"\n\t\t\t\tok-title=\"merkitse peruutetuksi\"\n\t\t\t\t@ok=\"setCancelled()\"\n\t\t\t\t:header-bg-variant=\"primaryBG\"\n\t\t\t\t:header-text-variant=\"primaryText\">\n\t\t\t\t<div class=\"alert alert-danger\" v-if=\"request.status == 'lainassa'\">Teos on lainassa! </div>\n\t\t\t\t<template v-if=\"laheta_peruutusilmoitus === 'yes'\">\n\t\t\t\t\tperuutusviesti asiakkaalle:\n\t\t\t\t\t<b-form-textarea v-model=\"cancel_reason\" rows=\"6\"></b-form-textarea>\n\t\t\t\t</template>\n\t\t\t\t<b-form-checkbox\n\t\t\t\t  id=\"checkbox-ei-peruutusviestia\"\n\t\t\t\t  v-model=\"laheta_peruutusilmoitus\"\n\t\t\t\t  name=\"checkbox-ei-peruutusviestia\"\n\t\t\t\t  value=\"yes\"\n\t\t\t\t  unchecked-value=\"no\"\n\t\t\t\t>\n\t\t\t\t  lähetä sähköposti-ilmoitus asiakkaalle\n\t\t\t\t</b-form-checkbox>\n\t\t\t\t<div v-if=\"sending\" class=\"alert alert-info\">lähetetään...</div>\n\t\t\t</b-modal>\n\n\n\t\t\t<!-- MODAL ARKISTOINNIN PERUUTUS-->\n\t\t\t<b-modal v-model=\"show_modal_cancel_archive\"\n\t\t\t\ttitle=\"palauta käsittelyyn\"\n\t\t\t\tcancel-title=\"peru\"\n\t\t\t\tok-title=\"palauta käsittelyyn\"\n\t\t\t\t@ok=\"setNonArchived()\"\n\t\t\t\t:header-bg-variant=\"primaryBG\"\n\t\t\t\t:header-text-variant=\"primaryText\">\n\t\t\t\t<div v-if=\"sending\" class=\"alert alert-info\">lähetetään...</div>\n\t\t\t</b-modal>\n\n\t\t\t<!-- MODAL SAAPUNEEKSI-ILMOITTAMISLOMAKE -->\n\t\t\t<b-modal v-model=\"show_modal_arrived\"\n\t\t\t\tsize=\"lg\"\n\t\t\t\ttitle=\"merkitse saapuneeksi\"\n\t\t\t\tcancel-title=\"peru\"\n\t\t\t\tok-title=\"merkitse saapuneeksi\"\n\t\t\t\t@ok=\"setArrived\"\n\t\t\t\t:header-bg-variant=\"primaryBG\"\n\t\t\t\t:header-text-variant=\"primaryText\">\n\n\t\t\t\t<b-form-group v-if=\"arrived_order\" style=\"max-width:450px\">\n\t\t\t\t\t<template v-if=\"request.teos_on == 'kirja'\">\n\t\t\t\t\t\t<label>eräpäivä (pp.kk.vvvv)</label>\n\t\t\t\t\t\t<b-input v-model=\"arrived_order.erapaiva\"></b-input>\n\t\t\t\t\t</template>\n\n\t\t\t\t\t<label>maksu</label>\n\t\t\t\t\t<b-input v-model=\"arrived_order.maksu\"></b-input>\n\n\t\t\t\t<b-form-checkbox\n\t\t\t\t  id=\"checkbox-2\"\n\t\t\t\t  v-model=\"laheta_saapumisilmoitus\"\n\t\t\t\t  name=\"checkbox-2\"\n\t\t\t\t  value=\"yes\"\n\t\t\t\t  unchecked-value=\"no\"\n\t\t\t\t>\n\t\t\t\t  lähetä saapumisilmoitus\n\t\t\t\t</b-form-checkbox>\n\n\t\t\t\t</b-form-group>\n\t\t\t\t<div v-if=\"sending\" class=\"alert alert-info\">lähetetään...</div>\n\t\t\t\t<div class=\"alert alert-danger\" v-if=\"error\">{{error}}</div>\n\t\t\t</b-modal>\n\n\t\t\t<!-- MODAL HUOMIOLOMAKE -->\n\t\t\t<b-modal v-model=\"show_modal_note\"\n\t\t\t\tsize=\"lg\"\n\t\t\t\ttitle=\"huomautuksia\"\n\t\t\t\t@ok=\"setNote\"\n\t\t\t\t@cancel=\"note = request.huomautuksia\"\n\t\t\t\t:header-bg-variant=\"primaryBG\"\n\t\t\t\t:header-text-variant=\"primaryText\"\n\t\t\t>\n\t\t\t\t<b-form-textarea\n\t\t\t\t  id=\"textarea\"\n\t\t\t\t  v-model=\"note\"\n\t\t\t\t  placeholder=\"\"\n\t\t\t\t  rows=\"10\"\n\t\t\t\t></b-form-textarea>\n\t\t\t\t<div v-if=\"sending\" class=\"alert alert-info\">lähetetään...</div>\n\n\t\t\t</b-modal>\n\n\t\t\t<!-- MODAL TILAUSLOMAKE -->\n\t\t\t<b-modal v-model=\"show\"\n\t\t\t\tsize=\"lg\"\n\t\t\t\ttitle=\"tilauslomake\"\n\t\t\t\t:header-bg-variant=\"primaryBG\"\n\t\t\t\t:header-text-variant=\"primaryText\"\n\t\t\t>\n\t\t\t\t<WEOrderForm @exit=\"loadData()\" v-bind:request=\"request\"></WEOrderForm>\n\t\t\t\t<template v-slot:modal-footer>\n\t\t\t\t\t<div></div>\n\t\t\t\t</template>\n\t\t\t</b-modal>\n\n\n\t\t\t<!-- MODAL MAKSAJAN VALINTA -->\n\t\t\t<b-modal v-model=\"show_modal_payer\"\n\t\t\t\tsize=\"lg\"\n\t\t\t\ttitle=\"maksaja\"\n\t\t\t\t:header-bg-variant=\"primaryBG\"\n\t\t\t\t:header-text-variant=\"primaryText\"\n\t\t\t\t@ok=\"setPayer\"\n\t\t\t\t@cancel=\"cancelPayer\"\n\t\t\t>\n\n\t\t\t\t<b-form-checkbox\n\t\t\t\t  id=\"checkbox-1\"\n\t\t\t\t  v-model=\"payer_is_client\"\n\t\t\t\t  name=\"checkbox-1\"\n\t\t\t\t  value=\"yes\"\n\t\t\t\t  unchecked-value=\"no\"\n\t\t\t\t>\n\t\t\t\t  asiakas maksaa itse\n\t\t\t\t</b-form-checkbox>\n\n\t\t\t\t<b-form v-if=\"payer_is_client != 'yes'\">\n\t\t\t\t\t<b-form-group style=\"margin-top:30px\">\n\t\t\t\t\t\t<label>valitse maksaja</label>\n\t\t\t\t\t\t<b-select\n\t\t\t\t\t\t\tv-model=\"payer_selected\"\n\t\t\t\t\t\t\t:options=\"organisations\"\n\t\t\t\t\t\t\tvalue-field=\"_id\"\n\t\t\t\t\t\t\ttext-field=\"nimi\">\n\t\t\t\t\t\t</b-select>\n\n\t\t\t\t\t\t<b-form-textarea v-if=\"payer_selected\"\n\t\t\t\t\t\t  id=\"textarea\"\n\t\t\t\t\t\t  v-model=\"payer_info\"\n\t\t\t\t\t\t  placeholder=\"Lisätietoa maksuun liittyen...\"\n\t\t\t\t\t\t  rows=\"3\"\n\t\t\t\t\t\t  max-rows=\"6\"\n\t\t\t\t\t\t></b-form-textarea>\n\t\t\t\t\t</b-form-group>\n\t\t\t\t</b-form>\n\t\t\t\t<div v-if=\"sending\" class=\"alert alert-info\">lähetetään...</div>\n\t\t\t</b-modal>\n\n\n\t\t\t<!-- MODAL ULKOPUOLINEN ASIAKAS -->\n\t\t\t<b-modal v-model=\"show_modal_external\" title=\"ulkopuolinen asiakas\" @ok=\"saveExternalClient\">\n\t\t\t\t<b-form-group style=\"margin-top:30px\">\n\t\t\t\t\t<label>sukunimi</label>\n\t\t\t\t\t<b-input v-model=\"external_client.sukunimi\"></b-input>\n\t\t\t\t\t<label>etunnimi</label>\n\t\t\t\t\t<b-input v-model=\"external_client.etunimi\"></b-input>\n\t\t\t\t\t<label>sähköposti (PAKOLLINEN)</label>\n\t\t\t\t\t<b-input v-model=\"external_client.sahkoposti\"></b-input>\n\t\t\t\t\t<label>kortin numero</label>\n\t\t\t\t\t<b-input v-model=\"external_client.kirjastokortin_numero\"></b-input>\n\t\t\t\t</b-form-group>\n\t\t\t\t<div v-if=\"sending\" class=\"alert alert-info\">lähetetään...</div>\n\t\t\t</b-modal>\n\n\t\t\t<!-- MODAL LIITÄ ASIAKAS -->\n\t\t\t<b-modal v-model=\"show_modal_join_client\" title=\"liitä asiakas pyyntöön\" cancel-title=\"peru\" ok-title=\"liitä\" @ok=\"saveJoinClient\">\n\t\t\t\t<b-form-group v-if=\"join_client\" style=\"margin-top:30px\">\n\t\t\t\t\t<label>sukunimi</label>\n\t\t\t\t\t<p><b>{{join_client.sukunimi}}</b></p>\n\t\t\t\t\t<label>etunnimi</label>\n\t\t\t\t\t<p><b>{{join_client.etunimi}}</b></p>\n\t\t\t\t\t<label>kortin numero</label>\n\t\t\t\t\t<p>{{join_client.kirjastokortin_numero}}</p>\n\t\t\t\t\t<label>sähköposti(t)</label>\n\t\t\t\t\t<p><b>{{join_client.sahkoposti.join(', ')}}</b></p>\n\t\t\t\t\t<label>lisää sähköposti asiakkaalle (valinnainen)</label>\n\t\t\t\t\t<b-input v-model=\"add_sahkoposti\" />\n\n\n\t\t\t\t</b-form-group>\n\t\t\t\t<div v-if=\"sending\" class=\"alert alert-info\">lähetetään...</div>\n\t\t\t</b-modal>\n\n\t\t</div>\n\n\t\t<div v-else class=\"alert alert-info\">lataan...</div>\n\n\t\t<!-- ARCHIVE BANNER-->\n\t\t<img v-if=\"ready && (request.status == 'arkistoitu' || request.status == 'peruttu')\" style=\"position:absolute;top: 120px; left:0%\" src=\"@/assets/images/arkistoitu_vino.png\">\n\n\n\t</b-container>\n\n</template>\n\n\n<script>\nimport axios from 'axios'\nimport WEOrderForm from './WEOrderForm.vue'\nimport DueDate from './WEDueDateDisplay.vue'\nimport web from '../web.js'\n\nexport default {\n\tname: 'WERequests',\n\tcomponents: {WEOrderForm, DueDate},\n\tdata: function() {\n\t\treturn {\n\t\t\trequest: null,\n\t\t\tclient: null,\n\t\t\tclient_query: '',\n\t\t\ttitle: '',\n\t\t\tjoin_client: null,\n\t\t\tadd_sahkoposti: '',\n\t\t\tpayer: null,\n\t\t\tpayer_selected: null,\n\t\t\tpayer_info: '',\n\t\t\tpayer_is_client: 'no',\n\t\t\torders: [],\n\t\t\tclients_result: null,\n\t\t\tarrived_order : null,\n\t\t\tlaheta_saapumisilmoitus: 'yes',\n\t\t\tlaheta_peruutusilmoitus: 'yes',\n\t\t\torganisations: [],\n\t\t\tready: false,\n\t\t\terror: null,\n\t\t\tnote:'',\n\t\t\tshow: false,\n\t\t\tsending: false,\n\t\t\tshow_modal_arrived: false,\n\t\t\tshow_modal_payer: false,\n\t\t\tshow_modal_loan_date: false,\n\t\t\tshow_modal_due_notice: false,\n\t\t\tshow_modal_external: false,\n\t\t\tshow_modal_note: false,\n\t\t\tshow_modal_title: false,\n\t\t\tshow_modal_cancel_request: false,\n\t\t\tshow_modal_cancel_archive: false,\n\t\t\tshow_modal_join_client: false,\n\t\t\tcancel_reason: '',\n\t\t\tdue_notice: '',\n\t\t\tnew_loan_date: '',\n\t\t\texternal_client: {},\n\t\t\tloan_library_name: '',\n\t\t\tprimaryBG: 'primary',\n\t\t\tprimaryText: 'white',\n\t\t\ttilaus_uusittavissa: 'yes',\n\t\t\ttilaus_info: '',\n\t\t\tfields: [\n\t\t\t\t{key:'teoksen_tiedot'},\n\t\t\t\t{key:'tilaajan_nimi'},\n\t\t\t\t{key:'tilaajan_sahkoposti', label: 'tilaajan sähköposti'},\n\t\t\t\t{key: 'toiminto'}\n\t\t\t],\n\t\t\torder_fields: [\n\t\t\t\t{key: 'kirjaston_nimi'},\n\t\t\t\t{key: 'status', label: 'status'},\n\t\t\t\t{key: 'pvm', label: 'tilaus tehty'},\n\t\t\t\t{key: 'pvm_saapunut', label: 'saapunut'},\n\t\t\t\t{key: 'toiminto'}\n\t\t\t],\n\t\t\tclient_fields: [\n\t\t\t\t{key: 'sukunimi'},\n\t\t\t\t{key: 'etunimi'},\n\t\t\t\t{key: 'sahkoposti', label: 'sähköposti'},\n\t\t\t\t{key: 'valitse', label: 'valitse'},\n\t\t\t]\n\t\t}\n\t},\n\tprops: ['status'],\n\n\n\twatch: {\n\t\t$route(to, from) {\n\t\t\tif(this.$route.params.id) {\n\t\t\t\tthis.loadData()\n\t\t\t} else {\n\t\t\t\tthis.current = null\n\t\t\t}\n\t\t}\n\t},\n\n\tmethods: {\n\t\topenJoinClient(item) {\n\t\t\tthis.show_modal_join_client = true\n\t\t\tthis.join_client = item\n\t\t},\n\n\t\tformatDate(date, reverse, comb) {\n\t\t\tif(!comb) comb = '.'\n\t\t\tvar out = []\n\t\t\tif(date) {\n\t\t\t\tvar d = new Date(date)\n\t\t\t\tif(d instanceof Date && isFinite(d)) {\n\t\t\t\t\tout.push(d.getFullYear())\n\t\t\t\t\tout.push((d.getMonth() + 1).toString().padStart(2, \"0\"))\n\t\t\t\t\tout.push(d.getDate().toString().padStart(2, \"0\"))\n\t\t\t\t\tif(reverse) return out.reverse().join(comb)\n\t\t\t\t\telse return out.join(comb)\n\t\t\t\t} else {\n\t\t\t\t\treturn date\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn '-'\n\t\t\t}\n\t\t},\n\n\t\tisExternal() {\n\t\t\tif(this.request.tilaajan_sahkoposti.includes('_external_') && !this.request.tilaaja) return true\n\t\t\telse return false\n\t\t},\n\t\t// join client by _id to request\n\t\t// add additional email to client if provided\n\t\tasync saveJoinClient(bvModalEvt) {\n\t\t\tif(bvModalEvt) bvModalEvt.preventDefault()\n\t\t\tvar update = {tilaaja: this.join_client._id}\n\t\t\tvar update_client = {}\n\n\t\t\tvar update_url = this.$G.api_url + \"/api/pyynnot/\" + this.$route.params.id\n\t\t\tvar update_client_url = this.$G.api_url + \"/api/asiakkaat/\" + this.join_client._id\n\t\t\ttry {\n\t\t\t\tvar update_response = await axios.put(update_url, update)\n\t\t\t\tif(this.add_sahkoposti.includes('@')) {\n\t\t\t\t\tthis.join_client.sahkoposti.push(this.add_sahkoposti)\n\t\t\t\t\tupdate_client.sahkoposti =  [...new Set(this.join_client.sahkoposti)]\n\t\t\t\t}\n\t\t\t\tvar client_response = await axios.put(update_client_url, update_client)\n\t\t\t\tthis.loadData()\n\t\t\t\tthis.show_modal_join_client = false\n\t\t\t} catch(e) {\n\t\t\t\talert('Asiakkaan liittäminen tai sähköpostin lisäys ei onnistunut! ' + e )\n\t\t\t}\n\n\t\t},\n\n\t\tasync saveExternalClient(bvModalEvt) {\n\t\t\tbvModalEvt.preventDefault()\n\t\t\tif(!this.external_client.sahkoposti || !this.external_client.sahkoposti.includes('@') || this.external_client.sahkoposti == '') {\n\t\t\t\talert(\"Sähköposti on pakollinen tieto\")\n\t\t\t\treturn\n\t\t\t}\n\t\t\tvar url = this.$G.api_url + \"/api/asiakkaat?sahkoposti=\" + this.external_client.sahkoposti\n\t\t\ttry {\n\t\t\t\tvar search_response = await axios.get(url)\n\t\t\t\tvar update = {'tilaajan_sahkoposti': this.external_client.sahkoposti}\n\t\t\t\tvar update_url = this.$G.api_url + \"/api/pyynnot/\" + this.$route.params.id\n\t\t\t\tvar update_response = await axios.put(update_url, update)\n\t\t\t\tvar result = await search_response.data\n\t\t\t\t// if we did not find client, then add it\n\t\t\t\tif(result.length == 0) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar client_url = this.$G.api_url + \"/api/asiakkaat/\"\n\t\t\t\t\t\tvar client_response = await axios.post(client_url, this.external_client)\n\t\t\t\t\t\tthis.join_client = client_response.data\n\t\t\t\t\t\tawait this.saveJoinClient()\n\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\talert(e)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.show_modal_external = false\n\t\t\t\tthis.loadData()\n\t\t\t} catch(e) {\n\t\t\t\talert(e)\n\t\t\t\tconsole.log(e)\n\t\t\t}\n\t\t},\n\n\t\tcancelPayer() {\n\t\t\tif(this.request.maksaja == 'asiakas') this.payer_is_client = 'yes'\n\t\t},\n\n\t\tasync setPayer(e) {\n\t\t\tvar update = {'maksaja_varmistettu': this.payer_selected, \"maksaja_info\": this.payer_info, 'maksaja': 'laitos'}\n\t\t\t// client is paying\n\t\t\tif(this.payer_is_client == 'yes') update = {\"maksaja_varmistettu\": null, \"maksaja\": 'asiakas'}\n\n\t\t\ttry {\n\t\t\t\tvar url = this.$G.api_url + \"/api/pyynnot/\" + this.$route.params.id\n\t\t\t\tvar update_result = await axios.put(url, update);\n\t\t\t\tthis.loadData()\n\n\t\t\t} catch(e) {\n\t\t\t\talert(e)\n\t\t\t}\n\t\t},\n\n\t\tasync updateTitle() {\n\t\t\ttry {\n\t\t\t\tawait web.updateRequest(this.$route.params.id, {teoksen_tiedot: this.title})\n\t\t\t\tthis.loadData()\n\t\t\t} catch(e) {\n\t\t\t\talert(e)\n\t\t\t}\n\t\t},\n\n\t\tsetNonArchived() {\n\t\t\tvar url = this.$G.api_url + \"/api/pyynnot/\"+ this.$route.params.id\n\t\t\tvar update = {status: 'kasittelyssa'}\n\t\t\taxios.put(url, update)\n\t\t\t.then(response => {\n\t\t\t\tthis.loadData()\n\t\t\t})\n\t\t\t.catch(data => {\n\t\t\t\talert('Muutoksen tallettaminen epäonnistui ' + this.getError(data,''))\n\t\t\t})\n\t\t},\n\n\t\topenArrived(order) {\n\t\t\tthis.arrived_order = order\n\t\t\tthis.arrived_order.erapaiva = this.$G.getToday('reverse', 1)\n\t\t\tthis.show_modal_arrived = true\n\t\t},\n\n\t\tasync openKarhuRequest() {\n\t\t\ttry {\n\t\t\t\tvar response = await axios(this.$G.api_url + \"/api/saatteet?_id=asiakas: karhu\")\n\t\t\t\tthis.due_notice = response.data[0].saate\n\t\t\t\tthis.due_notice = this.due_notice.replace('[[FI]]',this.$G.getInfo(this.request, 'fi'))\n\t\t\t\tthis.due_notice = this.due_notice.replace('[[EN]]',this.$G.getInfo(this.request, 'en'))\n\t\t\t\tthis.due_notice = this.due_notice.replace('[[ERAPAIVA]]', this.formatDate(this.request.tilaus_saatu.pvm_erapaiva, 'reverse', '.'))\n\t\t\t\tthis.due_notice = this.due_notice.replace('[[ERAPAIVA]]',this.formatDate(this.request.tilaus_saatu.pvm_erapaiva, 'reverse', '.'))\n\t\t\t} catch(e) {\n\t\t\t\talert('karhuviestipohjaa ei saatu')\n\t\t\t}\n\n\t\t\tthis.show_modal_due_notice = true\n\t\t},\n\n\t\topenCancelRequest() {\n\t\t\taxios.get(this.$G.api_url + \"/api/saatteet?_id=asiakas: peruutusviesti\")\n\t\t\t.then(response => {\n\t\t\t\tthis.cancel_reason = response.data[0].saate\n\t\t\t\tthis.cancel_reason = this.cancel_reason.replace('[[FI]]',this.$G.getInfo(this.request, 'fi'))\n\t\t\t\tthis.cancel_reason = this.cancel_reason.replace('[[EN]]',this.$G.getInfo(this.request, 'en'))\n\t\t\t})\n\t\t\t.catch(data => {this.cancel_reason = 'peruutusviestipohjaa ei löytynyt!'})\n\t\t\tthis.show_modal_cancel_request = true\n\t\t},\n\n\t\tasync convertToBook() {\n\t\t\tvar update = {\"teos_on\": \"kirja\" }\n\t\t\tvar url = this.$G.api_url + \"/api/pyynnot/\"+ this.$route.params.id\n\t\t\taxios.put(url, update)\n\t\t\t.then(response => {\n\t\t\t\tthis.loadData()\n\t\t\t})\n\t\t\t.catch(data => {\n\t\t\t\talert('Muunnoksen tallettaminen epäonnistui ' + this.getError(data,''))\n\t\t\t})\n\t\t},\n\n\t\tsetNote(bvModalEvt) {\n\t\t\tbvModalEvt.preventDefault()\n\t\t\tthis.sending = true\n\t\t\tvar update = {\"huomautuksia\": this.note }\n\t\t\tvar url = this.$G.api_url + \"/api/pyynnot/\"+ this.$route.params.id\n\t\t\taxios.put(url, update)\n\t\t\t.then(response => {\n\t\t\t\tthis.sending = false\n\t\t\t\tthis.show_modal_note = false\n\t\t\t\tthis.loadData()\n\t\t\t})\n\t\t\t.catch(data => {\n\t\t\t\talert('Huomion tallettaminen epäonnistui')\n\t\t\t\tthis.error = data\n\t\t\t\tthis.sending = false\n\t\t\t})\n\t\t},\n\n\t\tsetDueDate() {\n\t\t\tif(this.new_loan_date == '') this.new_loan_date = this.formatDate(this.request.tilaus_saatu.pvm_erapaiva, 'reverse','.')\n\t\t},\n\n\t\tasync sendDueNotice(bvModalEvt) {\n\t\t\tbvModalEvt.preventDefault()\n\t\t\tthis.sending = true;\n\t\t\tvar update = {\"notice\": this.due_notice }\n\t\t\tvar url = this.$G.api_url + \"/api/pyynnot/\"+ this.$route.params.id + \"/karhu\"\n\t\t\ttry {\n\t\t\t\tvar response = await axios.post(url, update)\n\t\t\t\tthis.sending = false\n\t\t\t\tthis.show_modal_due_notice = false\n\t\t\t\tthis.loadData()\n\t\t\t} catch(e) {\n\t\t\t\tthis.sending = false\n\t\t\t\tvar msg = ''\n\t\t\t\tif(e.response.data && e.response.data.error) msg = e.response.data.error\n\t\t\t\talert(msg)\n\t\t\t}\n\t\t},\n\n\t\tsetCancelled() {\n\t\t\tthis.sending = true\n\t\t\tvar update = {\"peruutuksen_syy\": this.cancel_reason ,\"laheta_peruutusilmoitus\": this.laheta_peruutusilmoitus}\n\t\t\tvar url = this.$G.api_url + \"/api/pyynnot/\"+ this.$route.params.id + \"/cancelled\"\n\t\t\taxios.put(url, update)\n\t\t\t.then(response => {\n\t\t\t\tthis.sending = false\n\t\t\t\tthis.loadData()\n\t\t\t})\n\t\t\t.catch(data => {\n\t\t\t\talert('peruutus epäonnistui')\n\t\t\t\tthis.sending = false\n\t\t\t\tthis.error = data\n\t\t\t})\n\t\t},\n\n\t\tsetLoanDate(bvModalEvt) {\n\t\t\tthis.sending = true\n\t\t\tbvModalEvt.preventDefault()\n\t\t\tvar update = {\n\t\t\t\t\"due_date\": this.new_loan_date.split('.').reverse().join('-'),\n\t\t\t\t\"info\": this.tilaus_info,\n\t\t\t\t\"uusittavissa\": this.tilaus_uusittavissa\n\t\t\t }\n\t\t\tvar url = this.$G.api_url + \"/api/pyynnot/\"+ this.$route.params.id + \"/due_date\"\n\t\t\taxios.put(url, update)\n\t\t\t.then(response => {\n\t\t\t\tthis.sending = false\n\t\t\t\tthis.show_modal_loan_date = false\n\t\t\t\tthis.loadData()\n\t\t\t})\n\t\t\t.catch(data => {\n\t\t\t\tthis.sending = false\n\t\t\t\talert(this.getError(data, 'eräpäivän asettaminen epäonnistui'))\n\t\t\t})\n\t\t},\n\n\t\tsetReturned() {\n\t\t\tthis.sending = true\n\t\t\tvar update = {\"pvm_palautettu\": this.$G.getToday(), \"status\": 'palautettu'}\n\t\t\tvar url = this.$G.api_url + \"/api/pyynnot/\" + this.$route.params.id + \"/returned\"\n\n\t\t\taxios.put(url, update)\n\t\t\t.then(response => {\n\t\t\t\tthis.sending = false\n\t\t\t\tthis.loadData()\n\t\t\t})\n\t\t\t.catch(data => {\n\t\t\t\tthis.sending = false\n\t\t\t\talert(this.getError(data, 'Arkistointi epäonnistui'))\n\t\t\t})\n\t\t},\n\n\t\tsetNotAvailable(order_id) {\n\t\t\tthis.sending = false\n\t\t\t// update order\n\t\t\tvar resp = null\n\n\t\t\tvar url = this.$G.api_url + \"/api/pyynnot/\" + this.$route.params.id + \"/tilaukset/\"+ order_id + \"/not_available\";\n\t\t\taxios.put(url, {})\n\t\t\t.then(response => {\n\t\t\t\tthis.sending = false\n\t\t\t\tthis.loadData()\n\t\t\t})\n\t\t\t.catch(data => {\n\t\t\t\tthis.sending = false\n\t\t\t\t//this.error = this.getError(data, 'Pyyntö epäonnistui')\n\t\t\t\talert(this.getError(data, 'Pyyntö epäonnistui'))\n\t\t\t})\n\t\t},\n\n\t\tsetArrived(bvModalEvt) {\n\t\t\tbvModalEvt.preventDefault()\n\t\t\tthis.sending = false\n\t\t\t// update order\n\t\t\tvar resp = null\n\t\t\tvar update = {\n\t\t\t\t\"erapaiva\": this.arrived_order.erapaiva.split('.').reverse().join('-'),\n\t\t\t\t\"maksu\": this.arrived_order.maksu,\n\t\t\t\t\"laheta_saapumisilmoitus\": this.laheta_saapumisilmoitus\n\t\t\t}\n\t\t\tvar url = this.$G.api_url + \"/api/pyynnot/\" + this.$route.params.id + \"/tilaukset/\"+ this.arrived_order._id + \"/arrived\";\n\t\t\taxios.put(url, update)\n\t\t\t.then(response => {\n\t\t\t\tthis.sending = false\n\t\t\t\tthis.show_modal_arrived = false\n\t\t\t\tthis.loadData()\n\t\t\t})\n\t\t\t.catch(data => {\n\t\t\t\tthis.sending = false\n\t\t\t\t//this.error = this.getError(data, 'Pyyntö epäonnistui')\n\t\t\t\talert(this.getError(data, 'Pyyntö epäonnistui'))\n\t\t\t})\n\t\t},\n\n\t\tcheckDate(date) {\n\t\t\t// expecting dd.mm.YYYY\n\t\t\tvar splitted = date.split('.')\n\t\t\tif(splitted.length !== 3) return false\n\t\t},\n\t\tasync reserve(id) {\n\t\t\tvar url = this.$G.api_url + \"/api/pyynnot/\"+ id;\n\t\t\tvar result = await axios.get(url);\n\t\t\tvar item = result.data\n\t\t\tif(item && (item['status'] == '' || item['status'] == 'uusi')) {\n\t\t\t\tvar update = {status: 'kasittelyssa', \"kasittelija\": this.$G.user}\n\t\t\t\tvar update_result = await axios.put(url, update);\n\t\t\t}\n\t\t},\n\n\t\tsetLoanLibrary() {\n\t\t\tfor(var order of this.orders) {\n\t\t\t\tif(order.pvm_saapunut) this.loan_library_name = order.kirjaston_nimi\n\t\t\t}\n\t\t},\n\n\t\tasync searchClients() {\n\t\t\tvar url = this.$G.api_url + \"/api\"\n\t\t\tvar r = await axios.get(url + \"/asiakkaat/?search=\" + this.client_query)\n\t\t\tthis.clients_result = r.data\n\t\t},\n\n\t\tasync loadData() {\n\t\t\tthis.show = false\n\t\t\tthis.error = null\n\t\t\tthis.arrived_order = null\n\t\t\tthis.ready = false\n\t\t\tthis.payer_selected = null\n\t\t\tthis.payer_is_client = 'no'\n\t\t\ttry {\n\t\t\t\tvar url = this.$G.api_url + \"/api\"\n\t\t\t\tconst [r_request, r_organisations] = await Promise.all([\n\t\t\t\t\taxios.get(url + \"/pyynnot/\" + this.$route.params.id),\n\t\t\t\t\taxios.get(url + \"/organisaatiot\")\n\t\t\t\t]);\n\n\t\t\t\tthis.request = r_request.data\n\t\t\t\tif(this.request.tilaus_saatu) {\n\t\t\t\t\tthis.tilaus_uusittavissa = this.request.tilaus_saatu.uusittavissa\n\t\t\t\t\tthis.tilaus_info = this.request.tilaus_saatu.info\n\t\t\t\t}\n\n\t\t\t\tif(!this.request.tilaajan_sahkoposti) {\n\t\t\t\t\tthis.request.tilaajan_sahkoposti = 'VIRHEELLINEN TILAAJA'\n\t\t\t\t}\n\n\t\t\t\tthis.title = this.request.teoksen_tiedot\n\t\t\t\tthis.orders = this.request.tilaukset\n\t\t\t\tthis.note = this.request.huomautuksia\n\t\t\t\tthis.organisations = r_organisations.data\n\t\t\t\tif(this.request.maksaja_varmistettu && this.request.maksaja_varmistettu._id)\n\t\t\t\t\tthis.payer_selected =  this.request.maksaja_varmistettu._id\n\t\t\t\tif(this.request.maksaja === 'asiakas') this.payer_is_client = 'yes'\n\t\t\t\tthis.setLoanLibrary()\n\n\t\t\t\t// external client\n\t\t\t\tif(this.request.tilaajan_sahkoposti.includes(\"_external_\")) {\n\t\t\t\t\tthis.external_client.sukunimi = this.request.sukunimi\n\t\t\t\t\tthis.external_client.etunimi = this.request.etunimi\n\t\t\t\t\tthis.external_client.kirjastokortin_numero = this.request.kirjastokortin_numero\n\t\t\t\t\tthis.client_query = this.request.sukunimi\n\t\t\t\t\tthis.searchClients()\n\t\t\t\t}\n\n\t\t\t\tthis.ready = true\n\t\t\t\tif(this.request.status === 'uusi') {\n\t\t\t\t\tthis.reserve(this.request._id)\n\t\t\t\t}\n\t\t\t} catch(e) {\n\t\t\t\talert(e)\n\t\t\t\tthis.error = \"virhe\"\n\t\t\t\tthis.ready = true\n\t\t\t}\n\t\t},\n\t\tgetError(e, msg) {\n\t\t\tif(e.response && e.response.data && e.response.data.error) return e.response.data.error\n\t\t\telse return msg\n\t\t}\n\t},\n\n\tmounted() {\n\t\tthis.loadData()\n\t}\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WERequest.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WERequest.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WERequest.vue?vue&type=template&id=73c88aa6&scoped=true&\"\nimport script from \"./WERequest.vue?vue&type=script&lang=js&\"\nexport * from \"./WERequest.vue?vue&type=script&lang=js&\"\nimport style0 from \"./WERequest.vue?vue&type=style&index=0&id=73c88aa6&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"73c88aa6\",\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/logo.cf45db45.svg\";","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('b-container',{attrs:{\"fluid\":\"\"}},[_c('h1',[_vm._v(\"Asiakkaat\")]),(!_vm.ready)?_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"lataan...\")]):_vm._e(),(!_vm.current_client)?_c('b-card',{attrs:{\"title\":\"haku\"}},[_c('b-row',{staticClass:\"my-1\"},[_c('b-col',{attrs:{\"sm\":\"4\"}},[_c('b-form-input',{attrs:{\"id\":\"input-default\",\"placeholder\":\"hae sukunimellä tai sähköpostilla\"},nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.search.apply(null, arguments)}},model:{value:(_vm.search_term),callback:function ($$v) {_vm.search_term=$$v},expression:\"search_term\"}}),_c('b-button',{on:{\"click\":_vm.search}},[_vm._v(\"hae\")])],1)],1)],1):_vm._e(),(_vm.search_result.length !== 0 && !_vm.current_client)?_c('div',[_c('b-table',{attrs:{\"items\":_vm.search_result,\"fields\":_vm.fields},scopedSlots:_vm._u([{key:\"cell(sahkoposti)\",fn:function(data){return [_c('b',{staticClass:\"text-info\"},[_vm._v(_vm._s(data.value.join(', ')))])]}},{key:\"cell(sukunimi)\",fn:function(data){return [_c('b-link',{attrs:{\"to\":'/asiakkaat/' + data.item._id}},[_vm._v(_vm._s(data.value))])]}}],null,false,1301209900)})],1):_vm._e(),(_vm.current_client)?_c('div',[(!_vm.edit)?_c('b-card',{attrs:{\"title\":_vm.current_client.sukunimi + ', ' + _vm.current_client.etunimi,\"header-bg-variant\":\"dark\"}},[_c('table',_vm._l((_vm.fields),function(field){return _c('tr',{key:field.key},[_c('td',{staticStyle:{\"min-width\":\"200px\"}},[_vm._v(_vm._s(field.label))]),(field.key == 'sahkoposti')?_c('td',{staticStyle:{\"min-width\":\"350px\"}},_vm._l((_vm.current_client.sahkoposti),function(s){return _c('div',{key:s},[_c('a',{attrs:{\"href\":'mailto:' + s}},[_vm._v(_vm._s(s))])])}),0):_c('td',[_c('b',[_vm._v(_vm._s(_vm.current_client[field.key]))])])])}),0),(!_vm.edit)?_c('b-icon',{staticClass:\"float-right pointer\",attrs:{\"icon\":\"pen\",\"variant\":\"primary\"},on:{\"click\":function($event){_vm.edit = !_vm.edit}}},[_vm._v(\"muokkaa\")]):_vm._e()],1):_vm._e(),(_vm.edit)?_c('b-card',{attrs:{\"title\":_vm.current_client.sukunimi,\"header-bg-variant\":\"dark\"}},[_c('table',{staticClass:\"table table-striped\"},_vm._l((_vm.fields),function(field){return _c('tr',{key:field.key},[_c('td',{staticStyle:{\"min-width\":\"200px\"}},[_vm._v(_vm._s(field.label))]),(field.key == 'sahkoposti')?_c('td',{staticStyle:{\"min-width\":\"350px\"}},[(_vm.current_client[field.key] && _vm.current_client[field.key][0])?_c('b-form-input',{model:{value:(_vm.current_client[field.key][0]),callback:function ($$v) {_vm.$set(_vm.current_client[field.key], 0, $$v)},expression:\"current_client[field.key][0]\"}}):_vm._e(),(_vm.current_client[field.key])?_c('b-form-input',{model:{value:(_vm.current_client[field.key][1]),callback:function ($$v) {_vm.$set(_vm.current_client[field.key], 1, $$v)},expression:\"current_client[field.key][1]\"}}):_vm._e()],1):(field.key == 'ulkopuolinen')?_c('td',[_c('b-form-checkbox',{attrs:{\"id\":\"checkbox-1\",\"name\":\"checkbox-1\"},model:{value:(_vm.current_client.ulkopuolinen),callback:function ($$v) {_vm.$set(_vm.current_client, \"ulkopuolinen\", $$v)},expression:\"current_client.ulkopuolinen\"}})],1):_c('td',{staticStyle:{\"min-width\":\"350px\"}},[_c('b-form-input',{model:{value:(_vm.current_client[field.key]),callback:function ($$v) {_vm.$set(_vm.current_client, field.key, $$v)},expression:\"current_client[field.key]\"}})],1)])}),0),_c('b-container',[_c('b-button',{staticClass:\"float-right\",staticStyle:{\"margin-left\":\"20px\"},attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){return _vm.saveForm()}}},[_vm._v(\"tallenna\")]),_c('b-button',{staticClass:\"float-right\",on:{\"click\":function($event){_vm.edit = !_vm.edit}}},[_vm._v(\"peru\")])],1)],1):_vm._e(),_c('b-link',{attrs:{\"to\":'/asiakkaat'}},[_vm._v(\"takaisin hakuun\")]),_c('h2',{staticStyle:{\"margin-top\":\"40px\"}},[_vm._v(_vm._s(_vm.laina_title))]),_c('b-form-checkbox',{attrs:{\"id\":\"checkbox-1\",\"name\":\"show-all-requests\"},model:{value:(_vm.show_all_requests),callback:function ($$v) {_vm.show_all_requests=$$v},expression:\"show_all_requests\"}},[_vm._v(\" näytä kaikki pyynnöt \")]),_c('b-table',{attrs:{\"items\":_vm.requests,\"fields\":_vm.request_fields},scopedSlots:_vm._u([{key:\"cell(tiedot)\",fn:function(data){return [_c('div',{staticStyle:{\"min-width\":\"250px\"}},[_c('b-link',{attrs:{\"to\":'/pyynnot/' + data.item._id}},[_vm._v(_vm._s(data.item.teoksen_tiedot))])],1)]}},{key:\"cell(kirjasto)\",fn:function(data){return [(data.item.tilaus_saatu)?_c('b-link',{attrs:{\"to\":'/kirjastot/' + data.item.tilaus_saatu.kirjasto_id}},[_vm._v(_vm._s(data.item.tilaus_saatu.kirjaston_nimi))]):_vm._e()]}},{key:\"cell(tilaus_saatu.pvm_erapaiva)\",fn:function(data){return [_c('DueDate',{attrs:{\"item\":data.item}})]}},{key:\"cell(_id)\",fn:function(data){return [_vm._v(\" \"+_vm._s(data.value)+\" \")]}}],null,false,2355413550)})],1):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template >\n\t<b-container fluid>\n\t\t<h1>Asiakkaat</h1>\n\n\t\t<div v-if=\"!ready\" class=\"alert alert-info\">lataan...</div>\n\n\t\t<!-- display search -->\n\t\t<b-card title=\"haku\" v-if=\"!current_client\">\n\t\t  <b-row class=\"my-1\">\n\t\t\t<b-col sm=\"4\">\n\t\t\t  <b-form-input @keydown.enter.native=\"search\" v-model=\"search_term\" id=\"input-default\" placeholder=\"hae sukunimellä tai sähköpostilla\"></b-form-input>\n\t\t\t  <b-button @click=\"search\">hae</b-button>\n\t\t\t</b-col>\n\t\t  </b-row>\n\t\t</b-card>\n\n\t\t<!-- display search result -->\n\t\t<div v-if=\"search_result.length !== 0 && !current_client\">\n\t\t\t\t<b-table :items=\"search_result\" :fields=\"fields\">\n\t\t\t\t\t<template v-slot:cell(sahkoposti)=\"data\">\n\t\t\t\t\t\t<b class=\"text-info\">{{ data.value.join(', ') }}</b>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-slot:cell(sukunimi)=\"data\">\n\t\t\t\t\t\t\t<b-link :to=\"'/asiakkaat/' + data.item._id\">{{data.value}}</b-link>\n\t\t\t\t\t</template>\n\t\t\t\t</b-table>\n\t\t</div>\n\n\t\t<!-- display individual item -->\n\t\t<div v-if=\"current_client\">\n\n\t\t\t<b-card v-if=\"!edit\" :title=\"current_client.sukunimi + ', ' + current_client.etunimi\" header-bg-variant=\"dark\">\n\n\t\t\t\t<table>\n\t\t\t\t\t<tr v-for=\"field in fields\" :key=\"field.key\">\n\t\t\t\t\t\t<td style=\"min-width:200px\">{{field.label}}</td>\n\t\t\t\t\t\t<td v-if=\"field.key == 'sahkoposti'\" style=\"min-width:350px\" >\n\n\t\t\t\t\t\t\t<div v-for=\"s in current_client.sahkoposti\" :key=\"s\">\n\t\t\t\t\t\t\t\t<a :href=\"'mailto:' + s\">{{s}}</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td v-else><b>{{current_client[field.key]}}</b></td>\n\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\n\t\t\t\t<b-icon v-if=\"!edit\" @click=\"edit = !edit\" icon=\"pen\" class=\"float-right pointer\" variant=\"primary\">muokkaa</b-icon>\n\n\t\t\t</b-card>\n\n\t\t<!-- edit form -->\n\t\t<b-card v-if=\"edit\" :title=\"current_client.sukunimi\" header-bg-variant=\"dark\">\n\t\t\t<table class=\"table table-striped\">\n\t\t\t\t<tr v-for=\"field in fields\" :key=\"field.key\">\n\t\t\t\t\t<td style=\"min-width:200px\">{{field.label}}</td>\n\t\t\t\t\t<td v-if=\"field.key == 'sahkoposti'\" style=\"min-width:350px\" >\n\t\t\t\t\t\t<b-form-input v-if=\"current_client[field.key] && current_client[field.key][0]\" v-model=\"current_client[field.key][0]\"></b-form-input>\n\t\t\t\t\t\t<b-form-input v-if=\"current_client[field.key]\" v-model=\"current_client[field.key][1]\"></b-form-input>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td v-else-if=\"field.key == 'ulkopuolinen'\">\n\t\t\t\t\t\t<b-form-checkbox\n\t\t\t\t\t\t  id=\"checkbox-1\"\n\t\t\t\t\t\t  v-model=\"current_client.ulkopuolinen\"\n\t\t\t\t\t\t  name=\"checkbox-1\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t</b-form-checkbox>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td v-else style=\"min-width:350px\" ><b-form-input v-model=\"current_client[field.key]\"></b-form-input></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\t\t\t<b-container>\n\n\n\t\t\t<b-button  @click=\"saveForm()\" class=\"float-right\" variant=\"primary\" style=\"margin-left:20px\">tallenna</b-button>\n\t\t\t<b-button  @click=\"edit = !edit\" class=\"float-right\" >peru</b-button>\n\t\t\t</b-container>\n\t\t</b-card>\n\n\n\t\t\t<b-link :to=\"'/asiakkaat'\">takaisin hakuun</b-link>\n\n\t\t\t<h2 style=\"margin-top:40px\">{{laina_title}}</h2>\n\t\t\t<b-form-checkbox\n\t\t\t\t  id=\"checkbox-1\"\n\t\t\t\t  v-model=\"show_all_requests\"\n\t\t\t\t  name=\"show-all-requests\"\n\t\t\t\t>\n\t\t\t\t  näytä kaikki pyynnöt\n\t\t\t</b-form-checkbox>\n\t\t\t<b-table :items=\"requests\" :fields=\"request_fields\">\n\n\t\t\t\t<template v-slot:cell(tiedot)=\"data\">\n\t\t\t\t\t<div style=\"min-width:250px\">\n\t\t\t\t\t\t<b-link :to=\"'/pyynnot/' + data.item._id\">{{data.item.teoksen_tiedot}}</b-link>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\n\t\t\t\t<template v-slot:cell(kirjasto)=\"data\">\n\t\t\t\t\t<b-link v-if=\"data.item.tilaus_saatu\" :to=\"'/kirjastot/' + data.item.tilaus_saatu.kirjasto_id\">{{data.item.tilaus_saatu.kirjaston_nimi}}</b-link>\n\n\t\t\t\t</template>\n\n\t\t\t\t<template v-slot:cell(tilaus_saatu.pvm_erapaiva)=\"data\">\n\t\t\t\t\t<DueDate :item=\"data.item\"></DueDate>\n\t\t\t\t</template>\n\n\t\t\t\t<template v-slot:cell(_id)=\"data\">\n\t\t\t\t\t{{data.value}}\n\t\t\t\t</template>\n\t\t\t</b-table>\n\n\t\t</div>\n\n\t</b-container>\n\n</template>\n\n\n<script>\nimport DueDate from './WEDueDateDisplay.vue'\nexport default {\n\tname: 'WEClient',\n\tcomponents: {DueDate},\n\tdata: function() {\n\t\treturn {\n\t\t\tsearch_term: '',\n\t\t\tsearch_result: [],\n\t\t\trequests: [],\n\t\t\tall_requests: [],\n\t\t\tshow_all_requests: false,\n\t\t\tcurrent_client: null,\n\t\t\tready: true,\n\t\t\tedit: false,\n\t\t\tlaina_title: 'lainassa olevat kaukolainat',\n\t\t\tlaina_button_title: 'näytä kaikki kaukolainapyynnöt',\n\t\t\tfields: [\n\t\t\t\t{key: 'sukunimi', label:'sukunimi'},\n\t\t\t\t{key: 'etunimi', label:'etunimi'},\n\t\t\t\t{key: 'sahkoposti', label:'sähköposti'},\n\t\t\t\t{key: 'kirjastokortin_numero', label:'kirjastokortti'},\n\t\t\t\t{key: 'puhelin', label:'puhelin'},\n\t\t\t\t{key: 'osoite', label:'osoite'},\n\t\t\t\t{key: 'huomio', label:'lisätieto'},\n\t\t\t\t{key: 'ulkopuolinen', label:'ulkopuolinen asiakas'}\n\t\t\t],\n\t\t\trequest_fields: [\n\t\t\t\t{key: '_id', label: 'tunniste'},\n\t\t\t\t{key: 'teos_on', label: 'tyyppi'},\n\t\t\t\t{key: 'tiedot'},\n\t\t\t\t{key: 'kirjasto', label: 'kirjasto'},\n\t\t\t\t{key: 'maksu', label: 'maksu'},\n\t\t\t\t{key: 'maksaja', label: 'maksaja'},\n\t\t\t\t{key: 'status'},\n\t\t\t\t{key: 'tilaus_saatu.pvm_erapaiva', label: 'eräpäivä'},\n\t\t\t]\n\t\t}\n\t},\n\n\twatch: {\n\t\tshow_all_requests: function() {\n\t\t\tthis.showAllRequests()\n\t\t},\n\t\t// because of <keep-alive>, route changes must check that we are in correct path\n\t\t$route(to, from) {\n\t\t\tif(to.path.includes('/asiakkaat')) {\n\t\t\t\tif(this.$route.params.id) {\n\t\t\t\t\tthis.loadData()\n\t\t\t\t\t// if we hit back button *while in* client view, then we reset current client\n\t\t\t\t} else if(from.path.includes('/asiakkaat')) {\n\t\t\t\t\tthis.current_client = null\n\t\t\t\t\t// if we came from somewhere else with current set, then re-route so that URL matches current id\n\t\t\t\t} else {\n\t\t\t\t\tif(this.current_client) this.$router.replace({path:'/asiakkaat/' + this.current_client._id})\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tmethods: {\n\t\tsaveForm() {\n\t\t\tdelete this.current_client._id // do not try to re-save id\n\t\t\tthis.current_client.sahkoposti = this.current_client.sahkoposti.filter(x => x !='') // delete empty emails\n\t\t\tfetch(this.$G.api_url + \"/api/asiakkaat/\" + this.$route.params.id, {method:'PUT', body: JSON.stringify(this.current_client)})\n\t\t\t.then(response => { return response.json()})\n\t\t\t.then(json => {\n\t\t\t\tthis.loadData()\n\t\t\t})\n\t\t\t.catch(data => {\n\t\t\t\talert('Talletus ei onnistunut' + data)\n\t\t\t\tconsole.log('error' + data)\n\t\t\t})\n\t\t},\n\t\tloadData() {\n\t\t\tif(this.$route.params.id) {\n\t\t\t\tthis.ready = false\n\t\t\t\tthis.edit = false\n\t\t\t\tthis.current_client = null\n\t\t\t\tfetch(this.$G.api_url + \"/api/asiakkaat/\" + this.$route.params.id)\n\t\t\t\t.then(response => { return response.json()})\n\t\t\t\t.then(json => {\n\t\t\t\t\tthis.current_client = json\n\t\t\t\t\tthis.loadRelated()\n\t\t\t\t})\n\t\t\t\t.catch(data => {console.log('error' + data)})\n\t\t\t}\n\t\t},\n\n\t\tshowAllRequests() {\n\t\t\tif(this.show_all_requests) {\n\t\t\t\tthis.requests = this.all_requests\n\t\t\t\tthis.laina_title = 'kaikki kaukolainapyynnöt'\n\t\t\t\tthis.laina_button_title = 'näytä vain lainassa olevat'\n\t\t\t} else {\n\t\t\t\tthis.requests = this.sortByStatus(this.all_requests)\n\t\t\t\tthis.laina_title = 'lainassa olevat kaukolainat'\n\t\t\t\tthis.laina_button_title = 'näytä kaikki kaukalainapyynnöt'\n\t\t\t}\n\t\t},\n\n\t\tsortByStatus(items) {\n\t\t\tvar out = []\n\t\t\tfor(var item of items) {\n\t\t\t\tif(item.status === 'lainassa') out.push(item)\n\t\t\t}\n\t\t\treturn out\n\t\t},\n\n\t\tloadRelated() {\n\t\t\tfetch(this.$G.api_url + \"/api/pyynnot/?sort=tilaus_saatu.pvm_erapaiva&reverse=1&tilaaja=\" + this.current_client._id)\n\t\t\t.then(response => { return response.json()})\n\t\t\t.then(json => {\n\t\t\t\tthis.all_requests = json\n\t\t\t\tthis.requests = this.sortByStatus(json)\n\t\t\t\tthis.ready = true\n\t\t\t})\n\t\t\t.catch(data => {console.log('error' + data)})\n\t\t},\n\n\t\tasync search() {\n\t\t\tthis.current_client= null\n\t\t\tif(this.search_term !== '') {\n\t\t\t\t//if(!this.search_term.includes('*')) this.search_term = this.search_term + '*'\n\t\t\t\tvar search = 'search=' + this.search_term\n\t\t\t\t//if(this.search_term.includes('@')) search = 'sahkoposti=' + this.search_term\n\n\t\t\t\tvar result = await fetch(this.$G.api_url + \"/api/asiakkaat?\" + search)\n\t\t\t\tthis.search_result = await result.json()\n\t\t\t}\n\t\t}\n\t},\n\n\tmounted() {\n\t\tthis.loadData()\n\t}\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WEClient.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WEClient.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WEClient.vue?vue&type=template&id=19f14bac&\"\nimport script from \"./WEClient.vue?vue&type=script&lang=js&\"\nexport * from \"./WEClient.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/arkistoitu_vino.c22fb25a.png\";"],"sourceRoot":""}