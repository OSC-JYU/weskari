{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?4a62","webpack:///./src/App.vue?0e02","webpack:///src/App.vue","webpack:///./src/App.vue?60d0","webpack:///./src/App.vue?315a","webpack:///./src/components/WEDueDateDisplay.vue?7daa","webpack:///src/components/WEDueDateDisplay.vue","webpack:///./src/components/WEDueDateDisplay.vue?5699","webpack:///./src/components/WEDueDateDisplay.vue","webpack:///./src/main.js","webpack:///./src/components/WERequests.vue?946e","webpack:///./src/web.js","webpack:///./src/components/WEStatistics.vue?4909","webpack:///src/components/WEStatistics.vue","webpack:///./src/components/WEStatistics.vue?4271","webpack:///./src/components/WEStatistics.vue","webpack:///./src/components/WEMessage.vue?5a47","webpack:///src/components/WEMessage.vue","webpack:///./src/components/WEMessage.vue?924d","webpack:///./src/components/WEMessage.vue","webpack:///./src/components/WEMain.vue?c0aa","webpack:///./src/components/WERequests.vue?7ec1","webpack:///src/components/WERequests.vue","webpack:///./src/components/WERequests.vue?6e6a","webpack:///./src/components/WERequests.vue","webpack:///src/components/WEMain.vue","webpack:///./src/components/WEMain.vue?5eaa","webpack:///./src/components/WEMain.vue","webpack:///./src/components/WELoans.vue?0623","webpack:///src/components/WELoans.vue","webpack:///./src/components/WELoans.vue?3cd8","webpack:///./src/components/WELoans.vue","webpack:///./src/components/WEOrganisation.vue?b19e","webpack:///src/components/WEOrganisation.vue","webpack:///./src/components/WEOrganisation.vue?5ae4","webpack:///./src/components/WEOrganisation.vue","webpack:///./src/components/WERequest.vue?6080","webpack:///./src/components/WELibrary.vue?69b4","webpack:///src/components/WELibrary.vue","webpack:///./src/components/WELibrary.vue?36a0","webpack:///./src/components/WELibrary.vue","webpack:///./src/components/WERequest.vue?a2a6","webpack:///./src/components/WEOrderForm.vue?6629","webpack:///src/components/WEOrderForm.vue","webpack:///./src/components/WEOrderForm.vue?d9ee","webpack:///./src/components/WEOrderForm.vue","webpack:///src/components/WERequest.vue","webpack:///./src/components/WERequest.vue?d04a","webpack:///./src/components/WERequest.vue","webpack:///./src/assets/images/logo.svg","webpack:///./src/components/WEClient.vue?e3eb","webpack:///src/components/WEClient.vue","webpack:///./src/components/WEClient.vue?bb21","webpack:///./src/components/WEClient.vue","webpack:///./src/assets/images/arkistoitu_vino.png"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","path","_v","scopedSlots","_u","fn","_s","$G","user","proxy","error","_e","staticRenderFns","component","item","staticStyle","isOverdue","tilaus_saatu","pvm_erapaiva","formatDate","uusittavissa","info","Vue","use","BootstrapVue","IconsPlugin","VueRouter","router","base","__dirname","routes","WEMain","WERequest","WEOrganisation","WEClient","WELibrary","WEMessage","WELoanSearch","WEStatistics","config","productionTip","shared","api_url","login","methods","getStatus","status","dd","Date","now","getTime","date","reverse","comb","out","isFinite","getFullYear","getMonth","toString","padStart","getDate","join","getDateFromUUID","uuid","parseInt","substring","formatted","Intl","DateTimeFormat","format","getToday","plusMonth","separator","today","setMonth","renderBreaks","text","splitter","split","getInfo","request","lang","lang_info","teoksen_tiedot","computed","local","location","hostname","install","h","App","$mount","web","api","getError","e","msg","response","updateRequest","request_id","update","url","axios","put","catch","getLoanCount","on","$event","search","year","current_year","stats","fields","ready","search_result","current","_id","domProps","saate","directives","rawName","expression","target","composing","$set","loadData","saveForm","_l","field","model","new_obj","callback","$$v","new_requests","tilaaja","sukunimi","etunimi","sahkoposti","reserved_requests","ordered_requests","loan_count","getOverdueLoans","nativeOn","type","indexOf","_k","keyCode","arguments","search_term","statuses","kirjasto_id","overdue","nimi","requests","request_fields","search_lyhenne","fields_search","lyhenne","getLink","label","loadArchive","archived","setReturned","openKarhuRequest","show","teos_on","convertToBook","show_modal_cancel_archive","openCancelRequest","show_modal_title","isExternal","searchClients","client_query","clients_result","client_fields","openJoinClient","show_modal_external","mista_loysit_julkaisun_tiedot","hintakatto","maksaja_varmistettu","maksaja","laitos","projekti","kustannuspaikka","maksaja_info","show_modal_payer","huomautuksia","show_modal_note","tarvitaan_viimeistaan","peruutuksen_syy","o_retudate_has_value","pvm_palautettu","karhut","karhu","pvm_saapunut","kirjaston_nimi","show_modal_loan_date","maksu","$root","$emit","viesti","orders","order_fields","recdate","replace","openArrived","setNotAvailable","primaryBG","primaryText","setLoanDate","new_loan_date","setDueDate","tilaus_uusittavissa","tilaus_info","updateTitle","title","sendDueNotice","show_modal_due_notice","due_notice","setCancelled","show_modal_cancel_request","laheta_peruutusilmoitus","cancel_reason","setNonArchived","setArrived","show_modal_arrived","arrived_order","laheta_saapumisilmoitus","setNote","note","setPayer","cancelPayer","payer_is_client","organisations","payer_selected","payer_info","saveExternalClient","external_client","saveJoinClient","show_modal_join_client","join_client","kirjastokortin_numero","add_sahkoposti","libraries","selected","lomake","saatteet","message_id","message","sendOrder","send_email","current_client","edit","laina_title","show_all_requests"],"mappings":"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mBA,OAnBA,QAqBA,aACA,mBAtBA,6DAyBA,aACA,0BACA,qBA3BA,6DAgCA,aApDA,WAoDA,WACA,wDACA,qCACA,kBACA,aACA,cAEA,8CAGA,SA9DA,WA8DA,WACA,cACA,kDACA,qCACA,kBACA,cACA,iBACA,cAEA,yCAIA,QAvHA,WAwHA,mBC9MqV,I,YCOjVE,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,EAAAA,E,gCCmjBf,GACA,kBACA,0CACA,gBACA,OACA,aACA,YACA,gBACA,SACA,iBACA,kBACA,WACA,oBACA,cACA,qBACA,UACA,oBACA,mBACA,8BACA,8BACA,iBACA,SACA,WACA,QACA,QACA,WACA,sBACA,oBACA,wBACA,yBACA,uBACA,mBACA,oBACA,6BACA,6BACA,0BACA,iBACA,cACA,iBACA,mBACA,qBACA,oBACA,oBACA,0BACA,eACA,QACA,uBACA,sBACA,wDACA,kBAEA,cACA,uBACA,8BACA,iCACA,sCACA,kBAEA,eACA,iBACA,gBACA,sCACA,mCAIA,iBAGA,OACA,OADA,SACA,KACA,sBACA,gBAEA,oBAKA,SACA,eADA,SACA,GACA,+BACA,oBAGA,WANA,SAMA,OACA,WACA,SACA,MACA,kBACA,uCACA,wBACA,oDACA,+CACA,sBACA,WAEA,EAGA,WAIA,WAzBA,WA0BA,yFAKA,eA/BA,SA+BA,8KACA,sBACA,8BACA,KAEA,kDACA,mDANA,kBAQA,aARA,qBASA,iCACA,gDACA,gEAXA,UAaA,aAbA,eAcA,aACA,4BAfA,qDAiBA,2EAjBA,6DAsBA,mBArDA,SAqDA,gLACA,mBACA,2GAFA,uBAGA,wCAHA,iCAMA,yEANA,kBAQA,WARA,cAQA,EARA,OASA,qDACA,kDAVA,UAWA,aAXA,gCAYA,OAZA,WAYA,EAZA,OAcA,YAdA,kCAgBA,iCAhBA,UAiBA,8BAjBA,eAiBA,EAjBA,OAkBA,qBAlBA,UAmBA,mBAnBA,8DAqBA,YArBA,QAwBA,yBACA,aAzBA,qDA2BA,YACA,kBA5BA,qEAgCA,YArFA,WAsFA,+DAGA,SAzFA,SAyFA,0KACA,oFAEA,2EAHA,SAMA,kDANA,SAOA,aAPA,cAQA,aARA,qDAWA,YAXA,6DAeA,YAxGA,WAwGA,iLAEA,kEAFA,OAGA,aAHA,kDAKA,YALA,2DASA,eAjHA,WAiHA,WACA,wDACA,0BACA,aACA,kBACA,gBAEA,mBACA,mEAIA,YA7HA,SA6HA,GACA,qBACA,0DACA,4BAGA,iBAnIA,WAmIA,uLAEA,qDAFA,OAEA,EAFA,OAGA,6BACA,yEACA,yEACA,kHACA,kHAPA,qDASA,oCATA,QAYA,2BAZA,6DAeA,kBAlJA,WAkJA,WACA,qEACA,kBACA,gCACA,+EACA,kFAEA,0EACA,mCAGA,cA7JA,WA6JA,gKACA,oBACA,kDACA,aACA,kBACA,gBAEA,mBACA,mEARA,8CAYA,QAzKA,SAyKA,cACA,mBACA,gBACA,+BACA,wDACA,aACA,kBACA,aACA,qBACA,gBAEA,mBACA,2CACA,UACA,iBAIA,WA3LA,WA4LA,oHAGA,cA/LA,SA+LA,4KACA,mBACA,aACA,wBACA,2DAJA,kBAMA,cANA,cAOA,aACA,2BACA,aATA,qDAWA,aACA,KACA,2EACA,SAdA,6DAkBA,aAjNA,WAiNA,WACA,gBACA,gGACA,qEACA,aACA,kBACA,aACA,gBAEA,mBACA,8BACA,aACA,cAIA,YAjOA,SAiOA,cACA,gBACA,mBACA,OACA,2DACA,sBACA,uCAEA,oEACA,aACA,kBACA,aACA,0BACA,gBAEA,mBACA,aACA,6DAIA,YAtPA,WAsPA,WACA,gBACA,8DACA,oEAEA,aACA,kBACA,aACA,gBAEA,mBACA,aACA,mDAIA,gBAtQA,SAsQA,cACA,gBAEA,IAEA,yFACA,cACA,kBACA,aACA,gBAEA,mBACA,aAEA,8CAIA,WAxRA,SAwRA,cACA,mBACA,gBAEA,IACA,GACA,oEACA,+BACA,sDAEA,wGACA,aACA,kBACA,aACA,wBACA,gBAEA,mBACA,aAEA,8CAIA,UAhTA,SAgTA,GAEA,mBACA,0BAEA,QArTA,SAqTA,8KACA,iCADA,SAEA,WAFA,UAEA,EAFA,OAGA,UACA,wCAJA,wBAKA,gDALA,SAMA,aANA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","file":"js/app.3559b08d.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',[_c('b-navbar',{staticClass:\"nav-weskari\",attrs:{\"toggleable\":\"lg\",\"type\":\"dark\"}},[_c('img',{staticClass:\"mr-3\",attrs:{\"src\":require(\"@/assets/images/logo.svg\"),\"height\":\"40px\"}}),_c('b-navbar-brand',{staticClass:\"brand\",attrs:{\"to\":{ path: '/'}}},[_vm._v(\"WESKARI \")]),_c('b-navbar-toggle',{attrs:{\"target\":\"nav-collapse\"}}),_c('b-collapse',{attrs:{\"id\":\"nav-collapse\",\"is-nav\":\"\"}},[_c('b-navbar-nav',[_c('b-nav-item',{attrs:{\"to\":'/lainat'}},[_vm._v(\"Lainat\")]),_c('b-nav-item',{attrs:{\"to\":'/asiakkaat'}},[_vm._v(\"Asiakkaat\")]),_c('b-nav-item',{attrs:{\"to\":'/kirjastot'}},[_vm._v(\"Kirjastot\")]),_c('b-nav-item',{attrs:{\"to\":'/organisaatiot'}},[_vm._v(\"Organisaatiot\")]),_c('b-nav-item',{attrs:{\"to\":'/saatteet'}},[_vm._v(\"Saatteet\")]),_c('b-nav-item',{attrs:{\"to\":'/tilastot'}},[_vm._v(\"Tilastot\")])],1),_c('b-navbar-nav',{staticClass:\"ml-auto\"},[_c('b-nav-item-dropdown',{attrs:{\"right\":\"\"},scopedSlots:_vm._u([{key:\"button-content\",fn:function(){return [_c('em',[_vm._v(_vm._s(_vm.$G.user))])]},proxy:true}])},[_c('b-dropdown-item',{attrs:{\"href\":\"/Shibboleth.sso/Logout\"}},[_vm._v(\"kirjaudu ulos\")])],1)],1)],1)],1)],1),(_vm.$G.login)?_c('b-container',{attrs:{\"fluid\":\"\"}},[_c('keep-alive',{attrs:{\"include\":\"WELoans,WELibrary,WEClient\"}},[(!_vm.error)?_c('router-view',{staticClass:\"view\"}):_vm._e()],1),(_vm.error)?_c('div',{staticClass:\"alert alert-danger\"},[_vm._v(_vm._s(_vm.error))]):_vm._e()],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<style>\n.pointer {\n\tcursor: pointer;\n}\n.nav-weskari {\n\tborder-bottom: 0.1mm solid #002957;\n\tbackground-color: #002957;\n\tmargin-bottom:20px;\n}\n.brand {\n\tmargin-left:10px\n}\n</style>\n<template>\n\n\n  <div id=\"app\">\n\n\n\t\t<div>\n\t\t  <b-navbar toggleable=\"lg\" type=\"dark\" class=\"nav-weskari\">\n\t\t\t<img class=\"mr-3\" src=\"@/assets/images/logo.svg\" height=\"40px\">\n\t\t\t<b-navbar-brand :to=\"{ path: '/'}\" class=\"brand\">WESKARI </b-navbar-brand>\n\n\t\t\t<b-navbar-toggle target=\"nav-collapse\"></b-navbar-toggle>\n\n\t\t\t<b-collapse id=\"nav-collapse\" is-nav>\n\t\t\t  <b-navbar-nav>\n\t\t\t\t<b-nav-item :to=\"'/lainat'\">Lainat</b-nav-item>\n\t\t\t\t<b-nav-item :to=\"'/asiakkaat'\">Asiakkaat</b-nav-item>\n\t\t\t\t<b-nav-item :to=\"'/kirjastot'\">Kirjastot</b-nav-item>\n\t\t\t\t<b-nav-item :to=\"'/organisaatiot'\">Organisaatiot</b-nav-item>\n\t\t\t\t<b-nav-item :to=\"'/saatteet'\">Saatteet</b-nav-item>\n\t\t\t\t<b-nav-item :to=\"'/tilastot'\">Tilastot</b-nav-item>\n\t\t\t  </b-navbar-nav>\n\t\t\t  <!-- Right aligned nav items -->\n\t\t\t <!-- <b-badge class=\"alert alert-danger float-right\">testiversio!</b-badge>-->\n\t\t\t  <b-navbar-nav class=\"ml-auto\">\n\n\n\t\t\t\t<b-nav-item-dropdown right>\n\t\t\t\t  <!-- Using 'button-content' slot -->\n\t\t\t\t  <template v-slot:button-content>\n\t\t\t\t\t<em>{{$G.user}}</em>\n\t\t\t\t  </template>\n\t\t\t\t  <b-dropdown-item href=\"/Shibboleth.sso/Logout\">kirjaudu ulos</b-dropdown-item>\n\t\t\t\t</b-nav-item-dropdown>\n\t\t\t  </b-navbar-nav>\n\t\t\t</b-collapse>\n\t\t  </b-navbar>\n\n\t\t</div>\n\n\n\n\n\t\t<!-- ROUTE VIEW (main) -->\n\t\t<b-container fluid v-if=\"$G.login\" >\n\t\t\t<keep-alive include=\"WELoans,WELibrary,WEClient\">\n\t\t\t\t<router-view class=\"view\" v-if=\"!error\"></router-view>\n\t\t\t</keep-alive>\n\t\t\t<div class=\"alert alert-danger\" v-if=\"error\">{{error}}</div>\n\t\t</b-container>\n\n\n\n  </div>\n</template>\n\n\n<script>\n\n\nexport default {\n\tname: 'app',\n\tdata: function() {\n\t\treturn {\n\t\t\terror: null,\n\t\t\tuser: null,\n\t\t\tlogging: false,\n\t\t\tintervalID: null\n\t\t}\n\t},\n\tmethods: {\n\t\tlogin: function() {\n\n\t\t\tconsole.log('trying login...')\n\t\t\tfetch(this.$G.api_url + \"/api/auth\", {credentials: \"include\"})\n\t\t\t.then(response => {\n\t\t\t\tif(!response.ok) throw({msg: 'session terminated'})\n\t\t\t\treturn response\n\t\t\t})\n\t\t\t.then(response => response.json())\n\t\t\t.then(data => {\n\t\t\t\tthis.$G.user = data.shibboleth.user\n\t\t\t})\n\t\t\t.catch(e => {\n\t\t\t\tconsole.log(e)\n\t\t\t\tif(e.msg && e.msg == 'session terminated')\n\t\t\t\t\tthis.error = 'Kirjautuminen vanheni. Lataa sivu uudestaan.'\n\t\t\t\telse\n\t\t\t\t\tthis.error = 'Kirjautuminen epäonnistui. Kirjautuminen luultavasti vanheni, lataa sivu uudestaan.'\n\t\t\t\tthis.$G.user = ''\n\t\t\t})\n\t\t}\n\t},\n    watch: {\n        $route: {\n            immediate: true,\n            handler(to, from) {\n                document.title = to.meta.title || 'WESKARI';\n            }\n        },\n    },\n\tcreated() {\n\t\tdocument.title = 'WESKARI'\n\t\tconsole.log(window.location.hostname)\n\t\tif(window.location.hostname == 'localhost') this.$G.api_url = '' // set api path dynamically\n\t\tthis.login()\n\t\tthis.intervalID = setInterval(() => this.login(), 30000);\n\t},\n\tbeforeDestroy () {\n\t\tclearInterval(this.intervalID)\n\t}\n\n}\n</script>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=2a5de8c8&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.item.tilaus_saatu)?_c('div',{staticStyle:{\"min-width\":\"250px\"}},[(_vm.$G.isOverdue(_vm.item.tilaus_saatu.pvm_erapaiva))?_c('div',{staticClass:\"text-danger\"},[_c('b',[_vm._v(_vm._s(_vm.$G.formatDate(_vm.item.tilaus_saatu.pvm_erapaiva,'reverse', '.')))])]):_c('div',{staticClass:\"text-info \"},[_vm._v(_vm._s(_vm.$G.formatDate(_vm.item.tilaus_saatu.pvm_erapaiva,'reverse', '.')))]),(_vm.item.tilaus_saatu.uusittavissa == 'no')?_c('span',{staticClass:\"text-danger\",staticStyle:{\"margin-left\":\"10px\",\"padding\":\"0px\"}},[_vm._v(\"ei voi uusia\")]):_vm._e(),(_vm.item.tilaus_saatu.info && _vm.item.tilaus_saatu.info != 'undefined')?_c('div',[_vm._v(_vm._s(_vm.item.tilaus_saatu.info))]):_vm._e()]):_c('div',[_vm._v(\"-\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template >\n\t<div v-if=\"item.tilaus_saatu\" style=\"min-width:250px\">\n\t\t<div v-if=\"$G.isOverdue(item.tilaus_saatu.pvm_erapaiva)\" class=\"text-danger\"><b>{{$G.formatDate(item.tilaus_saatu.pvm_erapaiva,'reverse', '.')}}</b></div>\n\t\t<div v-else class=\"text-info \">{{$G.formatDate(item.tilaus_saatu.pvm_erapaiva,'reverse', '.')}}</div>\n\t\t<span class=\"text-danger\" style=\"margin-left:10px; padding:0px\" v-if=\"item.tilaus_saatu.uusittavissa == 'no'\">ei voi uusia</span>\n\t\t<div v-if=\"item.tilaus_saatu.info && item.tilaus_saatu.info != 'undefined'\">{{item.tilaus_saatu.info}}</div>\n\t</div>\n\t<div v-else>-</div>\n</template>\n\n\n<script>\n\nexport default {\n\tname: 'WEDueDateDisplay',\n\tprops: ['item']\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WEDueDateDisplay.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WEDueDateDisplay.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WEDueDateDisplay.vue?vue&type=template&id=2cd501f8&\"\nimport script from \"./WEDueDateDisplay.vue?vue&type=script&lang=js&\"\nexport * from \"./WEDueDateDisplay.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport { BootstrapVue, IconsPlugin } from 'bootstrap-vue'\nVue.use(BootstrapVue)\nVue.use(IconsPlugin)\nVue.use(VueRouter)\n\n// 2. Define route components\nimport WEMain from './components/WEMain.vue'\nimport WERequest from './components/WERequest.vue'\nimport WEOrganisation from './components/WEOrganisation.vue'\nimport WEClient from './components/WEClient.vue'\nimport WELibrary from './components/WELibrary.vue'\nimport WEMessage from './components/WEMessage.vue'\nimport WELoanSearch from './components/WELoans.vue'\nimport WEStatistics from './components/WEStatistics.vue'\n\n\n// 3. Create the router\nconst router = new VueRouter({\n  //mode: 'history',\n  base: __dirname,\n  routes: [\n    { path: '/', component: WEMain },\n    { path: '/pyynnot/:id', component: WERequest },\n    { path: '/organisaatiot', component: WEOrganisation },\n    { path: '/organisaatiot/:id', component: WEOrganisation },\n    { path: '/asiakkaat', component: WEClient },\n    { path: '/asiakkaat/:id', component: WEClient },\n    { path: '/kirjastot', component: WELibrary },\n    { path: '/kirjastot/:id', component: WELibrary },\n    { path: '/saatteet', component: WEMessage },\n    { path: '/saatteet/:id', component: WEMessage },\n    { path: '/lainat', component: WELoanSearch },\n    { path: '/tilastot', component: WEStatistics },\n  ]\n})\n\nimport 'bootstrap/dist/css/bootstrap.css'\nimport 'bootstrap-vue/dist/bootstrap-vue.css'\n\n\nimport App from './App.vue'\n\nVue.config.productionTip = false\n\n\n// instance property https://vuejs.org/v2/cookbook/adding-instance-properties.html\nvar shared = new Vue({\n\tdata:{\n\t\tapi_url: '/api',\n\t\tlogin: true ,\n\t\terror: null,\n\t\tuser: null\n\t},\n\tmethods: {\n\t\tgetStatus(status) {\n\t\t\tif(status == 'kasittelyssa') return 'käsittelyssä'\n\t\t\telse return status\n\t\t},\n\n\t\tisOverdue(d) {\n\t\t\tvar dd = new Date(d)\n\t\t\tvar now = new Date()\n\t\t\tif(dd.getTime() < now.getTime()) return true\n\t\t\treturn false\n\t\t},\n\n\t\tformatDate(date, reverse, comb) {\n\t\t\tif(!comb) comb = '.'\n\t\t\tvar out = []\n\t\t\tif(date) {\n\t\t\t\tvar d = new Date(date)\n\t\t\t\tif(d instanceof Date && isFinite(d)) {\n\t\t\t\t\tout.push(d.getFullYear())\n\t\t\t\t\tout.push((d.getMonth() + 1).toString().padStart(2, \"0\"))\n\t\t\t\t\tout.push(d.getDate().toString().padStart(2, \"0\"))\n\t\t\t\t\tif(reverse) return out.reverse().join(comb)\n\t\t\t\t\telse return out.join(comb)\n\t\t\t\t} else {\n\t\t\t\t\treturn date\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn '-'\n\t\t\t}\n\t\t},\n\n\t\tgetDateFromUUID(uuid) {\n\t\t\tvar date = new Date( parseInt( uuid.substring(0,8), 16 ) * 1000 )\n\t\t\tvar formatted = new Intl.DateTimeFormat('fi-FI').format(date);\n\t\t\treturn formatted\n\t\t},\n\n\t\tgetToday(reverse, plusMonth, separator='.') {\n\t\t\tvar today = new Date();\n\t\t\tif(plusMonth) {\n\t\t\t\ttoday.setMonth(today.getMonth() + plusMonth)\n\t\t\t}\n\t\t\tif(reverse)\n\t\t\t\treturn (('0' + (today.getDate())).slice(-2) + separator + ('0' + (today.getMonth()+1)).slice(-2) + separator + today.getFullYear());\n\t\t\telse\n\t\t\t\treturn (today.getFullYear() + separator + ('0' + (today.getMonth()+1)).slice(-2) + separator + ('0' + (today.getDate())).slice(-2));\n\t\t},\n\n\t\trenderBreaks(text, splitter) {\n\t\t\tif(text && typeof text === 'string') return text.split(splitter).join('<br>');\n\t\t\telse return '';\n\t\t},\n\n\t\tgetInfo(request, lang) {\n\t\t\tvar lang_info = {\n\t\t\t\t'pyynto_id': {'en':'ID', 'fi': 'ID'},\n\t\t\t\t'teoksen_tiedot': {'en':'title', 'fi': 'teos'},\n\t\t\t\t'sivut': {'en':'pages', 'fi': 'sivut'},\n\t\t\t\t'julkaisun_tiedot': {'en': 'publication', 'fi': 'julkaisu'}\n\t\t\t}\n\t\t\treturn lang_info['teoksen_tiedot'][lang] + ': ' + request.teoksen_tiedot\n\n\t\t},\n\n\t},\n\tcomputed: {\n\t\tlocal: function() {\n\t\t\tif(window.location.hostname == 'localhost')\n\t\t\t\treturn ''\n\t\t\telse\n\t\t\t\treturn this.api_url\n\t\t}\n\t}\n})\n\nshared.install = function(){\n  Object.defineProperty(Vue.prototype, '$G', {\n    get () { return shared }\n  })\n}\nVue.use(shared);\n\n\nnew Vue({\n\trouter,\n\trender: h => h(App),\n}).$mount('#app')\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WERequests.vue?vue&type=style&index=0&id=2205b044&scoped=true&lang=css&\"","import axios from \"axios\"\nlet web = {}\n\nconst api = ''\n\nweb.updateRequest = async function(request_id, update) {\n\n\tvar url = api + \"/api/pyynnot/\" + request_id ;\n\taxios.put(url, update)\n\t.catch(data => {\n\t\tthrow(getError(data, 'Pyyntö epäonnistui'))\n\t})\n}\n\nweb.getLoanCount = async function() {\n\tvar url = api + \"/api/pyynnot/loan_count\" ;\n\treturn axios.get(url)\n\n\t\n}\n\nfunction getError(e, msg) {\n\tif(e.response && e.response.data && e.response.data.error) return e.response.data.error\n\telse return msg\n}\n\nexport default web\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-container',[_c('h1',[_vm._v(\"Tilastot\")]),_c('div',{staticStyle:{\"margin-top\":\"20px\",\"margin-bottom\":\"20px\"}},[_c('b-link',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){return _vm.search(_vm.year)}}},[_vm._v(_vm._s(_vm.year)+\" \")]),_vm._v(\" | \"),_c('b-link',{on:{\"click\":function($event){return _vm.search(_vm.year-1)}}},[_vm._v(_vm._s(_vm.year - 1)+\" | \")]),_c('b-link',{on:{\"click\":function($event){return _vm.search(_vm.year-2)}}},[_vm._v(_vm._s(_vm.year - 2))])],1),_c('b-card',{attrs:{\"title\":_vm.current_year}},[_c('b-row',{staticClass:\"my-1\"},[_c('b-col',{attrs:{\"sm\":\"12\"}},[_c('b-table',{attrs:{\"striped\":\"\",\"items\":_vm.stats,\"fields\":_vm.fields}})],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template >\n\t<b-container>\n\t\t<h1>Tilastot</h1>\n\t\t<div style=\"margin-top:20px; margin-bottom:20px\">\n\t\t\t\t<b-link href=\"#\" @click=\"search(year)\">{{ year }} </b-link> |\n\t\t\t\t<b-link @click=\"search(year-1)\">{{ year - 1 }} | </b-link>\n\t\t\t\t<b-link @click=\"search(year-2)\">{{ year - 2 }}</b-link>\n\t\t\t</div>\n\t\t<b-card :title=\"current_year\">\n\t\t  <b-row class=\"my-1\">\n\t\t\t<b-col sm=\"12\">\n\n\t\t\t\t<b-table striped :items=\"stats\" :fields=\"fields\">\n\n\t\t\t\t</b-table>\n\t\t\t</b-col>\n\t\t  </b-row>\n\t\t</b-card>\n\n\n\n\n\t</b-container>\n\n</template>\n\n\n<script>\n\nexport default {\n\tname: 'WEStatistics',\n\tdata: function() {\n\t\treturn {\n\t\t\tyear:0,\n\t\t\tcurrent_year: 0,\n\t\t\tstats: [],\n\t\t\tlibs: {},\n\t\t\tfields: [\n\t\t\t\t{key:'count', label: 'lainat'},\n\t\t\t\t{key:'kirjaston_nimi', label: 'kirjasto'}\n\t\t\t]\n\t\t\t\n\t\t}\n\t},\n\n\n\n\tmethods: {\n\n\t\tsearch(year) {\n\t\t\tthis.current_year = year\n\t\t\tthis.error = null\n\t\t\t\n\t\t\tfetch(this.$G.api_url + \"/api/tilastot/\" + year)\n\t\t\t.then(response => { \n\t\t\t\tif(!response.ok) throw(response.status)\n\t\t\t\treturn response.json()\n\t\t\t})\n\t\t\t.then(json => { \n\t\t\t\tthis.stats = json\n\t\t\t})\n\n\t\t\t.catch(data => {\n\t\t\t\tconsole.log('error' + data)\n\t\t\t\tthis.error = 'virhe: ' + data\n\t\t\t})\n\t\t}\n\t\t\n\t},\n\n\tmounted() {\n\t\tthis.year = new Date().getFullYear()\n\t\tthis.current_year = this.year\n\t\tthis.search(new Date().getFullYear())\n\t}\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WEStatistics.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WEStatistics.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WEStatistics.vue?vue&type=template&id=39cfcfa0&\"\nimport script from \"./WEStatistics.vue?vue&type=script&lang=js&\"\nexport * from \"./WEStatistics.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-container',{attrs:{\"fluid\":\"\"}},[_c('h1',[_vm._v(\"Saatteet\")]),(_vm.ready && _vm.search_result.length !== 0 && !_vm.current && _vm.mode == '')?_c('div',[_c('b-table',{attrs:{\"items\":_vm.search_result,\"fields\":_vm.fields},scopedSlots:_vm._u([{key:\"cell(_id)\",fn:function(data){return [_c('b-link',{attrs:{\"to\":'/saatteet/' + data.item._id}},[_vm._v(_vm._s(data.value))])]}}],null,false,1829266232)})],1):_vm._e(),(_vm.ready && _vm.current)?_c('b-card',{attrs:{\"title\":_vm.current._id,\"header-bg-variant\":\"dark\"}},[_c('div',{staticStyle:{\"max-width\":\"700px\"},domProps:{\"innerHTML\":_vm._s(_vm.$G.renderBreaks(_vm.current.saate,'\\n'))}}),_c('br'),_c('br'),(_vm.mode != 'edit')?_c('b-button',{on:{\"click\":function($event){_vm.mode = 'edit'}}},[_vm._v(\"muokkaa\")]):_vm._e()],1):_vm._e(),(_vm.current && _vm.mode == 'edit')?_c('b-card',{attrs:{\"title\":_vm.current._id,\"header-bg-variant\":\"dark\"}},[(_vm.mode == 'edit')?_c('table',[_c('tr',[_c('td',{staticStyle:{\"min-width\":\"200px\"}},[_vm._v(\"saate\")]),_c('td',[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.current['saate']),expression:\"current['saate']\"}],attrs:{\"cols\":\"80\",\"rows\":\"16\"},domProps:{\"value\":(_vm.current['saate'])},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.current, 'saate', $event.target.value)}}})])])]):_vm._e(),_c('b-container',[_c('b-button',{on:{\"click\":function($event){return _vm.loadData()}}},[_vm._v(\"peru\")]),_c('b-button',{attrs:{\"variant\":\"info\"},on:{\"click\":function($event){return _vm.saveForm()}}},[_vm._v(\"tallenna\")])],1)],1):_vm._e(),_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"Näillä placeholdereilla voit määrittää mihin mikin tieto tulee saatteessa. \"),_c('ul',[_c('li',[_vm._v(\"[[ID]] = pyynnön tunniste\")]),_c('li',[_vm._v(\"[[FI]] = teoksen tiedot suomeksi \")]),_c('li',[_vm._v(\"[[EN]] = teoksen tiedot englanniksi \")]),_c('li',[_vm._v(\"[[ERAPAIVA]] = eräpäivä (saapumisilmoituksessa) \")]),_c('li',[_vm._v(\"[[TARVITAAN_VIIMEISTAAN]] = tarvitaan viimeistään (tilauksessa) \")])])]),(_vm.current)?_c('b-link',{attrs:{\"to\":'/saatteet'}},[_vm._v(\"takaisin\")]):_vm._e(),(_vm.mode == 'add_new')?_c('b-card',{attrs:{\"title\":\"uusi saate\",\"header-bg-variant\":\"dark\"}},[_c('table',_vm._l((_vm.fields),function(field){return _c('tr',{key:field.key},[_c('td',{staticStyle:{\"min-width\":\"200px\"}},[_vm._v(_vm._s(field.key))]),_c('td',[_c('b-form-input',{model:{value:(_vm.new_obj[field.key]),callback:function ($$v) {_vm.$set(_vm.new_obj, field.key, $$v)},expression:\"new_obj[field.key]\"}})],1)])}),0),_c('b-button',{on:{\"click\":function($event){_vm.mode = ''}}},[_vm._v(\"peru\")]),_c('b-button',{attrs:{\"variant\":\"info\"},on:{\"click\":function($event){return _vm.saveForm()}}},[_vm._v(\"tallenna\")])],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template >\n\t<b-container fluid>\n\t\t<h1>Saatteet</h1>\n\n\t\t<!-- <b-button class=\"float-right\" v-if=\"!current && mode == ''\" @click=\"mode = 'add_new'\" variant=\"info\">lisää uusi</b-button> -->\n\n\t\t<!-- display search result -->\n\t\t<div v-if=\"ready && search_result.length !== 0 && !current && mode == ''\">\n\t\t\t\t<b-table :items=\"search_result\" :fields=\"fields\">\n\n\t\t\t\t\t<template v-slot:cell(_id)=\"data\">\n\t\t\t\t\t\t\t<b-link :to=\"'/saatteet/' + data.item._id\">{{data.value}}</b-link>\n\t\t\t\t\t</template>\n\t\t\t\t</b-table>\n\t\t</div>\n\n\n\t\t<!-- display individual item -->\n\t\t<b-card v-if=\"ready && current\" :title=\"current._id\" header-bg-variant=\"dark\">\n\n\t\t\t<div style=\"max-width:700px\" v-html=\"$G.renderBreaks(current.saate,'\\n')\"></div>\n\t\t\t<br><br>\n\t\t\t<b-button v-if=\"mode != 'edit'\" @click=\"mode = 'edit'\">muokkaa</b-button>\n\n\t\t</b-card>\n\n\n\n\t\t<!-- edit form -->\n\t\t<b-card v-if=\"current && mode == 'edit'\" :title=\"current._id\" header-bg-variant=\"dark\">\n\t\t\t<table v-if=\"mode == 'edit'\">\n\t\t\t\t<tr>\n\n\t\t\t\t\t<td style=\"min-width:200px\">saate</td>\n\t\t\t\t\t<td><textarea cols=\"80\" rows=\"16\" v-model=\"current['saate']\"></textarea></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\t\t\t<b-container>\n\n\n\t\t\t<b-button  @click=\"loadData()\">peru</b-button>\n\t\t\t<b-button  @click=\"saveForm()\" variant=\"info\">tallenna</b-button>\n\t\t\t</b-container>\n\t\t</b-card>\n\n\t\t\t<div class=\"alert alert-info\">Näillä placeholdereilla voit määrittää mihin mikin tieto tulee saatteessa.\n\t\t\t\t<ul>\n\t\t\t\t\t<li>[[ID]] = pyynnön tunniste</li>\n\t\t\t\t\t<li>[[FI]] = teoksen tiedot suomeksi </li>\n\t\t\t\t\t<li>[[EN]] = teoksen tiedot englanniksi </li>\n\t\t\t\t\t<li>[[ERAPAIVA]] = eräpäivä (saapumisilmoituksessa) </li>\n\t\t\t\t\t<li>[[TARVITAAN_VIIMEISTAAN]] = tarvitaan viimeistään (tilauksessa) </li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\n\t\t<b-link v-if=\"current\" :to=\"'/saatteet'\">takaisin</b-link>\n\n\n\t\t<!-- add new item-->\n\t\t<b-card v-if=\"mode == 'add_new'\" title=\"uusi saate\" header-bg-variant=\"dark\">\n\t\t\t<table>\n\t\t\t\t<tr v-for=\"field in fields\" :key=\"field.key\">\n\t\t\t\t\t<td style=\"min-width:200px\">{{field.key}}</td>\n\t\t\t\t\t<td><b-form-input v-model=\"new_obj[field.key]\"></b-form-input></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t\t<b-button @click=\"mode = ''\">peru</b-button>\n\t\t\t<b-button @click=\"saveForm()\" variant=\"info\">tallenna</b-button>\n\t\t</b-card>\n\n\t</b-container>\n\n</template>\n\n\n<script>\n\nexport default {\n\tname: 'WEMessage',\n\tdata: function() {\n\t\treturn {\n\t\t\tsearch_result: [],\n\t\t\tcurrent: null,\n\t\t\tready: false,\n\t\t\tmode: '',\n\t\t\tnew_obj: {},\n\t\t\tfields: [\n\t\t\t\t{key: '_id'},\n\t\t\t\t{key: 'saate'}\n\t\t\t],\n\t\t}\n\t},\n\n\twatch: {\n\t\t$route(to, from) {\n\t\t\tif(this.$route.params.id) {\n\t\t\t\tthis.loadData()\n\t\t\t} else {\n\t\t\t\tthis.current = null\n\t\t\t\tthis.loadData()\n\t\t\t}\n\t\t}\n\t},\n\n\tmethods: {\n\n\t\tsaveForm() {\n\t\t\tif(this.mode == 'add_new') {\n\t\t\t\tfetch(this.$G.api_url + \"/api/saatteet\", {method:'POST', body: JSON.stringify(this.new_obj)})\n\t\t\t\t.then(response => { return response.json()})\n\t\t\t\t.then(json => {\n\t\t\t\t\tthis.$router.push(\"/saatteet/\" + json._id)\n\t\t\t\t})\n\t\t\t\t.catch(data => {console.log('error' + data)})\n\t\t\t} else if(this.mode == 'edit') {\n\t\t\t\tconsole.log('edit')\n\t\t\t\tdelete this.current._id\n\t\t\t\tconsole.log(this.current)\n\t\t\t\tfetch(this.$G.api_url + \"/api/saatteet/\" + this.$route.params.id, {method:'PUT', body: JSON.stringify(this.current)})\n\t\t\t\t.then(response => { return response.json()})\n\t\t\t\t.then(json => {\n\t\t\t\t\tthis.loadData()\n\t\t\t\t})\n\t\t\t\t.catch(data => {console.log('error' + data)})\n\t\t\t}\n\t\t},\n\n\t\teditForm() {\n\t\t\tconsole.log(this.edit)\n\t\t\tconsole.log('sdf')\n\t\t\tthis.edit = !this.edit\n\t\t},\n\n\n\n\t\tloadData() {\n\n\t\t\tif(this.$route.params.id) {\n\t\t\t\tthis.mode = ''\n\t\t\t\tthis.ready = false\n\t\t\t\tthis.current = null\n\t\t\t\tfetch(this.$G.api_url + \"/api/saatteet/\" + this.$route.params.id)\n\t\t\t\t.then(response => { return response.json()})\n\t\t\t\t.then(json => {\n\t\t\t\t\tthis.current = json\n\t\t\t\t\tthis.ready = true\n\t\t\t\t})\n\t\t\t\t.catch(data => {console.log('error' + data)})\n\t\t\t} else {\n\t\t\t\tfetch(this.$G.api_url + \"/api/saatteet?sort=_id\")\n\t\t\t\t.then(response => { return response.json()})\n\t\t\t\t.then(json => {\n\t\t\t\t\tthis.search_result = json\n\t\t\t\t\tthis.ready = true\n\t\t\t\t})\n\t\t\t\t.catch(data => {console.log('error' + data)})\n\t\t\t}\n\t\t}\n\t},\n\n\tmounted() {\n\t\tthis.loadData()\n\t}\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WEMessage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WEMessage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WEMessage.vue?vue&type=template&id=67d1c888&\"\nimport script from \"./WEMessage.vue?vue&type=script&lang=js&\"\nexport * from \"./WEMessage.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-col',[_c('div',[_c('WERequests')],1),_c('div',[_c('hr',{staticClass:\"my-4\"}),_c('p',[_vm._v(\"by OSC/vepa\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-container',{attrs:{\"fluid\":\"\"}},[_c('h1',[_vm._v(\"Pyynnöt\")]),(_vm.error)?_c('div',{staticClass:\"alert- alert-danger\"},[_vm._v(_vm._s(_vm.error))]):_vm._e(),_c('div',[_c('h4',[_vm._v(\"uudet\")]),(_vm.ready['uusi'])?[_c('b-table',{attrs:{\"small\":\"\",\"striped\":\"\",\"hover\":\"\",\"items\":_vm.new_requests,\"fields\":_vm.fields},scopedSlots:_vm._u([{key:\"cell(tiedot)\",fn:function(data){return [_c('b-link',{attrs:{\"to\":{ path: '/pyynnot/' + data.item._id }}},[_vm._v(_vm._s(data.item.teoksen_tiedot))])]}},{key:\"cell(tilaaja)\",fn:function(data){return [(data.item.tilaaja)?_c('b-link',{attrs:{\"to\":{ path: '/asiakkaat/' + data.item.tilaaja._id }}},[_vm._v(_vm._s(data.item.tilaaja.sukunimi + ', ' + data.item.tilaaja.etunimi))]):_c('div',[_vm._v(_vm._s(data.item.sukunimi)+\", \"+_vm._s(data.item.etunimi)+\" ulkopuolinen\")])]}},{key:\"cell(sahkoposti)\",fn:function(data){return [(data.item.tilaaja)?_c('div',[_vm._v(_vm._s(data.item.tilaaja.sahkoposti.join(', ')))]):_c('div',{staticClass:\"alert alert-warning\"},[_vm._v(\"ulkopuolinen\")])]}}],null,false,3739004769)})]:_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"ei uusia pyyntöjä\")])],2),_c('h4',[_vm._v(\"käsittelyssä\")]),(_vm.ready['kasittelyssa'])?[_c('b-table',{attrs:{\"small\":\"\",\"striped\":\"\",\"hover\":\"\",\"items\":_vm.reserved_requests,\"fields\":_vm.fields},scopedSlots:_vm._u([{key:\"cell(tiedot)\",fn:function(data){return [_c('b-link',{attrs:{\"to\":{ path: '/pyynnot/' + data.item._id }}},[_vm._v(_vm._s(data.item.teoksen_tiedot))])]}},{key:\"cell(tilaaja)\",fn:function(data){return [(data.item.tilaaja)?_c('b-link',{attrs:{\"to\":{ path: '/asiakkaat/' + data.item.tilaaja._id }}},[_vm._v(_vm._s(data.item.tilaaja.sukunimi + ', ' + data.item.tilaaja.etunimi))]):_c('div',[_vm._v(_vm._s(data.item.sukunimi)+\", \"+_vm._s(data.item.etunimi)+\" ulkopuolinen\")])]}},{key:\"cell(sahkoposti)\",fn:function(data){return [(data.item.tilaaja)?_c('div',[_vm._v(_vm._s(data.item.tilaaja.sahkoposti.join(', ')))]):_c('div',{staticClass:\"alert alert-warning\"},[_vm._v(\"ulkopuolinen\")])]}}],null,false,3739004769)})]:_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"ei käsittelyssä olevia pyyntöjä\")]),_c('h4',[_vm._v(\"tilattu\")]),(_vm.ready['tilattu'])?[_c('b-table',{attrs:{\"small\":\"\",\"striped\":\"\",\"hover\":\"\",\"items\":_vm.ordered_requests,\"fields\":_vm.fields},scopedSlots:_vm._u([{key:\"cell(tiedot)\",fn:function(data){return [_c('b-link',{attrs:{\"to\":{ path: '/pyynnot/' + data.item._id }}},[_vm._v(_vm._s(data.item.teoksen_tiedot))])]}},{key:\"cell(tilaaja)\",fn:function(data){return [(data.item.tilaaja)?_c('b-link',{attrs:{\"to\":{ path: '/asiakkaat/' + data.item.tilaaja._id }}},[_vm._v(_vm._s(data.item.tilaaja.sukunimi + ', ' + data.item.tilaaja.etunimi))]):_vm._e()]}},{key:\"cell(sahkoposti)\",fn:function(data){return [(data.item.tilaaja)?_c('div',[_vm._v(_vm._s(data.item.tilaaja.sahkoposti.join(', ')))]):_vm._e()]}}],null,false,2542628187)})]:_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"ei saapumattomia tilauksia\")])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<style scoped>\n\ttable {\n\t\tmargin-bottom:60px;\n\t}\n</style>\n\n<template >\n\t<b-container fluid>\n\t\t<h1>Pyynnöt</h1>\n\t\t<div class=\"alert- alert-danger\" v-if=\"error\">{{error}}</div>\n\t\t<div>\n\t\t\t<h4>uudet</h4>\n\t\t\t<template v-if=\"ready['uusi']\">\n\t\t\t\t<b-table small striped hover :items=\"new_requests\" :fields=\"fields\" >\n\t\t\t\t\t<template v-slot:cell(tiedot)=\"data\">\n\t\t\t\t\t\t<b-link :to=\"{ path: '/pyynnot/' + data.item._id }\">{{data.item.teoksen_tiedot}}</b-link>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-slot:cell(tilaaja)=\"data\">\n\t\t\t\t\t\t<b-link v-if=\"data.item.tilaaja\" :to=\"{ path: '/asiakkaat/' + data.item.tilaaja._id }\">{{ data.item.tilaaja.sukunimi + ', ' + data.item.tilaaja.etunimi }}</b-link>\n\t\t\t\t\t\t<div v-else>{{data.item.sukunimi}}, {{data.item.etunimi}} ulkopuolinen</div>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-slot:cell(sahkoposti)=\"data\">\n\t\t\t\t\t\t<div v-if=\"data.item.tilaaja\">{{ data.item.tilaaja.sahkoposti.join(', ')}}</div>\n\t\t\t\t\t\t<div v-else class=\"alert alert-warning\">ulkopuolinen</div>\n\t\t\t\t\t</template>\n\t\t\t\t</b-table>\n\t\t\t</template>\n\t\t\t<div class=\"alert alert-info\" v-else>ei uusia pyyntöjä</div>\n\n\t\t</div>\n\n\n\t\t<h4>käsittelyssä</h4>\n\t\t<template v-if=\"ready['kasittelyssa']\">\n\t\t\t<b-table small striped hover :items=\"reserved_requests\" :fields=\"fields\" >\n\n\t\t\t\t<template v-slot:cell(tiedot)=\"data\">\n\t\t\t\t\t<b-link :to=\"{ path: '/pyynnot/' + data.item._id }\">{{data.item.teoksen_tiedot}}</b-link>\n\t\t\t\t</template>\n\t\t\t\t<template v-slot:cell(tilaaja)=\"data\">\n\t\t\t\t\t<b-link v-if=\"data.item.tilaaja\" :to=\"{ path: '/asiakkaat/' + data.item.tilaaja._id }\">{{ data.item.tilaaja.sukunimi + ', ' + data.item.tilaaja.etunimi }}</b-link>\n\t\t\t\t\t<div v-else>{{data.item.sukunimi}}, {{data.item.etunimi}} ulkopuolinen</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-slot:cell(sahkoposti)=\"data\">\n\t\t\t\t\t<div v-if=\"data.item.tilaaja\">{{ data.item.tilaaja.sahkoposti.join(', ')}}</div>\n\t\t\t\t\t<div class=\"alert alert-warning\" v-else>ulkopuolinen</div>\n\t\t\t\t</template>\n\t\t\t</b-table>\n\t\t</template>\n\t\t<div class=\"alert alert-info\" v-else>ei käsittelyssä olevia pyyntöjä</div>\n\n\n\t\t<h4>tilattu</h4>\n\t\t<template v-if=\"ready['tilattu']\">\n\t\t\t<b-table small striped hover :items=\"ordered_requests\" :fields=\"fields\" >\n\n\t\t\t\t<template v-slot:cell(tiedot)=\"data\">\n\t\t\t\t\t<b-link :to=\"{ path: '/pyynnot/' + data.item._id }\">{{data.item.teoksen_tiedot}}</b-link>\n\t\t\t\t</template>\n\t\t\t\t<template v-slot:cell(tilaaja)=\"data\">\n\t\t\t\t\t<b-link v-if=\"data.item.tilaaja\" :to=\"{ path: '/asiakkaat/' + data.item.tilaaja._id }\">{{ data.item.tilaaja.sukunimi + ', ' + data.item.tilaaja.etunimi }}</b-link>\n\t\t\t\t</template>\n\t\t\t\t<template v-slot:cell(sahkoposti)=\"data\">\n\t\t\t\t\t<div v-if=\"data.item.tilaaja\">{{ data.item.tilaaja.sahkoposti.join(', ')}}</div>\n\t\t\t\t</template>\n\t\t\t</b-table>\n\t\t</template>\n\t\t<div class=\"alert alert-info\" v-else>ei saapumattomia tilauksia</div>\n\n\n\n\n\t</b-container>\n\n</template>\n\n\n<script>\nimport axios from 'axios'\n\nexport default {\n\tname: 'WERequests',\n\tdata: function() {\n\t\treturn {\n\t\t\tnew_requests: [],\n\t\t\treserved_requests: [],\n\t\t\tordered_requests: [],\n\t\t\tcurrent: null,\n\t\t\tready: {tilattu: false, kasittelyssa: false, uusi: false},\n\t\t\treserved_ready: false,\n\t\t\terror: null,\n\t\t\tfields: [\n\t\t\t\t{key:'_id', label: 'ID', thStyle:'width:10em'},\n\t\t\t\t{key:'teos_on', label: 'tyyppi', thStyle:'width:6em'},\n\t\t\t\t{key:'tiedot', thStyle:'min-width:50%'},\n\t\t\t\t//{key:'sahkoposti', label: 'sähköposti'},\n\t\t\t\t{key:'maksaja', label:'maksaja'},\n\t\t\t\t{key:'tilaaja', label: 'asiakas'},\n\t\t\t\t{key:'kasittelija', label: 'käsittelijä'}\n\t\t\t]\n\t\t}\n\t},\n\tprops: ['status'],\n\n\twatch: {\n\t\tcurrent: function() {\n\t\t\tthis.$G.current_request = this.current\n\t\t}\n\t},\n\n\tmethods: {\n\t\tloadData(status, target, query) {\n\n\t\t\taxios.get(this.$G.api_url + \"/api/pyynnot?status=\" + status + query)\n\t\t\t.then(response => {\n\t\t\t\tthis[target] = response.data\n\t\t\t\tif(this[target].length)\n\t\t\t\t\tthis.ready[status] = true\n\t\t\t\telse\n\t\t\t\t\tthis.ready[status] = false\n\t\t\t})\n\t\t\t.catch(data => {\n\t\t\t\tconsole.log('error' + data.response)\n\t\t\t\tthis.error = 'virhe: ' + data.response.data.error\n\t\t\t})\n\t\t}\n\t},\n\n\tmounted() {\n\t\tthis.loadData('uusi', 'new_requests', '')\n\t\tthis.loadData('kasittelyssa', 'reserved_requests', '')\n\t\tthis.loadData('tilattu', 'ordered_requests', '')\n\t}\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WERequests.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WERequests.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WERequests.vue?vue&type=template&id=2205b044&scoped=true&\"\nimport script from \"./WERequests.vue?vue&type=script&lang=js&\"\nexport * from \"./WERequests.vue?vue&type=script&lang=js&\"\nimport style0 from \"./WERequests.vue?vue&type=style&index=0&id=2205b044&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2205b044\",\n  null\n  \n)\n\nexport default component.exports","<template>\n\n\t<b-col>\n\n\t<!-- / deals-and-packages section-->\n\n\t\t<div>\n\t\t\t<WERequests></WERequests>\n\t\t</div>\n\t\t<div>\n\n\t\t  <hr class=\"my-4\">\n\t\t  <p>by OSC/vepa</p>\n\n\n\t\t</div>\n\t</b-col>\n\n</template>\n\n\n\n<script>\n\nimport WERequests from './WERequests.vue'\n\n\nexport default {\n\tname: 'WEMain',\n\tcomponents: {\n\t\tWERequests\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\trequests: {}\n\t\t}\n\t},\n\tmethods: {\n\n\t},\n\t mounted() {\n\n\t}\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WEMain.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WEMain.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WEMain.vue?vue&type=template&id=9dd41298&\"\nimport script from \"./WEMain.vue?vue&type=script&lang=js&\"\nexport * from \"./WEMain.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-container',{attrs:{\"fluid\":\"\"}},[_c('h1',[_vm._v(\"Lainat\")]),_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"lainassa tällä hetkellä: \"),_c('b',[_vm._v(_vm._s(_vm.loan_count))])]),_c('div',[_c('b-tabs',{attrs:{\"content-class\":\"mt-3\"},on:{\"activate-tab\":function($event){return _vm.getOverdueLoans()}}},[_c('b-tab',{attrs:{\"title\":\"lainahaku\",\"active\":\"\"}},[_c('b-row',{staticClass:\"my-1\"},[_c('b-col',{attrs:{\"sm\":\"4\"}},[_c('b-form-input',{attrs:{\"id\":\"input-default\",\"placeholder\":\"hakutermi\"},nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.search.apply(null, arguments)}},model:{value:(_vm.search_term),callback:function ($$v) {_vm.search_term=$$v},expression:\"search_term\"}}),_c('b-button',{on:{\"click\":_vm.search}},[_vm._v(\"hae\")]),(_vm.error)?_c('div',{staticClass:\"alert alert-danger\"},[_vm._v(_vm._s(_vm.error))]):_vm._e()],1),_c('b-col',[_c('b-form-select',{attrs:{\"options\":_vm.statuses},on:{\"change\":_vm.search},model:{value:(_vm.status),callback:function ($$v) {_vm.status=$$v},expression:\"status\"}})],1),_c('b-col',[_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"lainahaku hakee teoksen tiedoista. Tietyn henkilön lainat löytyy asiakashaun kautta.\")])])],1),_c('b-row',[(_vm.search_result.length != 0)?_c('div',[_c('b-table',{attrs:{\"small\":\"\",\"striped\":\"\",\"hover\":\"\",\"items\":_vm.search_result,\"fields\":_vm.fields},scopedSlots:_vm._u([{key:\"cell(teoksen_tiedot)\",fn:function(data){return [_c('b-link',{attrs:{\"to\":{ path: '/pyynnot/' + data.item._id }}},[_vm._v(_vm._s(data.item.teoksen_tiedot))])]}},{key:\"cell(tilaaja)\",fn:function(data){return [(data.item.tilaaja)?_c('b-link',{attrs:{\"to\":{ path: '/asiakkaat/' + data.item.tilaaja._id }}},[_vm._v(_vm._s(data.item.tilaaja.sukunimi)+\", \"+_vm._s(data.item.tilaaja.etunimi))]):_vm._e()]}},{key:\"cell(tilaus_saatu.kirjaston_nimi)\",fn:function(data){return [_c('div',[(data.item.tilaus_saatu)?_c('b-link',{attrs:{\"to\":'/kirjastot/' + data.item.tilaus_saatu.kirjasto_id}},[_vm._v(_vm._s(data.value))]):_vm._e()],1)]}},{key:\"cell(tilaus_saatu.pvm_erapaiva)\",fn:function(data){return [_c('DueDate',{attrs:{\"item\":data.item}})]}}],null,false,1711254347)})],1):_c('div',[_vm._v(\"ei tuloksia\")])])],1),_c('b-tab',{attrs:{\"title\":\"erääntyneet\"}},[(_vm.overdue.length != 0)?[_c('div',[_vm._v(\"erääntyneitä lainoja \"+_vm._s(_vm.overdue.length))]),_c('b-table',{attrs:{\"small\":\"\",\"striped\":\"\",\"hover\":\"\",\"items\":_vm.overdue,\"fields\":_vm.fields},scopedSlots:_vm._u([{key:\"cell(teoksen_tiedot)\",fn:function(data){return [_c('b-link',{attrs:{\"to\":{ path: '/pyynnot/' + data.item._id }}},[_vm._v(_vm._s(data.value))])]}},{key:\"cell(tilaaja)\",fn:function(data){return [_c('div',[(data.item.tilaaja)?_c('b-link',{attrs:{\"to\":'/asiakkaat/' + data.value._id}},[_vm._v(_vm._s(data.value.etunimi)+\" \"+_vm._s(data.value.sukunimi)+\" \")]):_vm._e()],1)]}},{key:\"cell(tilaus_saatu.pvm_erapaiva)\",fn:function(data){return [_c('DueDate',{attrs:{\"item\":data.item}})]}}],null,false,3871784930)})]:_vm._e()],2)],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template >\n\t<b-container fluid>\n\t\t<h1>Lainat</h1>\n\t\t<div class=\"alert alert-info\">lainassa tällä hetkellä: <b>{{loan_count}}</b></div>\n\t\t<div>\n\t\t\t<b-tabs content-class=\"mt-3\" @activate-tab=\"getOverdueLoans()\">\n\t\t\t\t<b-tab title=\"lainahaku\" active>\n\t\t\t\t\t<b-row class=\"my-1\">\n\t\t\t\t\t\t<b-col sm=\"4\">\n\t\t\t\t\t\t\t<b-form-input @keydown.enter.native=\"search\" v-model=\"search_term\" id=\"input-default\" placeholder=\"hakutermi\"></b-form-input>\n\t\t\t\t\t\t\t<b-button @click=\"search\">hae</b-button>\n\t\t\t\t\t\t\t<div class=\"alert alert-danger\" v-if=\"error\">{{error}}</div>\n\t\t\t\t\t\t</b-col>\n\t\t\t\t\t\t<b-col>\n\t\t\t\t\t\t\t<b-form-select v-model=\"status\" :options=\"statuses\" @change=\"search\"></b-form-select>\n\n\t\t\t\t\t\t</b-col>\n\t\t\t\t\t\t<b-col>\n\t\t\t\t\t\t\t<div class=\"alert alert-info\">lainahaku hakee teoksen tiedoista. Tietyn henkilön lainat löytyy asiakashaun kautta.</div>\n\t\t\t\t\t\t</b-col>\n\t\t\t\t\t</b-row>\n\t\t\t\t\t<b-row>\n\t\t\t\t\t\t<div v-if=\"search_result.length != 0\">\n\t\t\t\t\t\t\t<b-table small striped  hover :items=\"search_result\" :fields=\"fields\" >\n\t\t\t\t\t\t\t\t<template v-slot:cell(teoksen_tiedot)=\"data\">\n\t\t\t\t\t\t\t\t\t<b-link :to=\"{ path: '/pyynnot/' + data.item._id }\">{{data.item.teoksen_tiedot}}</b-link>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<template v-slot:cell(tilaaja)=\"data\">\n\t\t\t\t\t\t\t\t\t<b-link v-if=\"data.item.tilaaja\" :to=\"{ path: '/asiakkaat/' + data.item.tilaaja._id }\">{{ data.item.tilaaja.sukunimi}}, {{data.item.tilaaja.etunimi}}</b-link>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<template v-slot:cell(tilaus_saatu.kirjaston_nimi)=\"data\">\n\t\t\t\t\t\t\t\t\t<div><b-link v-if=\"data.item.tilaus_saatu\" :to=\"'/kirjastot/' + data.item.tilaus_saatu.kirjasto_id\">{{data.value}}</b-link></div>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<template v-slot:cell(tilaus_saatu.pvm_erapaiva)=\"data\">\n\t\t\t\t\t\t\t\t\t<DueDate :item=\"data.item\"></DueDate>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</b-table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-else>ei tuloksia</div>\n\t\t\t\t\t</b-row>\n\n\t\t\t\t</b-tab>\n\n\t\t\t\t<b-tab title=\"erääntyneet\">\n\t\t\t\t\t<template v-if=\"overdue.length != 0\" >\n\t\t\t\t\t\t<div>erääntyneitä lainoja {{overdue.length}}</div>\n\t\t\t\t\t\t<b-table small striped  hover :items=\"overdue\" :fields=\"fields\" >\n\t\t\t\t\t\t\t<template v-slot:cell(teoksen_tiedot)=\"data\">\n\t\t\t\t\t\t\t\t<b-link :to=\"{ path: '/pyynnot/' + data.item._id }\">{{data.value}}</b-link>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-slot:cell(tilaaja)=\"data\">\n\t\t\t\t\t\t\t\t<div><b-link v-if=\"data.item.tilaaja\" :to=\"'/asiakkaat/' + data.value._id\">{{data.value.etunimi}} {{data.value.sukunimi}} </b-link></div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-slot:cell(tilaus_saatu.pvm_erapaiva)=\"data\">\n\t\t\t\t\t\t\t\t<DueDate :item=\"data.item\"></DueDate>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</b-table>\n\t\t\t\t\t</template>\n\t\t\t\t</b-tab>\n\t\t\t</b-tabs>\n\t\t</div>\n\n\n\n\n\t</b-container>\n\n</template>\n\n\n<script>\nimport axios from 'axios'\nimport DueDate from './WEDueDateDisplay.vue'\nimport web from './../web.js'\nexport default {\n\tname: 'WELoans',\n\tcomponents: {DueDate},\n\tdata: function() {\n\t\treturn {\n\t\t\tsearch_result: [],\n\t\t\tsearch_term: '',\n\t\t\tcurrent: null,\n\t\t\tloading: false,\n\t\t\terror: null,\n\t\t\toverdue: [],\n\t\t\tloan_count: 0,\n\t\t\tstatus: 'lainassa',\n\t\t\tstatuses: ['ei valintaa','kasittelyssa', 'lainassa', 'tilattu', 'arkistoitu', 'peruttu'],\n\t\t\tfields: [\n\t\t\t\t{key:'_id', label: 'tunnus'},\n\t\t\t\t{key:'teoksen_tiedot', label: 'kirjan nimi'},\n\t\t\t\t{key:'tilaaja', label: 'tilaaja'},\n\t\t\t\t{key:'tilaus_saatu.kirjaston_nimi', label: 'kirjasto'},\n\t\t\t\t{key:'status', label: 'status'},\n\t\t\t\t{key:'tilaus_saatu.pvm_erapaiva', label: 'eräpäivä', sortable:true}\n\n\t\t\t]\n\t\t}\n\t},\n\n\n\n\tmethods: {\n\n\t\tasync getOverdueLoans() {\n\t\t\tvar response = await axios(this.$G.api_url + \"/api/pyynnot/overdue_loans\")\n\t\t\tthis.overdue = response.data\n\t\t},\n\n\t\tsearch() {\n\t\t\tif(this.search_term == '') {\n\t\t\t\tthis.error = \"anna hakuehto\"\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.error = null\n\t\t\tvar query = ''\n\t\t\tif(this.status == 'ei valintaa')\n\t\t\t\tquery = \"?search=\" + this.search_term\n\t\t\telse\n\t\t\t\tquery = \"?search=\" + this.search_term + \"&status=\" + this.status + \"&sort=tilaus_saatu.pvm_erapaiva&reverse=1\"\n\n\t\t\tfetch(this.$G.api_url + \"/api/pyynnot\" + query)\n\t\t\t.then(response => {\n\t\t\t\tif(!response.ok) throw(response.status)\n\t\t\t\treturn response.json()\n\t\t\t})\n\t\t\t.then(json => {\n\t\t\t\tthis.search_result = json\n\t\t\t\tthis.ready = true\n\t\t\t})\n\t\t\t.catch(data => {\n\t\t\t\tconsole.log('error' + data)\n\t\t\t\tthis.error = 'virhe: ' + data\n\t\t\t})\n\t\t}\n\t},\n\n\tasync mounted() {\n\t\t var count = await web.getLoanCount()\n\t\t this.loan_count = count.data\n\t}\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WELoans.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WELoans.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WELoans.vue?vue&type=template&id=4999d048&\"\nimport script from \"./WELoans.vue?vue&type=script&lang=js&\"\nexport * from \"./WELoans.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-container',{attrs:{\"fluid\":\"\"}},[_c('h1',[_vm._v(\"Organisaatiot\")]),(!_vm.current && _vm.mode == '')?_c('b-card',{attrs:{\"title\":\"haku\"}},[_c('b-row',{staticClass:\"my-1\"},[_c('b-col',{attrs:{\"sm\":\"4\"}},[_c('b-form-input',{attrs:{\"id\":\"input-default\",\"placeholder\":\"hae nimen alkukirjaimilla\"},nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.search.apply(null, arguments)}},model:{value:(_vm.search_term),callback:function ($$v) {_vm.search_term=$$v},expression:\"search_term\"}}),_c('b-button',{on:{\"click\":_vm.search}},[_vm._v(\"hae\")])],1)],1)],1):_vm._e(),(!_vm.current && _vm.mode == '')?_c('b-button',{staticClass:\"float-right\",staticStyle:{\"margin\":\"20px\"},attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){_vm.mode = 'add_new'}}},[_vm._v(\"lisää uusi\")]):_vm._e(),(_vm.search_result.length !== 0 && !_vm.current && _vm.mode == '')?_c('div',[_c('b-table',{attrs:{\"items\":_vm.search_result,\"fields\":_vm.fields},scopedSlots:_vm._u([{key:\"cell(sahkoposti)\",fn:function(data){return [_c('b',{staticClass:\"text-info\"},[_vm._v(_vm._s(data.value))])]}},{key:\"cell(nimi)\",fn:function(data){return [_c('b-link',{attrs:{\"to\":'/organisaatiot/' + data.item._id}},[_vm._v(_vm._s(data.value))])]}}],null,false,1488930706)})],1):_vm._e(),(_vm.current && _vm.mode != 'edit')?_c('b-card',{attrs:{\"title\":_vm.current.nimi,\"header-bg-variant\":\"dark\"}},[_c('table',_vm._l((_vm.fields),function(field){return _c('tr',{key:field.key},[_c('td',{staticStyle:{\"min-width\":\"200px\"}},[_vm._v(_vm._s(field.key))]),_c('td',[_c('b',[_vm._v(_vm._s(_vm.current[field.key]))])])])}),0),(_vm.mode != 'edit')?_c('b-icon',{staticClass:\"float-right pointer\",attrs:{\"icon\":\"pen\",\"variant\":\"primary\"},on:{\"click\":function($event){_vm.mode = 'edit'}}},[_vm._v(\"muokkaa\")]):_vm._e()],1):_vm._e(),(_vm.current && _vm.mode == 'edit')?_c('b-card',{attrs:{\"title\":_vm.current.nimi,\"header-bg-variant\":\"dark\"}},[(_vm.mode == 'edit')?_c('table',_vm._l((_vm.fields),function(field){return _c('tr',{key:field.key},[_c('td',{staticStyle:{\"min-width\":\"200px\"}},[_vm._v(_vm._s(field.key))]),_c('td',[_c('b-form-input',{model:{value:(_vm.current[field.key]),callback:function ($$v) {_vm.$set(_vm.current, field.key, $$v)},expression:\"current[field.key]\"}})],1)])}),0):_vm._e(),_c('b-container',[_c('b-button',{staticClass:\"float-right\",staticStyle:{\"margin-left\":\"20px\"},attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){return _vm.saveForm()}}},[_vm._v(\"tallenna\")]),_c('b-button',{staticClass:\"float-right\",on:{\"click\":function($event){return _vm.loadData()}}},[_vm._v(\"peru\")])],1)],1):_vm._e(),(_vm.current)?_c('b-link',{attrs:{\"to\":'/organisaatiot'}},[_vm._v(\"takaisin hakuun\")]):_vm._e(),(_vm.mode == 'add_new')?_c('b-card',{attrs:{\"title\":\"uusi organisaatio\",\"header-bg-variant\":\"dark\"}},[_c('table',_vm._l((_vm.fields),function(field){return _c('tr',{key:field.key},[_c('td',{staticStyle:{\"min-width\":\"200px\"}},[_vm._v(_vm._s(field.key))]),_c('td',[_c('b-form-input',{model:{value:(_vm.new_obj[field.key]),callback:function ($$v) {_vm.$set(_vm.new_obj, field.key, $$v)},expression:\"new_obj[field.key]\"}})],1)])}),0),_c('b-button',{staticClass:\"float-right\",staticStyle:{\"margin-left\":\"20px\"},attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){return _vm.saveForm()}}},[_vm._v(\"tallenna\")]),_c('b-button',{staticClass:\"float-right\",on:{\"click\":function($event){_vm.mode = ''}}},[_vm._v(\"peru\")])],1):_vm._e(),_c('br'),_c('br'),(_vm.current)?_c('h2',[_vm._v(\"maksut\")]):_vm._e(),(_vm.current)?_c('b-card',[_c('b-table',{attrs:{\"items\":_vm.requests,\"fields\":_vm.request_fields},scopedSlots:_vm._u([{key:\"cell(tiedot)\",fn:function(data){return [_c('b-link',{attrs:{\"to\":'/pyynnot/' + data.item._id}},[_vm._v(_vm._s(data.item.teoksen_tiedot))])]}},{key:\"cell(tilaaja)\",fn:function(data){return [_c('b-link',{attrs:{\"to\":'/asiakkaat/' + data.item.tilaaja._id}},[_vm._v(_vm._s(data.value.sukunimi)+\", \"+_vm._s(data.value.etunimi))])]}}],null,false,2186137256)})],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template >\n\t<b-container fluid>\n\t\t<h1>Organisaatiot</h1>\n\n\n\t\t<!-- display search -->\n\t\t<b-card title=\"haku\" v-if=\"!current && mode == ''\">\n\t\t  <b-row class=\"my-1\">\n\t\t\t<b-col sm=\"4\">\n\t\t\t  <b-form-input @keydown.enter.native=\"search\" v-model=\"search_term\" id=\"input-default\" placeholder=\"hae nimen alkukirjaimilla\"></b-form-input>\n\t\t\t  <b-button @click=\"search\">hae</b-button>\n\t\t\t</b-col>\n\t\t  </b-row>\n\t\t</b-card>\n\n\t\t<b-button class=\"float-right\" v-if=\"!current && mode == ''\" @click=\"mode = 'add_new'\" variant=\"primary\" style=\"margin:20px\">lisää uusi</b-button>\n\n\t\t<!-- display search result -->\n\t\t<div v-if=\"search_result.length !== 0 && !current && mode == ''\">\n\t\t\t\t<b-table :items=\"search_result\" :fields=\"fields\">\n\t\t\t\t\t<template v-slot:cell(sahkoposti)=\"data\">\n\t\t\t\t\t\t<b class=\"text-info\">{{ data.value }}</b>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-slot:cell(nimi)=\"data\">\n\t\t\t\t\t\t\t<b-link :to=\"'/organisaatiot/' + data.item._id\">{{data.value}}</b-link>\n\t\t\t\t\t</template>\n\t\t\t\t</b-table>\n\t\t</div>\n\n\n\t\t<!-- display individual item -->\n\t\t<b-card v-if=\"current && mode != 'edit'\" :title=\"current.nimi\" header-bg-variant=\"dark\">\n\n\t\t\t<table>\n\t\t\t\t<tr v-for=\"field in fields\" :key=\"field.key\">\n\t\t\t\t\t<td style=\"min-width:200px\">{{field.key}}</td>\n\t\t\t\t\t<td><b>{{current[field.key]}}</b></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t\t<b-icon v-if=\"mode != 'edit'\" @click=\"mode = 'edit'\" icon=\"pen\" class=\"float-right pointer\" variant=\"primary\">muokkaa</b-icon>\n\n\t\t</b-card>\n\n\n\t\t<!-- edit form -->\n\t\t<b-card v-if=\"current && mode == 'edit'\" :title=\"current.nimi\" header-bg-variant=\"dark\">\n\t\t\t<table v-if=\"mode == 'edit'\">\n\t\t\t\t<tr v-for=\"field in fields\" :key=\"field.key\">\n\t\t\t\t\t<td style=\"min-width:200px\">{{field.key}}</td>\n\t\t\t\t\t<td><b-form-input v-model=\"current[field.key]\"></b-form-input></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\t\t\t<b-container>\n\t\t\t\t<b-button  @click=\"saveForm()\" class=\"float-right\" variant=\"primary\" style=\"margin-left:20px\">tallenna</b-button>\n\t\t\t\t<b-button  @click=\"loadData()\" class=\"float-right\" >peru</b-button>\n\t\t\t</b-container>\n\t\t</b-card>\n\n\t\t<b-link v-if=\"current\" :to=\"'/organisaatiot'\">takaisin hakuun</b-link>\n\n\n\t\t<!-- add new item-->\n\t\t<b-card v-if=\"mode == 'add_new'\" title=\"uusi organisaatio\" header-bg-variant=\"dark\">\n\t\t\t<table>\n\t\t\t\t<tr v-for=\"field in fields\" :key=\"field.key\">\n\t\t\t\t\t<td style=\"min-width:200px\">{{field.key}}</td>\n\t\t\t\t\t<td><b-form-input v-model=\"new_obj[field.key]\"></b-form-input></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t\t<b-button  @click=\"saveForm()\" class=\"float-right\" variant=\"primary\" style=\"margin-left:20px\">tallenna</b-button>\n\t\t\t<b-button @click=\"mode = ''\" class=\"float-right\">peru</b-button>\n\t\t</b-card>\n\n\t\t<br><br><h2 v-if=\"current\">maksut</h2>\n\t\t<b-card v-if=\"current\">\n\t\t\t<b-table :items=\"requests\" :fields=\"request_fields\">\n\t\t\t\t<template v-slot:cell(tiedot)=\"data\">\n\t\t\t\t\t\t<b-link :to=\"'/pyynnot/' + data.item._id\">{{data.item.teoksen_tiedot}}</b-link>\n\t\t\t\t</template>\n\t\t\t\t<template v-slot:cell(tilaaja)=\"data\">\n\t\t\t\t\t\t<b-link :to=\"'/asiakkaat/' + data.item.tilaaja._id\">{{data.value.sukunimi}}, {{data.value.etunimi}}</b-link>\n\t\t\t\t</template>\n\n\t\t\t</b-table>\n\t\t</b-card>\n\n\t</b-container>\n\n</template>\n\n\n<script>\n\nexport default {\n\tname: 'WEOrganisation',\n\tdata: function() {\n\t\treturn {\n\t\t\tsearch_term: '',\n\t\t\tsearch_result: [],\n\t\t\tcurrent: null,\n\t\t\trequests: [],\n\t\t\tready: false,\n\t\t\tmode: '',\n\t\t\tnew_obj: {},\n\t\t\tfields: [\n\t\t\t\t{key: 'nimi'},\n\t\t\t\t{key: 'kustannuspaikka'},\n\t\t\t\t{key: 'huomio', label:'lisätieto'}\n\t\t\t],\n\t\t\trequest_fields: [\n\n\t\t\t\t{key: '_id', label:'tunniste'},\n\t\t\t\t{key: 'teos_on', label:'tyyppi'},\n\t\t\t\t{key: 'tiedot'},\n\t\t\t\t{key: 'tilaaja'},\n\t\t\t\t{key: 'kasittelija', label: 'käsittelijä'},\n\t\t\t\t{key: 'status'},\n\t\t\t\t{key: 'maksu'},\n\t\t\t\t{key: 'maksaja_info'}\n\t\t\t]\n\t\t}\n\t},\n\n\twatch: {\n\t\t$route(to, from) {\n\t\t\tif(this.$route.params.id) {\n\t\t\t\tthis.loadData()\n\t\t\t} else {\n\t\t\t\tthis.current = null\n\t\t\t}\n\t\t}\n\t},\n\n\tmethods: {\n\n\t\tsaveForm() {\n\t\t\tconsole.log('saveform')\n\t\t\tif(this.mode == 'add_new') {\n\t\t\t\tfetch(this.$G.api_url + \"/api/organisaatiot\", {method:'POST', body: JSON.stringify(this.new_obj)})\n\t\t\t\t.then(response => { return response.json()})\n\t\t\t\t.then(json => {\n\t\t\t\t\tthis.$router.push(\"/organisaatiot/\" + json._id)\n\t\t\t\t})\n\t\t\t\t.catch(data => {console.log('error' + data)})\n\t\t\t} else if(this.mode == 'edit') {\n\t\t\t\tconsole.log('edit')\n\t\t\t\tdelete this.current._id\n\t\t\t\tconsole.log(this.current)\n\t\t\t\tfetch(this.$G.api_url + \"/api/organisaatiot/\" + this.$route.params.id, {method:'PUT', body: JSON.stringify(this.current)})\n\t\t\t\t.then(response => { return response.json()})\n\t\t\t\t.then(json => {\n\t\t\t\t\tthis.loadData()\n\t\t\t\t})\n\t\t\t\t.catch(data => {console.log('error' + data)})\n\t\t\t}\n\t\t},\n\n\t\teditForm() {\n\t\t\tconsole.log(this.edit)\n\t\t\tconsole.log('sdf')\n\t\t\tthis.edit = !this.edit\n\t\t},\n\n\t\tloadRelated() {\n\t\t\tfetch(this.$G.api_url + \"/api/pyynnot/?sort=_id&reverse=1&maksaja_varmistettu=\" + this.$route.params.id)\n\t\t\t.then(response => { return response.json()})\n\t\t\t.then(json => {\n\t\t\t\tthis.requests = json\n\t\t\t\tthis.ready = true\n\t\t\t})\n\t\t\t.catch(data => {console.log('error' + data)})\n\t\t},\n\n\t\tloadData() {\n\t\t\tif(this.$route.params.id) {\n\t\t\t\tthis.mode = ''\n\t\t\t\tthis.ready = false\n\t\t\t\tthis.current = null\n\t\t\t\tfetch(this.$G.api_url + \"/api/organisaatiot/\" + this.$route.params.id)\n\t\t\t\t.then(response => { return response.json()})\n\t\t\t\t.then(json => {\n\t\t\t\t\tthis.current = json\n\t\t\t\t\tthis.loadRelated()\n\t\t\t\t})\n\t\t\t\t.catch(data => {console.log('error' + data)})\n\t\t\t}\n\t\t},\n\t\tasync search() {\n\t\t\tthis.current = null\n\t\t\tif(this.search_term !== '') {\n\t\t\t\tif(!this.search_term.includes('*')) this.search_term = this.search_term + '*'\n\t\t\t\tvar search = 'nimi=' + this.search_term\n\n\t\t\t\tvar result = await fetch(this.$G.api_url + \"/api/organisaatiot?\" + search)\n\t\t\t\tthis.search_result = await result.json()\n\t\t\t}\n\t\t}\n\t},\n\n\tmounted() {\n\t\tthis.loadData()\n\t}\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WEOrganisation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WEOrganisation.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WEOrganisation.vue?vue&type=template&id=48e731e5&\"\nimport script from \"./WEOrganisation.vue?vue&type=script&lang=js&\"\nexport * from \"./WEOrganisation.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WERequest.vue?vue&type=style&index=0&id=73c88aa6&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-container',{attrs:{\"fluid\":\"\"}},[_c('h1',[_vm._v(\"Kirjastot\")]),(!_vm.current && _vm.mode == '')?_c('b-card',{attrs:{\"title\":\"haku\"}},[_c('b-row',{staticClass:\"my-1\"},[_c('b-col',{attrs:{\"sm\":\"4\"}},[_c('b-form-input',{attrs:{\"id\":\"input-default\",\"placeholder\":\"hae nimen alkukirjaimilla\"},nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.search.apply(null, arguments)}},model:{value:(_vm.search_term),callback:function ($$v) {_vm.search_term=$$v},expression:\"search_term\"}}),_c('label',[_vm._v(\"TAI \")]),_c('b-form-input',{attrs:{\"id\":\"input-default2\",\"placeholder\":\"hae lyhenteellä\"},nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.search.apply(null, arguments)}},model:{value:(_vm.search_lyhenne),callback:function ($$v) {_vm.search_lyhenne=$$v},expression:\"search_lyhenne\"}}),_c('b-button',{on:{\"click\":_vm.search}},[_vm._v(\"hae\")])],1)],1)],1):_vm._e(),_c('br'),(!_vm.current && _vm.mode == '')?_c('b-button',{staticClass:\"float-right\",attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){_vm.mode = 'add_new'}}},[_vm._v(\"lisää uusi\")]):_vm._e(),(_vm.loading)?_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"haen...\")]):_vm._e(),(_vm.search_result.length !== 0 && !_vm.current && _vm.mode == '')?_c('div',[_c('b-table',{attrs:{\"items\":_vm.search_result,\"fields\":_vm.fields_search},scopedSlots:_vm._u([{key:\"cell(sahkoposti)\",fn:function(data){return [_c('b',{staticClass:\"text-info\"},[_vm._v(_vm._s(data.value))])]}},{key:\"cell(nimi)\",fn:function(data){return [_c('b-link',{attrs:{\"to\":'/kirjastot/' + data.item._id}},[_vm._v(_vm._s(data.value))])]}}],null,false,1824578108)})],1):_vm._e(),(_vm.current && _vm.mode != 'edit')?_c('b-card',{attrs:{\"title\":_vm.current.nimi + ' (' + _vm.current.lyhenne + ')',\"header-bg-variant\":\"dark\"}},[_c('table',{staticClass:\"table table-sm\"},_vm._l((_vm.fields),function(field){return _c('tr',{key:field.key},[_c('td',{staticStyle:{\"min-width\":\"200px\"}},[_vm._v(_vm._s(field.key))]),(field.key == 'lomake' || field.key == 'kotisivut')?_c('td',[_c('a',{attrs:{\"target\":\"_blank\",\"href\":_vm.getLink(_vm.current[field.key])}},[_vm._v(_vm._s(_vm.current[field.key]))])]):_c('td',[_c('b',[_vm._v(_vm._s(_vm.current[field.key]))])])])}),0),(_vm.mode != 'edit')?_c('b-icon',{staticClass:\"float-right pointer\",attrs:{\"icon\":\"pen\",\"variant\":\"primary\"},on:{\"click\":function($event){_vm.mode = 'edit'}}},[_vm._v(\"muokkaa\")]):_vm._e()],1):_vm._e(),(_vm.current && _vm.mode == 'edit')?_c('b-card',{attrs:{\"title\":_vm.current.nimi,\"header-bg-variant\":\"dark\"}},[_c('table',{staticClass:\"table table-striped\"},_vm._l((_vm.fields),function(field){return _c('tr',{key:field.key},[(field.key != '_id')?[(field.label)?_c('td',{staticStyle:{\"min-width\":\"200px\"}},[_vm._v(_vm._s(field.label))]):_c('td',{staticStyle:{\"min-width\":\"200px\"}},[_vm._v(_vm._s(field.key))]),_c('td',{staticStyle:{\"min-width\":\"350px\"}},[_c('b-form-input',{model:{value:(_vm.current[field.key]),callback:function ($$v) {_vm.$set(_vm.current, field.key, $$v)},expression:\"current[field.key]\"}})],1)]:_vm._e()],2)}),0),_c('b-container',[_c('b-button',{staticClass:\"float-right\",staticStyle:{\"margin-left\":\"20px\"},attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){return _vm.saveForm()}}},[_vm._v(\"tallenna\")]),_c('b-button',{staticClass:\"float-right\",on:{\"click\":function($event){return _vm.loadData()}}},[_vm._v(\"peru\")])],1)],1):_vm._e(),(_vm.current)?_c('b-link',{attrs:{\"to\":'/kirjastot'}},[_vm._v(\"takaisin hakuun\")]):_vm._e(),(_vm.mode == 'add_new')?_c('b-card',{attrs:{\"title\":\"uusi kirjasto\",\"header-bg-variant\":\"dark\"}},[_c('table',_vm._l((_vm.fields),function(field){return _c('tr',{key:field.key},[(field.label)?_c('td',{staticStyle:{\"min-width\":\"200px\"}},[_vm._v(_vm._s(field.label))]):_c('td',{staticStyle:{\"min-width\":\"200px\"}},[_vm._v(_vm._s(field.key))]),_c('td',{staticStyle:{\"min-width\":\"350px\"}},[_c('b-form-input',{model:{value:(_vm.new_obj[field.key]),callback:function ($$v) {_vm.$set(_vm.new_obj, field.key, $$v)},expression:\"new_obj[field.key]\"}})],1)])}),0),_c('b-button',{on:{\"click\":function($event){_vm.mode = ''}}},[_vm._v(\"peru\")]),_c('b-button',{attrs:{\"variant\":\"info\"},on:{\"click\":function($event){return _vm.saveForm()}}},[_vm._v(\"tallenna\")])],1):_vm._e(),(_vm.error)?_c('div',{staticClass:\"alert alert-danger\"},[_vm._v(_vm._s(_vm.error))]):_vm._e(),_c('br'),_c('br'),(_vm.current)?_c('h2',[_vm._v(\"lainassa olevat\")]):_vm._e(),(_vm.current)?_c('b-card',[_c('b-table',{attrs:{\"items\":_vm.requests,\"fields\":_vm.request_fields},scopedSlots:_vm._u([{key:\"cell(tiedot)\",fn:function(data){return [_c('b-link',{attrs:{\"to\":'/pyynnot/' + data.item._id}},[_vm._v(_vm._s(data.item.teoksen_tiedot))])]}},{key:\"cell(tilaaja)\",fn:function(data){return [(data.item.tilaaja)?_c('b-link',{attrs:{\"to\":{ path: '/asiakkaat/' + data.item.tilaaja._id }}},[_vm._v(_vm._s(data.item.tilaaja.sukunimi)+\", \"+_vm._s(data.item.tilaaja.etunimi))]):_vm._e()]}},{key:\"cell(erapaiva)\",fn:function(data){return [_c('DueDate',{attrs:{\"item\":data.item}})]}}],null,false,458813704)})],1):_vm._e(),(_vm.current)?_c('h2',[_vm._v(\"arkistoidut\")]):_vm._e(),(_vm.current)?_c('b-card',[_c('b-button',{on:{\"click\":function($event){return _vm.loadArchive()}}},[_vm._v(\"näytä arkistoidut\")]),_c('b-table',{attrs:{\"items\":_vm.archived,\"fields\":_vm.request_fields},scopedSlots:_vm._u([{key:\"cell(tiedot)\",fn:function(data){return [_c('b-link',{attrs:{\"to\":'/pyynnot/' + data.item._id}},[_vm._v(_vm._s(data.item.teoksen_tiedot))])]}},{key:\"cell(tilaaja)\",fn:function(data){return [(data.item.tilaaja)?_c('b-link',{attrs:{\"to\":{ path: '/asiakkaat/' + data.item.tilaaja._id }}},[_vm._v(_vm._s(data.item.tilaaja.sukunimi)+\", \"+_vm._s(data.item.tilaaja.etunimi))]):_vm._e()]}},{key:\"cell(erapaiva)\",fn:function(data){return [_c('DueDate',{attrs:{\"item\":data.item}})]}}],null,false,458813704)})],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template >\n\t<b-container fluid>\n\t\t<h1>Kirjastot</h1>\n\n\n\t\t<!-- display search -->\n\t\t<b-card title=\"haku\" v-if=\"!current && mode == ''\">\n\t\t  <b-row class=\"my-1\">\n\t\t\t<b-col sm=\"4\">\n\t\t\t  <b-form-input @keydown.enter.native=\"search\" v-model=\"search_term\" id=\"input-default\" placeholder=\"hae nimen alkukirjaimilla\"></b-form-input>\n\t\t\t  <label>TAI </label>\n\t\t\t  <b-form-input @keydown.enter.native=\"search\" v-model=\"search_lyhenne\" id=\"input-default2\" placeholder=\"hae lyhenteellä\"></b-form-input>\n\t\t\t  <b-button @click=\"search\">hae</b-button>\n\t\t\t</b-col>\n\t\t  </b-row>\n\t\t</b-card>\n\t\t<br>\n\t\t<b-button class=\"float-right\" v-if=\"!current && mode == ''\" @click=\"mode = 'add_new'\" variant=\"primary\">lisää uusi</b-button>\n\n\t\t<div v-if=\"loading\" class=\"alert alert-info\">haen...</div>\n\n\t\t<!-- display search result -->\n\t\t<div v-if=\"search_result.length !== 0 && !current && mode == ''\">\n\t\t\t\t<b-table :items=\"search_result\" :fields=\"fields_search\">\n\t\t\t\t\t<template v-slot:cell(sahkoposti)=\"data\">\n\t\t\t\t\t\t<b class=\"text-info\">{{ data.value }}</b>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-slot:cell(nimi)=\"data\">\n\t\t\t\t\t\t\t<b-link :to=\"'/kirjastot/' + data.item._id\">{{data.value}}</b-link>\n\t\t\t\t\t</template>\n\t\t\t\t</b-table>\n\t\t</div>\n\n\n\t\t<!-- display individual item -->\n\t\t<b-card v-if=\"current && mode != 'edit'\" :title=\"current.nimi + ' (' + current.lyhenne + ')'\" header-bg-variant=\"dark\">\n\n\t\t\t<table class=\"table table-sm\">\n\t\t\t\t<tr v-for=\"field in fields\" :key=\"field.key\">\n\n\t\t\t\t\t<td style=\"min-width:200px\">{{field.key}}</td>\n\t\t\t\t\t<td v-if=\"field.key == 'lomake' || field.key == 'kotisivut'\"><a target=\"_blank\" :href=\"getLink(current[field.key])\">{{current[field.key]}}</a></td>\n\t\t\t\t\t<td v-else><b>{{current[field.key]}}</b></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t\t<b-icon v-if=\"mode != 'edit'\" @click=\"mode = 'edit'\" icon=\"pen\" class=\"float-right pointer\" variant=\"primary\">muokkaa</b-icon>\n\n\t\t</b-card>\n\n\n\t\t<!-- edit form -->\n\t\t<b-card v-if=\"current && mode == 'edit'\" :title=\"current.nimi\" header-bg-variant=\"dark\">\n\t\t\t<table class=\"table table-striped\">\n\t\t\t\t<tr v-for=\"field in fields\" :key=\"field.key\">\n\t\t\t\t\t<template v-if=\"field.key != '_id'\">\n\t\t\t\t\t\t<td v-if=\"field.label\" style=\"min-width:200px\">{{field.label}}</td>\n\t\t\t\t\t\t<td v-else style=\"min-width:200px\">{{field.key}}</td>\n\t\t\t\t\t\t<td style=\"min-width:350px\" ><b-form-input v-model=\"current[field.key]\"></b-form-input></td>\n\t\t\t\t\t</template>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\t\t\t<b-container>\n\n\t\t\t\t<b-button  @click=\"saveForm()\" class=\"float-right\" variant=\"primary\" style=\"margin-left:20px\">tallenna</b-button>\n\t\t\t\t<b-button  @click=\"loadData()\" class=\"float-right\" >peru</b-button>\n\n\t\t\t</b-container>\n\t\t</b-card>\n\n\t\t<b-link v-if=\"current\" :to=\"'/kirjastot'\">takaisin hakuun</b-link>\n\n\n\t\t<!-- add new item-->\n\t\t<b-card v-if=\"mode == 'add_new'\" title=\"uusi kirjasto\" header-bg-variant=\"dark\">\n\t\t\t<table>\n\t\t\t\t<tr v-for=\"field in fields\" :key=\"field.key\">\n\t\t\t\t\t<td v-if=\"field.label\" style=\"min-width:200px\">{{field.label}}</td>\n\t\t\t\t\t<td v-else style=\"min-width:200px\">{{field.key}}</td>\n\t\t\t\t\t<td style=\"min-width:350px\" ><b-form-input v-model=\"new_obj[field.key]\"></b-form-input></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t\t<b-button @click=\"mode = ''\">peru</b-button>\n\t\t\t<b-button @click=\"saveForm()\" variant=\"info\">tallenna</b-button>\n\t\t</b-card>\n\n\t\t<div class=\"alert alert-danger\" v-if=\"error\">{{error}}</div>\n\n\t\t<br><br><h2 v-if=\"current\">lainassa olevat</h2>\n\t\t<b-card v-if=\"current\">\n\t\t\t<b-table :items=\"requests\" :fields=\"request_fields\">\n\t\t\t\t<template v-slot:cell(tiedot)=\"data\">\n\t\t\t\t\t\t<b-link :to=\"'/pyynnot/' + data.item._id\">{{data.item.teoksen_tiedot}}</b-link>\n\t\t\t\t</template>\n\t\t\t\t<template v-slot:cell(tilaaja)=\"data\">\n\t\t\t\t\t<b-link v-if=\"data.item.tilaaja\" :to=\"{ path: '/asiakkaat/' + data.item.tilaaja._id }\">{{ data.item.tilaaja.sukunimi}}, {{data.item.tilaaja.etunimi}}</b-link>\n\t\t\t\t</template>\n\t\t\t\t<template v-slot:cell(erapaiva)=\"data\">\n\t\t\t\t\t\t<DueDate :item=\"data.item\"></DueDate>\n\t\t\t\t</template>\n\t\t\t</b-table>\n\n\n\t\t</b-card>\n\n\t\t<h2 v-if=\"current\">arkistoidut</h2>\n\t\t<b-card v-if=\"current\">\n\n\t\t\t<b-button @click=\"loadArchive()\">näytä arkistoidut</b-button>\n\t\t\t<b-table :items=\"archived\" :fields=\"request_fields\">\n\t\t\t\t<template v-slot:cell(tiedot)=\"data\">\n\t\t\t\t\t\t<b-link :to=\"'/pyynnot/' + data.item._id\">{{data.item.teoksen_tiedot}}</b-link>\n\t\t\t\t</template>\n\t\t\t\t<template v-slot:cell(tilaaja)=\"data\">\n\t\t\t\t\t<b-link v-if=\"data.item.tilaaja\" :to=\"{ path: '/asiakkaat/' + data.item.tilaaja._id }\">{{ data.item.tilaaja.sukunimi}}, {{data.item.tilaaja.etunimi}}</b-link>\n\t\t\t\t</template>\n\t\t\t\t<template v-slot:cell(erapaiva)=\"data\">\n\t\t\t\t\t\t<DueDate :item=\"data.item\"></DueDate>\n\t\t\t\t</template>\n\t\t\t</b-table>\n\t\t</b-card>\n\n\t</b-container>\n\n</template>\n\n\n<script>\nimport DueDate from './WEDueDateDisplay.vue'\nexport default {\n\tname: 'WELibrary',\n\tcomponents: {DueDate},\n\tdata: function() {\n\t\treturn {\n\t\t\tsearch_term: '',\n\t\t\tsearch_lyhenne: '',\n\t\t\tsearch_result: [],\n\t\t\tarchived: [],\n\t\t\tcurrent: null,\n\t\t\trequests: [],\n\t\t\tready: false,\n\t\t\tloading: false,\n\t\t\terror: null,\n\t\t\tmode: '',\n\t\t\tnew_obj: {},\n\t\t\tfields_search: [\n\t\t\t\t{key: 'nimi'},\n\t\t\t\t{key: 'lyhenne'},\n\t\t\t\t{key: 'email', label: 'sähköposti'},\n\t\t\t\t{key: 'puhelin'}\n\t\t\t],\n\t\t\tfields: [\n\t\t\t\t{key: 'nimi'},\n\t\t\t\t{key: 'puhelin'},\n\t\t\t\t{key: 'lyhenne'},\n\t\t\t\t{key: 'email', label: 'sähköposti'},\n\t\t\t\t{key: 'osoite'},\n\t\t\t\t{key: 'huomio'},\n\t\t\t\t{key: 'lomake', label: 'tilauslomakkeen URL'},\n\t\t\t\t{key: 'kotisivut', label: 'kotisivujen URL'}\n\t\t\t],\n\t\t\trequest_fields: [\n\t\t\t\t{key: '_id', label: 'tunniste'},\n\t\t\t\t{key: 'tiedot'},\n\t\t\t\t{key: 'status'},\n\t\t\t\t{key: 'tilaaja', label: 'asiakas'},\n\t\t\t\t{key: 'erapaiva', label: 'eräpäivä'}\n\t\t\t]\n\t\t}\n\t},\n\n\twatch: {\n\t\t$route(to, from) {\n\t\t\tif(to.path.includes('/kirjastot')) {\n\t\t\t\tif(this.$route.params.id) {\n\t\t\t\t\tthis.loadData()\n\t\t\t\t\t// if we hit back button *while in* library view, then we reset current library\n\t\t\t\t} else if(from.path.includes('/kirjastot')) {\n\t\t\t\t\tthis.current = null\n\t\t\t\t\t// if we came from somewhere else with current set, then re-route so that URL matches current id\n\t\t\t\t} else {\n\t\t\t\t\tif(this.current) this.$router.replace({path:'/kirjastot/' + this.current._id})\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tmethods: {\n\n\t\tgetLink(value) {\n\t\t\tif(value) {\n\t\t\t\tif(value.includes('http')) return value\n\t\t\t\telse return 'http://' + value\n\t\t\t}\n\t\t},\n\n\t\tsaveForm() {\n\t\t\tconsole.log('saveform')\n\t\t\tif(this.mode == 'add_new') {\n\t\t\t\tif(!this.new_obj.nimi || this.new_obj.nimi == '') {alert('Nimi täytyy antaa'); return}\n\t\t\t\tfetch(this.$G.api_url + \"/api/kirjastot\", {method:'POST', body: JSON.stringify(this.new_obj)})\n\t\t\t\t.then(response => { return response.json()})\n\t\t\t\t.then(json => {\n\t\t\t\t\tthis.$router.push(\"/kirjastot/\" + json._id)\n\t\t\t\t})\n\t\t\t\t.catch(data => {console.log('error' + data)})\n\t\t\t} else if(this.mode == 'edit') {\n\t\t\t\tdelete this.current._id\n\t\t\t\tfetch(this.$G.api_url + \"/api/kirjastot/\" + this.$route.params.id, {method:'PUT', body: JSON.stringify(this.current)})\n\t\t\t\t.then(response => { return response.json()})\n\t\t\t\t.then(json => {\n\t\t\t\t\tthis.loadData()\n\t\t\t\t})\n\t\t\t\t.catch(data => {console.log('error' + data)})\n\t\t\t}\n\t\t},\n\n\t\teditForm() {\n\t\t\tconsole.log(this.edit)\n\t\t\tthis.edit = !this.edit\n\t\t},\n\n\t\tloadData() {\n\t\t\tif(this.$route.params.id) {\n\t\t\t\tthis.mode = ''\n\t\t\t\tthis.error = null\n\t\t\t\tthis.ready = false\n\t\t\t\tthis.loading = true\n\t\t\t\tthis.current = null\n\t\t\t\tthis.archived = []\n\t\t\t\tfetch(this.$G.api_url + \"/api/kirjastot/\" + this.$route.params.id)\n\t\t\t\t.then(response => { return response.json()})\n\t\t\t\t.then(json => {\n\t\t\t\t\tthis.current = json\n\t\t\t\t\tthis.loadRelated()\n\t\t\t\t})\n\t\t\t\t.catch(data => {\n\t\t\t\t\tthis.error = data\n\t\t\t\t\tconsole.log('error' + data)\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\n\t\tloadRelated() {\n\t\t\tfetch(this.$G.api_url + \"/api/kirjastot/\" + this.$route.params.id + \"/loans\")\n\t\t\t.then(response => { return response.json()})\n\t\t\t.then(json => {\n\t\t\t\tthis.requests = json\n\t\t\t\tthis.ready = true\n\t\t\t\tthis.loading = false\n\t\t\t})\n\t\t\t.catch(data => {console.log('error' + data)})\n\t\t},\n\n\t\tasync loadArchive() {\n\t\t\tvar result = await fetch(this.$G.api_url + \"/api/kirjastot/\" + this.$route.params.id + \"/loans?status=arkistoitu\")\n\t\t\t\tthis.archived = await result.json()\n\t\t},\n\n\t\tasync search() {\n\t\t\tthis.current = null\n\t\t\tthis.error = null\n\t\t\tthis.loading = true\n\t\t\tvar query = ''\n\t\t\tif(this.search_term !== '') {\n\t\t\t\tif(!this.search_term.includes('*')) this.search_term = this.search_term + '*'\n\t\t\t\tquery = 'nimi=' + this.search_term\n\n\t\t\t\tvar result1 = await fetch(this.$G.api_url + \"/api/kirjastot?\" + query)\n\t\t\t\tthis.search_result = await result1.json()\n\t\t\t\tthis.loading = false\n\t\t\t} else if(this.search_lyhenne !== '') {\n\t\t\t\tquery = 'lyhenne=' + this.search_lyhenne\n\t\t\t\tvar result = await fetch(this.$G.api_url + \"/api/kirjastot?\" + query)\n\t\t\t\tthis.search_result = await result.json()\n\t\t\t\tthis.loading = false\n\t\t\t}\n\t\t}\n\t},\n\n\tmounted() {\n\t\tthis.loadData()\n\t}\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WELibrary.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WELibrary.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WELibrary.vue?vue&type=template&id=2e1389a9&\"\nimport script from \"./WELibrary.vue?vue&type=script&lang=js&\"\nexport * from \"./WELibrary.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-container',[(_vm.ready)?_c('div',[_c('b-card',{attrs:{\"header\":\"kaukolainapyyntö\"},scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('b-nav',{staticClass:\"float-right\"},[_c('b-nav-item-dropdown',{attrs:{\"id\":\"my-nav-dropdown\",\"text\":\"toiminnot\",\"toggle-class\":\"nav-link-custom\",\"right\":\"\"}},[(_vm.request.status == 'lainassa')?_c('b-dropdown-item',{staticClass:\"float-right\",on:{\"click\":function($event){return _vm.setReturned()}}},[_c('b',[_vm._v(\"merkitse palautetuksi ja arkistoi\")])]):_vm._e(),(_vm.request.tilaus_saatu && _vm.request.tilaus_saatu.status == 'lainassa')?_c('b-dropdown-item',{on:{\"click\":function($event){return _vm.openKarhuRequest()}}},[_vm._v(\"lähetä karhuviesti\")]):_vm._e(),(_vm.request.status == 'kasittelyssa' || _vm.request.status == 'tilattu' || _vm.request.status == 'uusi')?_c('b-dropdown-item',{on:{\"click\":function($event){_vm.show = !_vm.show}}},[_c('b',[_vm._v(\"tee uusi tilaus\")])]):_vm._e(),_c('b-dropdown-divider'),((_vm.request.status == 'kasittelyssa' || _vm.request.status == 'tilattu') && _vm.request.teos_on == 'artikkeli')?_c('b-dropdown-item',{on:{\"click\":function($event){return _vm.convertToBook()}}},[_vm._v(\"muuta kirjapyynnöksi\")]):_vm._e(),(_vm.request.status === 'peruttu' && !_vm.request.tilaus_saatu)?_c('b-dropdown-item',{on:{\"click\":function($event){_vm.show_modal_cancel_archive = true}}},[_vm._v(\"palauta käsittelyyn\")]):_vm._e(),(_vm.request.status != 'peruttu' && !_vm.request.tilaus_saatu)?_c('b-dropdown-item',{on:{\"click\":function($event){return _vm.openCancelRequest()}}},[_vm._v(\"peruuta pyyntö\")]):_vm._e()],1)],1),_c('h3',[_vm._v(_vm._s(_vm.request.teos_on)+\"pyyntö: \"),_c('b',[_vm._v(_vm._s(_vm.request._id))]),_vm._v(\" (\"),_c('span',{staticClass:\"text-info\"},[_vm._v(_vm._s(_vm.$G.getStatus(_vm.request.status)))]),_vm._v(\")\")])]},proxy:true}],null,false,2560333342)},[_c('b-card-body',[_c('b-card-title',[_vm._v(_vm._s(_vm.request.teoksen_tiedot)+\" \"),(_vm.request.status != 'arkistoitu')?_c('b-icon',{staticClass:\"float-right cursor\",attrs:{\"icon\":\"pen\",\"variant\":\"primary\",\"id\":\"edit-note\"},on:{\"click\":function($event){_vm.show_modal_title = true}}}):_vm._e()],1),_c('table',{staticClass:\"table\"},[_c('tbody',[(_vm.request.tilaaja)?_c('tr',[_c('td',{staticStyle:{\"width\":\"200px\"}},[_vm._v(\"asiakas\")]),_c('td',[_c('b',[_c('b-link',{attrs:{\"to\":'/asiakkaat/' + _vm.request.tilaaja._id}},[_vm._v(_vm._s(_vm.request.tilaaja.etunimi)+\" \"+_vm._s(_vm.request.tilaaja.sukunimi)+\" \")])],1),(!_vm.request.tilaaja.sukunimi || _vm.request.tilaaja.sukunimi == '')?_c('b-link',{attrs:{\"to\":'/asiakkaat/' + _vm.request.tilaaja._id}},[_vm._v(\"nimi puuttuu \")]):_vm._e(),(_vm.isExternal())?_c('div',[_c('p',{staticClass:\"alert alert-warning\"},[_vm._v(\"Kaukolainapyyntö on tehty kaukolainahenkilökunnan tunnuksilla, joten asiakas täytyy liittää pyyntöön käsin (ja mahdollisesti lisätä sähköposti) tai luoda uusi asiakas.\")]),_c('p',[_c('b',[_vm._v(_vm._s(_vm.request.sukunimi)+\", \"+_vm._s(_vm.request.etunimi))])]),_c('p',[_c('b-input',{nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.searchClients()}},model:{value:(_vm.client_query),callback:function ($$v) {_vm.client_query=$$v},expression:\"client_query\"}}),_c('b-button',{on:{\"click\":function($event){return _vm.searchClients()}}},[_vm._v(\"hae\")])],1),(_vm.clients_result && _vm.clients_result.length)?[_c('b-table',{attrs:{\"small\":\"\",\"striped\":\"\",\"hover\":\"\",\"items\":_vm.clients_result,\"fields\":_vm.client_fields},scopedSlots:_vm._u([{key:\"cell(sahkoposti)\",fn:function(data){return [_vm._v(\" \"+_vm._s(data.value.join(', '))+\" \")]}},{key:\"cell(valitse)\",fn:function(data){return [_c('b-button',{attrs:{\"title\":\"liitä asiakas ja anna tarvittaessa toinen sähköposti\",\"variant\":\"primary\"},on:{\"click\":function($event){return _vm.openJoinClient(data.item)}}},[_vm._v(\"liitä\")])]}}],null,false,1859691286)})]:_c('div',[_vm._v(\"ei tuloksia\")]),_c('b-button',{staticClass:\"float-right\",staticStyle:{\"margin-top\":\"40px\"},attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){_vm.show_modal_external = !_vm.show_modal_external}}},[_vm._v(\"Luo uusi asiakas\")])],2):_vm._e()],1),_c('td')]):_c('tr',[_c('td',[_vm._v(\"asiakas\")]),_c('td',[(_vm.isExternal())?_c('div',[_c('p',[_c('b',[_vm._v(_vm._s(_vm.request.sukunimi)+\", \"+_vm._s(_vm.request.etunimi))])]),_c('p',{staticClass:\"alert alert-warning\"},[_vm._v(\"Kaukolainapyyntö on tehty kaukolainahenkilökunnan tunnuksilla, joten asiakas täytyy liittää pyyntöön käsin (ja mahdollisesti lisätä sähköposti) tai luoda uusi asiakas.\")]),_c('p',[_c('b-input',{nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.searchClients()}},model:{value:(_vm.client_query),callback:function ($$v) {_vm.client_query=$$v},expression:\"client_query\"}}),_c('b-button',{on:{\"click\":function($event){return _vm.searchClients()}}},[_vm._v(\"hae\")])],1),(_vm.clients_result && _vm.clients_result.length)?[_c('b-table',{attrs:{\"small\":\"\",\"striped\":\"\",\"hover\":\"\",\"items\":_vm.clients_result,\"fields\":_vm.client_fields},scopedSlots:_vm._u([{key:\"cell(sahkoposti)\",fn:function(data){return [_vm._v(\" \"+_vm._s(data.value.join(', '))+\" \")]}},{key:\"cell(valitse)\",fn:function(data){return [_c('b-button',{attrs:{\"title\":\"liitä asiakas ja anna tarvittaessa toinen sähköposti\",\"variant\":\"primary\"},on:{\"click\":function($event){return _vm.openJoinClient(data.item)}}},[_vm._v(\"liitä\")])]}}],null,false,1859691286)})]:_c('div',[_vm._v(\"ei tuloksia\")]),_c('b-button',{staticClass:\"float-right\",staticStyle:{\"margin-top\":\"40px\"},attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){_vm.show_modal_external = !_vm.show_modal_external}}},[_vm._v(\"Luo uusi asiakas\")])],2):_vm._e()]),_c('td')]),(_vm.request.teos_on == 'artikkeli')?[_c('tr',[_c('td',{staticStyle:{\"min-width\":\"200px\"}},[_vm._v(\"mistä löysit?\")]),_c('td',[_c('b',[_vm._v(_vm._s(_vm.request.mista_loysit_julkaisun_tiedot))])]),_c('td')])]:_vm._e(),_c('tr',[_c('td',[_vm._v(\" maksaja \")]),_c('td',[(_vm.request.hintakatto)?_c('b-badge',{staticClass:\"float-right alert alert-info\"},[_vm._v(\"hintakatto: \"+_vm._s(_vm.request.hintakatto))]):_vm._e(),(!_vm.request.maksaja_varmistettu && _vm.request.maksaja != 'asiakas')?_c('div',{staticClass:\"alert alert-warning\"},[_vm._v(\"maksajaa ei ole liitetty mihinkään organisaatioon\")]):_vm._e(),(_vm.request.maksaja == 'asiakas')?_c('div',[_c('b',[_vm._v(\"asiakas itse\")])]):(!_vm.request.maksaja_varmistettu)?_c('div',[(!_vm.request.maksaja_varmistettu)?_c('b',[_vm._v(\" \"+_vm._s(_vm.request.maksaja)+\": \"+_vm._s(_vm.request.laitos)+\" \"+_vm._s(_vm.request.projekti))]):_vm._e()]):_c('div',[_c('span',{attrs:{\"title\":\"lomakkeelta tullut maksajatieto\"}},[_vm._v(_vm._s(_vm.request.laitos)+\": \")]),_c('b-link',{attrs:{\"title\":\"linkitetty maksajatieto\",\"to\":'/organisaatiot/' + _vm.request.maksaja_varmistettu._id}},[_vm._v(_vm._s(_vm.request.maksaja_varmistettu.nimi))])],1),(_vm.request.maksaja_varmistettu)?_c('div',[_c('table',{staticClass:\"table table-striped\"},[_c('tbody',[(_vm.request.projekti)?_c('tr',[_c('td',[_vm._v(\"projekti:\")]),_c('td',[_c('b',[_vm._v(\" \"+_vm._s(_vm.request.projekti))])])]):_vm._e(),(_vm.request.kustannuspaikka)?_c('tr',[_c('td',[_vm._v(\"kustannuspaikka:\")]),_c('td',[_c('b',[_vm._v(\" \"+_vm._s(_vm.request.kustannuspaikka))])])]):_vm._e()])]),(_vm.request.maksaja_info && _vm.request.maksaja_varmistettu)?_c('div',{staticClass:\"alert alert-info\"},[_vm._v(_vm._s(_vm.request.maksaja_info))]):_vm._e()]):_vm._e()],1),_c('td',{attrs:{\"title\":\"muokkaa maksajatietoja\"}},[(_vm.request.status != 'arkistoitu')?_c('b-icon',{staticClass:\"float-right cursor\",attrs:{\"icon\":\"pen\",\"variant\":\"primary\",\"id\":\"edit-note\"},on:{\"click\":function($event){_vm.show_modal_payer = true}}}):_vm._e()],1)]),_c('tr',[_c('td',{staticStyle:{\"min-width\":\"200px\"}},[_vm._v(\"huomautuksia \"),_c('br'),_vm._v(\"(sisäinen)\")]),_c('td',[(_vm.request.huomautuksia != '')?_c('div',{staticClass:\"alert alert-info\",domProps:{\"innerHTML\":_vm._s(_vm.$G.renderBreaks(_vm.request.huomautuksia,'\\n'))}}):_vm._e()]),_c('td',{attrs:{\"title\":\"muokkaa huomautuksia\"}},[_c('b-icon',{staticClass:\"float-right cursor\",attrs:{\"icon\":\"pen\",\"variant\":\"primary\",\"id\":\"edit-note\"},on:{\"click\":function($event){_vm.show_modal_note = !_vm.show_modal_note}}})],1)])],2)]),(_vm.request.tarvitaan_viimeistaan)?_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"tarvitaan viimeistään: \"+_vm._s(_vm.request.tarvitaan_viimeistaan))]):_vm._e(),(_vm.request.o_id)?_c('div',{staticClass:\"alert alert-danger\"},[_vm._v(\"Vanha laina Kakesta!\")]):_vm._e(),(_vm.request.peruutuksen_syy)?_c('div',[_vm._v(\"peruutuksen syy: \"),_c('b',{staticClass:\"text-danger\"},[_vm._v(_vm._s(_vm.request.peruutuksen_syy)+\" \")])]):_vm._e(),(_vm.request.o_retudate_has_value == 'yes')?_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"Tämä lienee palautettu \"+_vm._s(_vm.request.pvm_palautettu)+\"?\")]):_vm._e(),(_vm.request.karhut && _vm.request.karhut.length)?_c('div',_vm._l((_vm.request.karhut),function(karhu){return _c('div',{key:karhu,staticClass:\"alert alert-danger\"},[_vm._v(\" karhuttu: \"+_vm._s(karhu)+\" \")])}),0):_vm._e()],1)],1),_c('br'),((_vm.request.status == 'lainassa' || _vm.request.status == 'arkistoitu') && _vm.request.tilaus_saatu)?_c('b-card',{attrs:{\"footer\":'palautettu: ' + _vm.formatDate(_vm.request.tilaus_saatu.pvm_palautettu,'reverse', '.'),\"header-class\":\"dim\",\"header-text-variant\":\"white\"},scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('h6',{staticClass:\"mb-0\"},[_c('b',[_vm._v(\"kaukolaina\")]),_vm._v(\" (saapunut: \"+_vm._s(_vm.formatDate(_vm.request.tilaus_saatu.pvm_saapunut, 'reverse', '.'))+\")\")])]},proxy:true}],null,false,3341928750)},[_c('table',{staticClass:\"table\"},[_c('tr',[_c('td',[_vm._v(\"kirjastosta\")]),_c('td',[_c('b-link',{attrs:{\"text-variant\":\"white\",\"to\":'/kirjastot/' + _vm.request.tilaus_saatu.kirjasto_id}},[_vm._v(\" \"+_vm._s(_vm.request.tilaus_saatu.kirjaston_nimi))])],1),_c('td')]),(_vm.request.teos_on == 'kirja')?_c('tr',[_c('td',{staticStyle:{\"width\":\"200px\"}},[_vm._v(\"eräpäivä\")]),_c('td',[_c('DueDate',{attrs:{\"item\":_vm.request}})],1),_c('td',{attrs:{\"title\":\"muokkaa eräpäivää\"},on:{\"click\":function($event){_vm.show_modal_loan_date = true}}},[_c('b-icon',{staticClass:\"float-right cursor\",attrs:{\"icon\":\"pen\",\"variant\":\"primary\",\"id\":\"edit-note\"}})],1)]):_vm._e(),_c('tr',[_c('td',{staticStyle:{\"width\":\"200px\"}},[_vm._v(\"maksu\")]),_c('td',[_vm._v(_vm._s(_vm.request.tilaus_saatu.maksu))]),_c('td')]),_c('tr',[_c('td',{staticStyle:{\"width\":\"200px\"}},[_vm._v(\"tilausviesti\")]),_c('td',[_c('div',{staticClass:\"cursor\",attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.$root.$emit('bv::toggle::collapse', _vm.request.tilaus_saatu._id)}}},[_c('b-icon',{attrs:{\"icon\":\"caret-right\"}}),_vm._v(\"tilausviesti\")],1),_c('b-collapse',{attrs:{\"id\":_vm.request.tilaus_saatu._id,\"accordion\":\"my-accordion\",\"role\":\"tabpanel\"}},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.$G.renderBreaks(_vm.request.tilaus_saatu.viesti,'\\n'))}})])],1),_c('td')])])]):_vm._e(),_c('br'),(_vm.orders.length)?_c('div',[_c('b-table',{staticClass:\"table table-striped\",attrs:{\"items\":_vm.orders,\"fields\":_vm.order_fields},scopedSlots:_vm._u([{key:\"cell(kirjaston_nimi)\",fn:function(data){return [_c('div',{staticStyle:{\"min-width\":\"350px\"}},[_c('b-link',{attrs:{\"to\":'/kirjastot/' + data.item.kirjasto_id}},[_vm._v(\" \"+_vm._s(data.value))]),_c('div',{staticClass:\"cursor\",attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.$root.$emit('bv::toggle::collapse', data.item._id)}}},[_c('b-icon',{attrs:{\"icon\":\"caret-right\"}}),_vm._v(\"tilausviesti\")],1),_c('b-collapse',{attrs:{\"id\":data.item._id,\"accordion\":\"my-accordion\",\"role\":\"tabpanel\"}},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.$G.renderBreaks(data.item.viesti,'\\n'))}})])],1)]}},{key:\"cell(pvm)\",fn:function(data){return [(data.item.recdate)?_c('div',[_vm._v(_vm._s(data.item.recdate))]):_c('div',[_vm._v(_vm._s(_vm.$G.getDateFromUUID(data.item._id)))])]}},{key:\"cell(pvm_saapunut)\",fn:function(data){return [_c('div',[_vm._v(_vm._s(_vm.formatDate(data.value)))])]}},{key:\"cell(pvm_palautettu)\",fn:function(data){return [_c('b',{staticClass:\"text text-info\"},[_vm._v(_vm._s(_vm.formatDate(data.value)))])]}},{key:\"cell(status)\",fn:function(data){return [_c('b',{staticClass:\"text text-info\"},[_vm._v(_vm._s(data.value.replace('_', ' ')))])]}},{key:\"cell(toiminto)\",fn:function(data){return [(_vm.request.status !== 'arkistoitu')?_c('b-nav',{staticClass:\"float-right\"},[(data.item.status !== 'palautettu' && data.item.status !== 'ei_saatavilla')?_c('b-nav-item-dropdown',{attrs:{\"id\":\"tilaus-nav-dropdown\",\"text\":\"toiminnot\",\"toggle-class\":\"nav-link-custom\",\"right\":\"\"}},[_c('b-dropdown-divider'),((_vm.request.status == 'kasittelyssa' || _vm.request.status == 'tilattu') && _vm.request.teos_on == 'kirja')?_c('b-dropdown-item',{staticClass:\"float-right\",attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){return _vm.openArrived(data.item)}}},[_vm._v(\"merkitse saapuneeksi ja lainaa\")]):_vm._e(),((_vm.request.status == 'kasittelyssa' || _vm.request.status == 'tilattu') && _vm.request.teos_on == 'artikkeli')?_c('b-dropdown-item',{staticClass:\"float-right\",attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){return _vm.openArrived(data.item)}}},[_vm._v(\"merkitse saapuneeksi ja arkistoi\")]):_vm._e(),(!data.item.status || data.item.status == 'tilattu')?_c('b-dropdown-item',{on:{\"click\":function($event){return _vm.setNotAvailable(data.item._id)}}},[_vm._v(\"ei saatavilla\")]):_vm._e()],1):_vm._e()],1):_vm._e()]}}],null,false,1422393677)})],1):_vm._e(),(_vm.error)?_c('div',{staticClass:\"alert alert-danger\"},[_vm._v(_vm._s(_vm.error))]):_vm._e(),_c('b-modal',{attrs:{\"title\":\"muuta eräpäivää\",\"cancel-title\":\"peru\",\"ok-title\":\"tallenna\",\"header-bg-variant\":_vm.primaryBG,\"header-text-variant\":_vm.primaryText},on:{\"ok\":_vm.setLoanDate},model:{value:(_vm.show_modal_loan_date),callback:function ($$v) {_vm.show_modal_loan_date=$$v},expression:\"show_modal_loan_date\"}},[(_vm.request.tilaus_saatu)?_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"nykyinen eräpäivä: \"+_vm._s(_vm.formatDate(_vm.request.tilaus_saatu.pvm_erapaiva, 'reverse','.')))]):_vm._e(),_vm._v(\" uusi eräpäivä: \"),_c('b-input',{model:{value:(_vm.new_loan_date),callback:function ($$v) {_vm.new_loan_date=$$v},expression:\"new_loan_date\"}}),_c('b-form-checkbox',{attrs:{\"id\":\"checkbox-ei-peruutusviestia\",\"name\":\"checkbox-ei-peruutusviestia\",\"value\":\"no\",\"unchecked-value\":\"yes\"},on:{\"change\":function($event){return _vm.setDueDate()}},model:{value:(_vm.tilaus_uusittavissa),callback:function ($$v) {_vm.tilaus_uusittavissa=$$v},expression:\"tilaus_uusittavissa\"}},[_vm._v(\" ei voi enää uusia \")]),(_vm.tilaus_uusittavissa == 'no')?[_vm._v(\"lisätieto: \"),_c('b-input',{model:{value:(_vm.tilaus_info),callback:function ($$v) {_vm.tilaus_info=$$v},expression:\"tilaus_info\"}})]:_vm._e()],2),_c('b-modal',{attrs:{\"title\":\"Muokkaa otsikkoa\",\"cancel-title\":\"peru\",\"ok-title\":\"tallenna\",\"header-bg-variant\":_vm.primaryBG,\"header-text-variant\":_vm.primaryText},on:{\"ok\":_vm.updateTitle},model:{value:(_vm.show_modal_title),callback:function ($$v) {_vm.show_modal_title=$$v},expression:\"show_modal_title\"}},[_c('b-form-textarea',{attrs:{\"rows\":\"3\"},model:{value:(_vm.title),callback:function ($$v) {_vm.title=$$v},expression:\"title\"}}),(_vm.sending)?_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"lähetetään...\")]):_vm._e()],1),_c('b-modal',{attrs:{\"title\":\"Lähetä karhuviesti\",\"cancel-title\":\"peru\",\"ok-title\":\"lähetä\",\"header-bg-variant\":_vm.primaryBG,\"header-text-variant\":_vm.primaryText},on:{\"ok\":_vm.sendDueNotice},model:{value:(_vm.show_modal_due_notice),callback:function ($$v) {_vm.show_modal_due_notice=$$v},expression:\"show_modal_due_notice\"}},[_vm._v(\" karhuviesti asiakkaalle: \"),_c('b-form-textarea',{attrs:{\"rows\":\"6\"},model:{value:(_vm.due_notice),callback:function ($$v) {_vm.due_notice=$$v},expression:\"due_notice\"}}),(_vm.sending)?_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"lähetetään...\")]):_vm._e()],1),_c('b-modal',{attrs:{\"title\":\"peruuta kaukolainapyyntö\",\"cancel-title\":\"peru\",\"ok-title\":\"merkitse peruutetuksi\",\"header-bg-variant\":_vm.primaryBG,\"header-text-variant\":_vm.primaryText},on:{\"ok\":function($event){return _vm.setCancelled()}},model:{value:(_vm.show_modal_cancel_request),callback:function ($$v) {_vm.show_modal_cancel_request=$$v},expression:\"show_modal_cancel_request\"}},[(_vm.request.status == 'lainassa')?_c('div',{staticClass:\"alert alert-danger\"},[_vm._v(\"Teos on lainassa! \")]):_vm._e(),(_vm.laheta_peruutusilmoitus === 'yes')?[_vm._v(\" peruutusviesti asiakkaalle: \"),_c('b-form-textarea',{attrs:{\"rows\":\"6\"},model:{value:(_vm.cancel_reason),callback:function ($$v) {_vm.cancel_reason=$$v},expression:\"cancel_reason\"}})]:_vm._e(),_c('b-form-checkbox',{attrs:{\"id\":\"checkbox-ei-peruutusviestia\",\"name\":\"checkbox-ei-peruutusviestia\",\"value\":\"yes\",\"unchecked-value\":\"no\"},model:{value:(_vm.laheta_peruutusilmoitus),callback:function ($$v) {_vm.laheta_peruutusilmoitus=$$v},expression:\"laheta_peruutusilmoitus\"}},[_vm._v(\" lähetä sähköposti-ilmoitus asiakkaalle \")]),(_vm.sending)?_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"lähetetään...\")]):_vm._e()],2),_c('b-modal',{attrs:{\"title\":\"palauta käsittelyyn\",\"cancel-title\":\"peru\",\"ok-title\":\"palauta käsittelyyn\",\"header-bg-variant\":_vm.primaryBG,\"header-text-variant\":_vm.primaryText},on:{\"ok\":function($event){return _vm.setNonArchived()}},model:{value:(_vm.show_modal_cancel_archive),callback:function ($$v) {_vm.show_modal_cancel_archive=$$v},expression:\"show_modal_cancel_archive\"}},[(_vm.sending)?_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"lähetetään...\")]):_vm._e()]),_c('b-modal',{attrs:{\"size\":\"lg\",\"title\":\"merkitse saapuneeksi\",\"cancel-title\":\"peru\",\"ok-title\":\"merkitse saapuneeksi\",\"header-bg-variant\":_vm.primaryBG,\"header-text-variant\":_vm.primaryText},on:{\"ok\":_vm.setArrived},model:{value:(_vm.show_modal_arrived),callback:function ($$v) {_vm.show_modal_arrived=$$v},expression:\"show_modal_arrived\"}},[(_vm.arrived_order)?_c('b-form-group',{staticStyle:{\"max-width\":\"450px\"}},[(_vm.request.teos_on == 'kirja')?[_c('label',[_vm._v(\"eräpäivä (pp.kk.vvvv)\")]),_c('b-input',{model:{value:(_vm.arrived_order.erapaiva),callback:function ($$v) {_vm.$set(_vm.arrived_order, \"erapaiva\", $$v)},expression:\"arrived_order.erapaiva\"}})]:_vm._e(),_c('label',[_vm._v(\"maksu\")]),_c('b-input',{model:{value:(_vm.arrived_order.maksu),callback:function ($$v) {_vm.$set(_vm.arrived_order, \"maksu\", $$v)},expression:\"arrived_order.maksu\"}}),_c('b-form-checkbox',{attrs:{\"id\":\"checkbox-2\",\"name\":\"checkbox-2\",\"value\":\"yes\",\"unchecked-value\":\"no\"},model:{value:(_vm.laheta_saapumisilmoitus),callback:function ($$v) {_vm.laheta_saapumisilmoitus=$$v},expression:\"laheta_saapumisilmoitus\"}},[_vm._v(\" lähetä saapumisilmoitus \")])],2):_vm._e(),(_vm.sending)?_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"lähetetään...\")]):_vm._e(),(_vm.error)?_c('div',{staticClass:\"alert alert-danger\"},[_vm._v(_vm._s(_vm.error))]):_vm._e()],1),_c('b-modal',{attrs:{\"size\":\"lg\",\"title\":\"huomautuksia\",\"header-bg-variant\":_vm.primaryBG,\"header-text-variant\":_vm.primaryText},on:{\"ok\":_vm.setNote,\"cancel\":function($event){_vm.note = _vm.request.huomautuksia}},model:{value:(_vm.show_modal_note),callback:function ($$v) {_vm.show_modal_note=$$v},expression:\"show_modal_note\"}},[_c('b-form-textarea',{attrs:{\"id\":\"textarea\",\"placeholder\":\"\",\"rows\":\"10\"},model:{value:(_vm.note),callback:function ($$v) {_vm.note=$$v},expression:\"note\"}}),(_vm.sending)?_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"lähetetään...\")]):_vm._e()],1),_c('b-modal',{attrs:{\"size\":\"lg\",\"title\":\"tilauslomake\",\"header-bg-variant\":_vm.primaryBG,\"header-text-variant\":_vm.primaryText},scopedSlots:_vm._u([{key:\"modal-footer\",fn:function(){return [_c('div')]},proxy:true}],null,false,2017372688),model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_c('WEOrderForm',{attrs:{\"request\":_vm.request},on:{\"exit\":function($event){return _vm.loadData()}}})],1),_c('b-modal',{attrs:{\"size\":\"lg\",\"title\":\"maksaja\",\"header-bg-variant\":_vm.primaryBG,\"header-text-variant\":_vm.primaryText},on:{\"ok\":_vm.setPayer,\"cancel\":_vm.cancelPayer},model:{value:(_vm.show_modal_payer),callback:function ($$v) {_vm.show_modal_payer=$$v},expression:\"show_modal_payer\"}},[_c('b-form-checkbox',{attrs:{\"id\":\"checkbox-1\",\"name\":\"checkbox-1\",\"value\":\"yes\",\"unchecked-value\":\"no\"},model:{value:(_vm.payer_is_client),callback:function ($$v) {_vm.payer_is_client=$$v},expression:\"payer_is_client\"}},[_vm._v(\" asiakas maksaa itse \")]),(_vm.payer_is_client != 'yes')?_c('b-form',[_c('b-form-group',{staticStyle:{\"margin-top\":\"30px\"}},[_c('label',[_vm._v(\"valitse maksaja\")]),_c('b-select',{attrs:{\"options\":_vm.organisations,\"value-field\":\"_id\",\"text-field\":\"nimi\"},model:{value:(_vm.payer_selected),callback:function ($$v) {_vm.payer_selected=$$v},expression:\"payer_selected\"}}),(_vm.payer_selected)?_c('b-form-textarea',{attrs:{\"id\":\"textarea\",\"placeholder\":\"Lisätietoa maksuun liittyen...\",\"rows\":\"3\",\"max-rows\":\"6\"},model:{value:(_vm.payer_info),callback:function ($$v) {_vm.payer_info=$$v},expression:\"payer_info\"}}):_vm._e()],1)],1):_vm._e(),(_vm.sending)?_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"lähetetään...\")]):_vm._e()],1),_c('b-modal',{attrs:{\"title\":\"ulkopuolinen asiakas\"},on:{\"ok\":_vm.saveExternalClient},model:{value:(_vm.show_modal_external),callback:function ($$v) {_vm.show_modal_external=$$v},expression:\"show_modal_external\"}},[_c('b-form-group',{staticStyle:{\"margin-top\":\"30px\"}},[_c('label',[_vm._v(\"sukunimi\")]),_c('b-input',{model:{value:(_vm.external_client.sukunimi),callback:function ($$v) {_vm.$set(_vm.external_client, \"sukunimi\", $$v)},expression:\"external_client.sukunimi\"}}),_c('label',[_vm._v(\"etunnimi\")]),_c('b-input',{model:{value:(_vm.external_client.etunimi),callback:function ($$v) {_vm.$set(_vm.external_client, \"etunimi\", $$v)},expression:\"external_client.etunimi\"}}),_c('label',[_vm._v(\"sähköposti (PAKOLLINEN)\")]),_c('b-input',{model:{value:(_vm.external_client.sahkoposti),callback:function ($$v) {_vm.$set(_vm.external_client, \"sahkoposti\", $$v)},expression:\"external_client.sahkoposti\"}}),_c('label',[_vm._v(\"kortin numero\")]),_c('b-input',{model:{value:(_vm.external_client.kirjastokortin_numero),callback:function ($$v) {_vm.$set(_vm.external_client, \"kirjastokortin_numero\", $$v)},expression:\"external_client.kirjastokortin_numero\"}})],1),(_vm.sending)?_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"lähetetään...\")]):_vm._e()],1),_c('b-modal',{attrs:{\"title\":\"liitä asiakas pyyntöön\",\"cancel-title\":\"peru\",\"ok-title\":\"liitä\"},on:{\"ok\":_vm.saveJoinClient},model:{value:(_vm.show_modal_join_client),callback:function ($$v) {_vm.show_modal_join_client=$$v},expression:\"show_modal_join_client\"}},[(_vm.join_client)?_c('b-form-group',{staticStyle:{\"margin-top\":\"30px\"}},[_c('label',[_vm._v(\"sukunimi\")]),_c('p',[_c('b',[_vm._v(_vm._s(_vm.join_client.sukunimi))])]),_c('label',[_vm._v(\"etunnimi\")]),_c('p',[_c('b',[_vm._v(_vm._s(_vm.join_client.etunimi))])]),_c('label',[_vm._v(\"kortin numero\")]),_c('p',[_vm._v(_vm._s(_vm.join_client.kirjastokortin_numero))]),_c('label',[_vm._v(\"sähköposti(t)\")]),_c('p',[_c('b',[_vm._v(_vm._s(_vm.join_client.sahkoposti.join(', ')))])]),_c('label',[_vm._v(\"lisää sähköposti asiakkaalle (valinnainen)\")]),_c('b-input',{model:{value:(_vm.add_sahkoposti),callback:function ($$v) {_vm.add_sahkoposti=$$v},expression:\"add_sahkoposti\"}})],1):_vm._e(),(_vm.sending)?_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"lähetetään...\")]):_vm._e()],1)],1):_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"lataan...\")]),(_vm.ready && (_vm.request.status == 'arkistoitu' || _vm.request.status == 'peruttu'))?_c('img',{staticStyle:{\"position\":\"absolute\",\"top\":\"120px\",\"left\":\"0%\"},attrs:{\"src\":require(\"@/assets/images/arkistoitu_vino.png\")}}):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('b-form-group',[_c('label',[_vm._v(\"valitse kirjasto\")]),_c('b-select',{attrs:{\"id\":\"lib_select\",\"options\":_vm.libraries,\"value-field\":\"_id\",\"text-field\":\"nimi\"},model:{value:(_vm.selected),callback:function ($$v) {_vm.selected=$$v},expression:\"selected\"}}),(_vm.current)?_c('b-container',[_c('h3',[_vm._v(_vm._s(_vm.current.nimi))]),_c('b-card',[_c('table',_vm._l((_vm.fields),function(field){return _c('tr',{key:field.key},[_c('td',{staticStyle:{\"min-width\":\"200px\"}},[_vm._v(_vm._s(field.key))]),(field.key == 'lomake' || field.key == 'kotisivut')?_c('td',[_c('a',{attrs:{\"target\":\"_blank\",\"href\":_vm.current[field.key]}},[_vm._v(_vm._s(_vm.current[field.key]))])]):_c('td',[_c('b',[_vm._v(_vm._s(_vm.current[field.key]))])])])}),0)]),(!_vm.current.lomake)?_c('div',[_c('label',[_vm._v(\"saatepohjat\")]),_c('b-select',{attrs:{\"id\":\"saate_select\",\"options\":_vm.saatteet,\"value-field\":\"_id\",\"text-field\":\"_id\"},model:{value:(_vm.message_id),callback:function ($$v) {_vm.message_id=$$v},expression:\"message_id\"}}),_c('label',[_vm._v(\"saateviesti\")]),_c('b-form-textarea',{attrs:{\"id\":\"textarea\",\"placeholder\":\"valitse saatepohja...\",\"rows\":\"10\"},model:{value:(_vm.message),callback:function ($$v) {_vm.message=$$v},expression:\"message\"}})],1):_vm._e(),(_vm.current.lomake && _vm.current.lomake != '')?_c('div',[_c('div',{staticClass:\"alert alert-info\"},[_c('a',{attrs:{\"target\":\"_blank\",\"href\":_vm.current.lomake}},[_vm._v(\"tilauslomake\")]),_vm._v(\" (aukeaa uuteen ikkunaan)\")]),_c('br')]):_vm._e(),_c('b-button',{staticClass:\"float-right\",staticStyle:{\"margin-top\":\"20px\"},attrs:{\"id\":\"send-order\",\"variant\":\"primary\"},on:{\"click\":function($event){return _vm.sendOrder()}}},[_vm._v(\"lähetä tilaus\")]),(_vm.sending)?_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"Lähetetään...\")]):_vm._e(),_c('b-form-checkbox',{attrs:{\"id\":\"checkbox-2\",\"name\":\"checkbox-2\",\"value\":\"no\",\"unchecked-value\":\"yes\"},model:{value:(_vm.send_email),callback:function ($$v) {_vm.send_email=$$v},expression:\"send_email\"}},[_vm._v(\" älä lähetä tilausta sähköpostitse \")])],1):_vm._e()],1),(_vm.error)?_c('div',{staticClass:\"alert alert-danger\"},[_vm._v(_vm._s(_vm.error))]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template >\n\t<div>\n\n\t\t<b-form-group>\n\t\t\t<label>valitse kirjasto</label>\n\t\t\t<b-select id=\"lib_select\"\n\t\t\t\tv-model=\"selected\"\n\t\t\t\t:options=\"libraries\"\n\t\t\t\tvalue-field=\"_id\"\n\t\t\t\ttext-field=\"nimi\">\n\t\t\t</b-select>\n\n\n\t\t\t<b-container v-if=\"current\">\n\n\t\t\t\t<h3>{{current.nimi}}</h3>\n\t\t\t\t<b-card>\n\t\t\t\t\t<table>\n\t\t\t\t\t\t<tr v-for=\"field in fields\" :key=\"field.key\">\n\n\t\t\t\t\t\t\t<td style=\"min-width:200px\">{{field.key}}</td>\n\t\t\t\t\t\t\t<td v-if=\"field.key == 'lomake' || field.key == 'kotisivut'\"><a target=\"_blank\" :href=\"current[field.key]\">{{current[field.key]}}</a></td>\n\t\t\t\t\t\t\t<td v-else><b>{{current[field.key]}}</b></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</table>\n\n\t\t\t\t</b-card>\n\n\t\t\t\t<div v-if=\"!current.lomake\">\n\n\t\t\t\t\t<label>saatepohjat</label>\n\t\t\t\t\t<b-select id=\"saate_select\"\n\t\t\t\t\t\t:options=\"saatteet\"\n\t\t\t\t\t\tvalue-field=\"_id\"\n\t\t\t\t\t\ttext-field=\"_id\"\n\t\t\t\t\t\tv-model=\"message_id\">\n\t\t\t\t\t</b-select>\n\n\t\t\t\t\t<label>saateviesti</label>\n\t\t\t\t\t<b-form-textarea\n\t\t\t\t\t  id=\"textarea\"\n\t\t\t\t\t  v-model=\"message\"\n\t\t\t\t\t  placeholder=\"valitse saatepohja...\"\n\t\t\t\t\t  rows=\"10\"\n\t\t\t\t\t></b-form-textarea>\n\t\t\t\t</div>\n\n\t\t\t\t<div v-if=\"current.lomake && current.lomake != ''\">\n\t\t\t\t\t<div class=\"alert alert-info\"><a target=\"_blank\" :href=\"current.lomake\">tilauslomake</a> (aukeaa uuteen ikkunaan)</div><br>\n\n\t\t\t\t</div>\n\t\t\t\t<!--\n\t\t\t\t<label>lisätieto (ei lähetetä)</label>\n\t\t\t\t<b-form-textarea v-if=\"current\"\n\t\t\t\t  id=\"textarea\"\n\t\t\t\t  v-model=\"info\"\n\t\t\t\t  placeholder=\"Lisätietoa tilaukseen liittyen...\"\n\t\t\t\t  rows=\"3\"\n\t\t\t\t  max-rows=\"3\"\n\t\t\t\t></b-form-textarea>\n\t\t\t\t-->\n\n\t\t\t\t<b-button id=\"send-order\" variant=\"primary\" @click=\"sendOrder()\" class=\"float-right\" style=\"margin-top:20px\">lähetä tilaus</b-button>\n\t\t\t\t<div v-if=\"sending\" class=\"alert alert-info\">Lähetetään...</div>\n\t\t\t\t<b-form-checkbox\n\t\t\t\t  id=\"checkbox-2\"\n\t\t\t\t  v-model=\"send_email\"\n\t\t\t\t  name=\"checkbox-2\"\n\t\t\t\t  value=\"no\"\n\t\t\t\t  unchecked-value=\"yes\"\n\t\t\t\t>\n\t\t\t\t  älä lähetä tilausta sähköpostitse\n\t\t\t\t</b-form-checkbox>\n\t\t\t</b-container>\n\n\t\t</b-form-group>\n\n\t\t<div class=\"alert alert-danger\" v-if=\"error\">{{error}}</div>\n\n\t</div>\n\n</template>\n\n\n<script>\n\nexport default {\n\tname: 'WEOrderForm',\n\tdata: function() {\n\t\treturn {\n\t\t\tlibraries: [],\n\t\t\tmessage: '',\n\t\t\tmessage_id: null,\n\t\t\tinfo: '',\n\t\t\tselected: null,\n\t\t\tcurrent: null,\n\t\t\terror: null,\n\t\t\tfields: [\n\t\t\t\t{key: 'email', label:'sähköposti'},\n\t\t\t\t{key: 'osoite'},\n\t\t\t\t{key: 'kotisivut'}\n\t\t\t],\n\t\t\tsaatteet: [],\n\t\t\tsend_email: 'yes',\n\t\t\tsending: false\n\t\t}\n\t},\n\n\tprops: ['request'],\n\n\twatch: {\n\t\tselected() {\n\t\t\tthis.getCurrent()\n\t\t},\n\t\tmessage_id() {\n\t\t\tfor(var m of this.saatteet) {\n\t\t\t\tif(m._id == this.message_id) {\n\t\t\t\t\tthis.message = m.saate\n\t\t\t\t\tvar info_en = this.getInfo('en')\n\t\t\t\t\tvar info_fi = this.getInfo('fi')\n\t\t\t\t\tthis.message = this.message.replace('[[ID]]', this.request._id)\n\t\t\t\t\tif(this.request.tarvitaan_viimeistaan && this.request.tarvitaan_viimeistaan != 'undefined')\n\t\t\t\t\t\tthis.message = this.message.replace('[[TARVITAAN_VIIMEISTAAN]]', this.request.tarvitaan_viimeistaan)\n\t\t\t\t\tthis.message = this.message.replace('[[EN]]', info_en)\n\t\t\t\t\tthis.message = this.message.replace('[[FI]]', info_fi)\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t},\n\tmethods: {\n\t\tgetCurrent() {\n\t\t\tfor(var lib of this.libraries) {\n\t\t\t\tif(lib._id == this.selected) {\n\t\t\t\t\tthis.current = lib\n\t\t\t\t\tthis.message = lib.saate\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tgetInfo(lang) {\n\t\t\tvar lang_info = {\n\t\t\t\t'pyynto_id': {'en':'ID', 'fi': 'ID'},\n\t\t\t\t'teoksen_tiedot': {'en':'title', 'fi': 'teos'}\n\t\t\t}\n\n\t\t\treturn lang_info['teoksen_tiedot'][lang] + ': ' + this.request.teoksen_tiedot\n\n\t\t},\n\n\t\tasync sendOrder() {\n\t\t\tif(!this.message) {\n\t\t\t\talert('Saateviesti on pakollinen!')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.sending = true;\n\t\t\tvar order = {\n\t\t\t\t'kirjasto_id' : this.current._id,\n\t\t\t\t'kirjaston_nimi': this.current.nimi,\n\t\t\t\t'viesti': this.message,\n\t\t\t\t'info': this.info,\n\t\t\t\t'message_id': this.message_id,\n\t\t\t\t'send_mail': this.send_email\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tvar response = await fetch(this.$G.api_url + \"/api/pyynnot/\" + this.$route.params.id + \"/tilaukset\", {method:\"POST\", body: JSON.stringify(order)})\n\t\t\t\tvar json = await response.json()\n\t\t\t\tif(!response.ok) throw('fail')\n\t\t\t\telse {\n\t\t\t\t\tthis.sending = false\n\t\t\t\t\tthis.$emit('exit', true)\n\t\t\t\t}\n\t\t\t} catch(e) {\n\t\t\t\tthis.sending = false\n\t\t\t\tif(json && json.error) alert(json.error)\n\t\t\t\telse alert('virhe ' + e)\n\t\t\t}\n\n\t\t},\n\n\t\tloadMessages() {\n\t\t\tfetch(this.$G.api_url + \"/api/saatteet?_id=tilaussaate*\")\n\t\t\t.then(response => { return response.json()})\n\t\t\t.then(json => {\n\t\t\t\tthis.saatteet = json\n\t\t\t\tthis.ready = true\n\t\t\t})\n\t\t\t.catch(data => {console.log('error' + data)})\n\t\t},\n\n\t\tloadData() {\n\t\t\tthis.ready = false\n\t\t\tfetch(this.$G.api_url + \"/api/kirjastot?sort=nimi\")\n\t\t\t.then(response => { return response.json()})\n\t\t\t.then(json => {\n\t\t\t\tthis.libraries = json\n\t\t\t\tthis.loadMessages()\n\t\t\t\tthis.ready = true\n\t\t\t})\n\t\t\t.catch(data => {alert('error' + data)})\n\t\t}\n\t},\n\n\tmounted() {\n\t\tthis.loadData()\n\n\t}\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WEOrderForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WEOrderForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WEOrderForm.vue?vue&type=template&id=2172208f&\"\nimport script from \"./WEOrderForm.vue?vue&type=script&lang=js&\"\nexport * from \"./WEOrderForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<style scoped>\n\t.cursor {\n\t\tcursor: pointer;\n\t}\n\t.card-body {\n\t\t#padding: 0px\n\t}\n\t.card-title {\n\t\tfont-style: italic;\n\t}\n\t.card-header {\n\t\tborder-color: #002957;\n\t\tborder-width: 5px;\n\t\tbackground-color: white;\n\t}\n\t.text-danger {\n\t\tfont-weight: bold;\n\t}\n\t.dim {\n\t\tbackground-color: #f1f1f2;\n\t}\n</style>\n\n<template >\n\t<b-container>\n\t\t<div v-if=\"ready\">\n\n\t\t\t<b-card header=\"kaukolainapyyntö\">\n\t\t\t\t<template #header>\n\t\t\t\t\t<b-nav class=\"float-right\">\n\t  \t\t\t\t    <b-nav-item-dropdown\n\t  \t\t\t\t      id=\"my-nav-dropdown\"\n\t  \t\t\t\t      text=\"toiminnot\"\n\t  \t\t\t\t      toggle-class=\"nav-link-custom\"\n\t  \t\t\t\t      right\n\t  \t\t\t\t    >\n\n\t\t\t\t\t\t<b-dropdown-item v-if=\"request.status == 'lainassa'\" class=\"float-right\"  @click=\"setReturned()\"><b>merkitse palautetuksi ja arkistoi</b></b-dropdown-item>\n\t\t\t\t\t\t  <b-dropdown-item v-if=\"request.tilaus_saatu && request.tilaus_saatu.status == 'lainassa'\" @click=\"openKarhuRequest()\" >lähetä karhuviesti</b-dropdown-item>\n\t  \t\t\t\t      <b-dropdown-item v-if=\"request.status == 'kasittelyssa' || request.status == 'tilattu' || request.status == 'uusi'\" @click=\"show = !show\" ><b>tee uusi tilaus</b></b-dropdown-item>\n\n\t  \t\t\t\t      <b-dropdown-divider></b-dropdown-divider>\n\t  \t\t\t\t      <b-dropdown-item v-if=\"(request.status == 'kasittelyssa' || request.status == 'tilattu') && request.teos_on == 'artikkeli'\" @click=\"convertToBook()\">muuta kirjapyynnöksi</b-dropdown-item>\n\t\t\t\t\t\t  <b-dropdown-item  @click=\"show_modal_cancel_archive = true\" v-if=\"request.status === 'peruttu' && !request.tilaus_saatu\">palauta käsittelyyn</b-dropdown-item >\n\t  \t\t\t\t\t  <b-dropdown-item v-if=\"request.status != 'peruttu' && !request.tilaus_saatu\" @click=\"openCancelRequest()\">peruuta pyyntö</b-dropdown-item>\n\t  \t\t\t\t    </b-nav-item-dropdown>\n\t  \t\t\t\t  </b-nav>\n\t\t\t\t\t<h3 >{{request.teos_on}}pyyntö: <b>{{request._id}}</b> (<span class=\"text-info\">{{$G.getStatus(request.status)}}</span>)</h3>\n\t\t\t\t</template>\n\n\t\t\t\t<b-card-body>\n\t\t\t\t\t<b-card-title>{{request.teoksen_tiedot}} <b-icon v-if=\"request.status != 'arkistoitu'\" icon=\"pen\" variant=\"primary\" id=\"edit-note\" class=\"float-right cursor\" @click=\"show_modal_title = true\"></b-icon></b-card-title>\n\n\t\t\t\t<table class=\"table\">\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<tr v-if=\"request.tilaaja\">\n\t\t\t\t\t\t\t<td style=\"width:200px\">asiakas</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<b><b-link :to=\"'/asiakkaat/' + request.tilaaja._id\">{{request.tilaaja.etunimi}} {{request.tilaaja.sukunimi}} </b-link></b>\n\t\t\t\t\t\t\t\t<b-link v-if=\"!request.tilaaja.sukunimi || request.tilaaja.sukunimi == ''\" :to=\"'/asiakkaat/' + request.tilaaja._id\">nimi puuttuu </b-link>\n\n\t\t\t\t\t\t\t\t<div v-if=\"isExternal()\">\n\t\t\t\t\t\t\t\t\t<p class=\"alert alert-warning\">Kaukolainapyyntö on tehty kaukolainahenkilökunnan tunnuksilla, joten asiakas täytyy liittää pyyntöön käsin (ja mahdollisesti lisätä sähköposti) tai luoda uusi asiakas.</p>\n\t\t\t\t\t\t\t\t\t<p><b>{{request.sukunimi}}, {{request.etunimi}}</b></p>\n\t\t\t\t\t\t\t\t\t<p><b-input @keydown.enter.native=\"searchClients()\" v-model=\"client_query\"></b-input>\n\t\t\t\t\t\t\t\t\t\t<b-button @click=\"searchClients()\">hae</b-button>\n\t\t\t\t\t\t\t\t\t</p>\n\n\t\t\t\t\t\t\t\t\t<template v-if=\"clients_result && clients_result.length\">\n\t\t\t\t\t\t\t\t\t\t<b-table small striped hover :items=\"clients_result\" :fields=\"client_fields\">\n\t\t\t\t\t\t\t\t\t\t\t<template v-slot:cell(sahkoposti)=\"data\">\n\t\t\t\t\t\t\t\t\t\t\t\t{{data.value.join(', ')}}\n\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t\t<template v-slot:cell(valitse)=\"data\">\n\t\t\t\t\t\t\t\t\t\t\t\t<b-button title=\"liitä asiakas ja anna tarvittaessa toinen sähköposti\" variant=\"primary\" @click=\"openJoinClient(data.item)\">liitä</b-button>\n\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t</b-table>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<div v-else>ei tuloksia</div>\n\n\t\t\t\t\t\t\t\t\t<b-button class=\"float-right\" style=\"margin-top:40px\" variant=\"primary\" @click=\"show_modal_external = !show_modal_external\">Luo uusi asiakas</b-button>\n\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\n\t\t\t\t\t\t<tr v-else>\n\t\t\t\t\t\t\t<td>asiakas</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<div v-if=\"isExternal()\">\n\t\t\t\t\t\t\t\t\t<p><b>{{request.sukunimi}}, {{request.etunimi}}</b></p>\n\t\t\t\t\t\t\t\t\t<p class=\"alert alert-warning\">Kaukolainapyyntö on tehty kaukolainahenkilökunnan tunnuksilla, joten asiakas täytyy liittää pyyntöön käsin (ja mahdollisesti lisätä sähköposti) tai luoda uusi asiakas.</p>\n\t\t\t\t\t\t\t\t\t<p><b-input @keydown.enter.native=\"searchClients()\" v-model=\"client_query\"></b-input>\n\t\t\t\t\t\t\t\t\t\t<b-button @click=\"searchClients()\">hae</b-button>\n\t\t\t\t\t\t\t\t\t</p>\n\n\t\t\t\t\t\t\t\t\t<template v-if=\"clients_result && clients_result.length\">\n\t\t\t\t\t\t\t\t\t\t<b-table small striped hover :items=\"clients_result\" :fields=\"client_fields\">\n\t\t\t\t\t\t\t\t\t\t\t<template v-slot:cell(sahkoposti)=\"data\">\n\t\t\t\t\t\t\t\t\t\t\t\t{{data.value.join(', ')}}\n\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t\t<template v-slot:cell(valitse)=\"data\">\n\t\t\t\t\t\t\t\t\t\t\t\t<b-button title=\"liitä asiakas ja anna tarvittaessa toinen sähköposti\" variant=\"primary\" @click=\"openJoinClient(data.item)\">liitä</b-button>\n\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t</b-table>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<div v-else>ei tuloksia</div>\n\n\t\t\t\t\t\t\t\t\t<b-button class=\"float-right\" style=\"margin-top:40px\" variant=\"primary\" @click=\"show_modal_external = !show_modal_external\">Luo uusi asiakas</b-button>\n\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t</tr>\n<!--\n\t\t\t\t\t\t<tr v-if=\"request.status == 'lainassa'\">\n\t\t\t\t\t\t\t<td>kirjastosta</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<b-link  :to=\"'/kirjastot/' + request.lainassa_kirjastosta\">{{loan_library_name}}</b-link>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t</tr>\n\n\t\t\t\t\t\t<tr v-if=\"request.status == 'lainassa' && request.tilaus_saatu\">\n\t\t\t\t\t\t\t<td>eräpäivä</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<b>{{formatDate(request.tilaus_saatu.pvm_erapaiva, 'reverse','.')}} </b>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<b-button class=\"float-right\" variant=\"primary\" @click=\"show_modal_loan_date = true\" size=\"sm\">muuta eräpäivää</b-button><br><br>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\n\t\t\t\t\t-->\n\n\t\t\t\t\t\t<template v-if=\"request.teos_on == 'artikkeli'\">\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td style=\"min-width:200px\">mistä löysit?</td>\n\t\t\t\t\t\t\t\t<td><b>{{request.mista_loysit_julkaisun_tiedot}}</b></td>\n\t\t\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t<tr >\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\tmaksaja\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<b-badge v-if=\"request.hintakatto\" class=\"float-right alert alert-info\">hintakatto: {{request.hintakatto}}</b-badge>\n\t\t\t\t\t\t\t\t<div v-if=\"!request.maksaja_varmistettu && request.maksaja != 'asiakas'\" class=\"alert alert-warning\">maksajaa ei ole liitetty mihinkään organisaatioon</div>\n\t\t\t\t\t\t\t\t<div v-if=\"request.maksaja == 'asiakas'\"><b>asiakas itse</b></div>\n\t\t\t\t\t\t\t\t<div v-else-if=\"!request.maksaja_varmistettu\">\n\t\t\t\t\t\t\t\t\t<b v-if=\"!request.maksaja_varmistettu\"> {{request.maksaja}}: {{request.laitos}} {{request.projekti}}</b>\n\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div v-else>\n\t\t\t\t\t\t\t\t\t<span title=\"lomakkeelta tullut maksajatieto\">{{request.laitos}}: </span>\n\t\t\t\t\t\t\t\t\t<b-link title=\"linkitetty maksajatieto\" :to=\"'/organisaatiot/' + request.maksaja_varmistettu._id\">{{request.maksaja_varmistettu.nimi}}</b-link>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div v-if=\"request.maksaja_varmistettu\">\n\t\t\t\t\t\t\t\t\t<table class=\"table table-striped\">\n\t\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t\t<tr v-if=\"request.projekti\"><td>projekti:</td><td><b> {{request.projekti}}</b></td></tr>\n\t\t\t\t\t\t\t\t\t\t\t<tr v-if=\"request.kustannuspaikka\"><td>kustannuspaikka:</td><td><b> {{request.kustannuspaikka}}</b></td></tr>\n\t\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t</table>\n\n\t\t\t\t\t\t\t\t\t<div v-if=\"request.maksaja_info && request.maksaja_varmistettu\" class=\"alert alert-info\">{{request.maksaja_info}}</div>\n\n\t\t\t\t\t\t\t\t</div>\n\n\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td title = \"muokkaa maksajatietoja\"><b-icon v-if=\"request.status != 'arkistoitu'\" icon=\"pen\" variant=\"primary\" id=\"edit-note\" class=\"float-right cursor\" @click=\"show_modal_payer = true\"></b-icon></td>\n\t\t\t\t\t\t</tr>\n<!--\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td style=\"min-width:200px\">maksu</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{{request.maksu}} (tieto tulee tilauksesta)\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t</tr>\n-->\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td style=\"min-width:200px\">huomautuksia <br>(sisäinen)</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<div v-if=\"request.huomautuksia != ''\" class=\"alert alert-info\" v-html=\"$G.renderBreaks(request.huomautuksia,'\\n')\"></div>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td title = \"muokkaa huomautuksia\"><b-icon icon=\"pen\" variant=\"primary\" id=\"edit-note\" class=\"float-right cursor\" @click=\"show_modal_note = !show_modal_note\"></b-icon></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t\t<div v-if=\"request.tarvitaan_viimeistaan\" class=\"alert alert-info\">tarvitaan viimeistään: {{request.tarvitaan_viimeistaan}}</div>\n\t\t\t\t<div v-if=\"request.o_id\" class=\"alert alert-danger\">Vanha laina Kakesta!</div>\n\t\t\t\t<div v-if=\"request.peruutuksen_syy\">peruutuksen syy: <b class=\"text-danger\">{{request.peruutuksen_syy}} </b> </div>\n\t\t\t\t<div v-if=\"request.o_retudate_has_value == 'yes'\" class=\"alert alert-info\" >Tämä lienee palautettu {{request.pvm_palautettu}}?</div>\n\n\t\t\t\t<div v-if=\"request.karhut && request.karhut.length\">\n\t\t\t\t\t<div v-for=\"karhu in request.karhut\" :key=\"karhu\" class=\"alert alert-danger\">\n\t\t\t\t\t\tkarhuttu: {{karhu}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</b-card-body>\n\t\t</b-card>\n\t\t<br>\n\n\n\t\t<b-card v-if=\"(request.status == 'lainassa' || request.status == 'arkistoitu') && request.tilaus_saatu\" :footer=\"'palautettu: ' + formatDate(request.tilaus_saatu.pvm_palautettu,'reverse', '.')\" header-class=\"dim\" header-text-variant=\"white\">\n\t\t\t<template #header >\n\n\t\t\t  <h6 class=\"mb-0\"><b>kaukolaina</b> (saapunut: {{formatDate(request.tilaus_saatu.pvm_saapunut, 'reverse', '.')}})</h6>\n\n\t        </template>\n\t\t\t<table class=\"table\">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>kirjastosta</td>\n\t\t\t\t\t<td><b-link text-variant=\"white\" :to=\"'/kirjastot/' + request.tilaus_saatu.kirjasto_id\"> {{request.tilaus_saatu.kirjaston_nimi}}</b-link></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\n\t\t\t\t<tr v-if=\"request.teos_on == 'kirja'\">\n\t\t\t\t\t<td style=\"width:200px\">eräpäivä</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<DueDate :item=\"request\"></DueDate>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td @click=\"show_modal_loan_date = true\" title=\"muokkaa eräpäivää\"><b-icon icon=\"pen\" variant=\"primary\" id=\"edit-note\" class=\"float-right cursor\"></b-icon></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td style=\"width:200px\">maksu</td>\n\t\t\t\t\t<td>{{request.tilaus_saatu.maksu}}</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<!--\n\t\t\t\t<tr>\n\t\t\t\t\t<td style=\"width:200px\">info</td>\n\t\t\t\t\t<td>{{request.tilaus_saatu.info}}</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t-->\n\t\t\t\t<tr>\n\t\t\t\t\t<td style=\"width:200px\">tilausviesti</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<div class=\"cursor\" @click=\"$root.$emit('bv::toggle::collapse', request.tilaus_saatu._id)\" size=\"sm\"><b-icon icon=\"caret-right\" />tilausviesti</div>\n\t\t\t\t\t\t<b-collapse :id=\"request.tilaus_saatu._id\" accordion=\"my-accordion\" role=\"tabpanel\">\n\t\t\t\t\t\t\t<div v-html=\"$G.renderBreaks(request.tilaus_saatu.viesti,'\\n')\"></div>\n\t\t\t\t\t\t</b-collapse>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\n\t\t\t</table>\n\n\t\t</b-card>\n\n\n\n\t\t<br>\n\n\n\t\t\t<!-- TILAUKSET -->\n\t\t\t<!--<b-card v-if=\"request.tilaaja\" header=\"tilaukset\" header-tag=\"h5\" style=\"border:none\">-->\n\n\n\t\t\t\t<div v-if=\"orders.length\">\n\t\t\t\t\t<b-table :items=\"orders\" :fields=\"order_fields\" class=\"table table-striped\">\n\n\t\t\t\t\t\t<template v-slot:cell(kirjaston_nimi)=\"data\">\n\t\t\t\t\t\t\t<div style=\"min-width:350px\">\n\t\t\t\t\t\t\t\t<b-link :to=\"'/kirjastot/' + data.item.kirjasto_id\"> {{data.value}}</b-link>\n\n\t\t\t\t\t\t\t\t<div class=\"cursor\" @click=\"$root.$emit('bv::toggle::collapse', data.item._id)\" size=\"sm\"><b-icon icon=\"caret-right\" />tilausviesti</div>\n\n\t\t\t\t\t\t\t\t<b-collapse :id=\"data.item._id\" accordion=\"my-accordion\" role=\"tabpanel\">\n\t\t\t\t\t\t\t\t\t<div v-html=\"$G.renderBreaks(data.item.viesti,'\\n')\"></div>\n\t\t\t\t\t\t\t\t</b-collapse>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t<template v-slot:cell(pvm)=\"data\">\n\t\t\t\t\t\t\t<div v-if=\"data.item.recdate\">{{ data.item.recdate}}</div>\n\t\t\t\t\t\t\t<div v-else>{{ $G.getDateFromUUID(data.item._id) }}</div>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t<template v-slot:cell(pvm_saapunut)=\"data\">\n\t\t\t\t\t\t\t<div>{{formatDate(data.value)}}</div>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t<template v-slot:cell(pvm_palautettu)=\"data\">\n\t\t\t\t\t\t\t<b class=\"text text-info\">{{formatDate(data.value)}}</b>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t<template v-slot:cell(status)=\"data\">\n\t\t\t\t\t\t\t<b class=\"text text-info\">{{data.value.replace('_', ' ')}}</b>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t<template v-slot:cell(toiminto)=\"data\">\n\n\t\t\t\t\t\t\t<b-nav v-if=\"request.status !== 'arkistoitu'\" class=\"float-right\">\n\t\t\t\t\t\t\t\t<b-nav-item-dropdown\n\t\t\t\t\t\t\t\t\tv-if=\"data.item.status !== 'palautettu' && data.item.status !== 'ei_saatavilla'\"\n\t\t\t\t\t\t\t\t\tid=\"tilaus-nav-dropdown\"\n\t\t\t\t\t\t\t\t\ttext=\"toiminnot\"\n\t\t\t\t\t\t\t\t\ttoggle-class=\"nav-link-custom\"\n\t\t\t\t\t\t\t\t\tright\n\t\t\t\t\t\t\t\t>\n\n\t\t\t  \t\t\t\t      <b-dropdown-divider></b-dropdown-divider>\n\n\t\t\t  \t\t\t\t      <b-dropdown-item v-if=\"(request.status == 'kasittelyssa' || request.status == 'tilattu') && request.teos_on == 'kirja'\" class=\"float-right\" variant=\"primary\" @click=\"openArrived(data.item)\">merkitse saapuneeksi ja lainaa</b-dropdown-item>\n\n\t\t\t\t\t\t\t\t  <b-dropdown-item  v-if=\"(request.status == 'kasittelyssa' || request.status == 'tilattu') && request.teos_on == 'artikkeli'\" variant=\"primary\" class=\"float-right\" @click=\"openArrived(data.item)\">merkitse saapuneeksi ja arkistoi</b-dropdown-item >\n\n\t\t\t  \t\t\t\t\t  <b-dropdown-item v-if=\"!data.item.status || data.item.status == 'tilattu'\" @click=\"setNotAvailable(data.item._id)\" >ei saatavilla</b-dropdown-item>\n\t\t\t  \t\t\t\t    </b-nav-item-dropdown>\n\t\t\t  \t\t\t\t  </b-nav>\n\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</b-table>\n\n\t\t\t\t</div>\n\n\t\t\t<!--</b-card>-->\n\n\n\t\t\t<div class=\"alert alert-danger\" v-if=\"error\">{{error}}</div>\n\n\n\n\t\t\t<!-- MODAL ERÄPÄIVÄNVAIHTO-->\n\t\t\t<b-modal v-model=\"show_modal_loan_date\"\n\t\t\t\t\ttitle=\"muuta eräpäivää\"\n\t\t\t\t\tcancel-title=\"peru\"\n\t\t\t\t\tok-title=\"tallenna\"\n\t\t\t\t\t@ok=\"setLoanDate\"\n\t\t\t\t\t:header-bg-variant=\"primaryBG\"\n\t\t\t\t\t:header-text-variant=\"primaryText\">\n\t\t\t\t\t<div v-if=\"request.tilaus_saatu\" class=\"alert alert-info\">nykyinen eräpäivä: {{formatDate(request.tilaus_saatu.pvm_erapaiva, 'reverse','.')}}</div>\n\t\t\t\t\tuusi eräpäivä: <b-input v-model=\"new_loan_date\"></b-input>\n\t\t\t\t\t<b-form-checkbox\n\t\t\t\t\t  id=\"checkbox-ei-peruutusviestia\"\n\t\t\t\t\t  v-model=\"tilaus_uusittavissa\"\n\t\t\t\t\t  name=\"checkbox-ei-peruutusviestia\"\n\t\t\t\t\t  value=\"no\"\n\t\t\t\t\t  unchecked-value=\"yes\"\n\t\t\t\t\t  @change =\"setDueDate()\"\n\t\t\t\t\t>\n\t\t\t\t\t  ei voi enää uusia\n\t\t\t\t\t</b-form-checkbox>\n\t\t\t\t\t<template v-if=\"tilaus_uusittavissa == 'no'\">lisätieto: <b-input v-model=\"tilaus_info\"></b-input></template>\n\n\t\t\t</b-modal>\n\n\t\t\t<!-- MODAL OTSIKKO -->\n\t\t\t<b-modal v-model=\"show_modal_title\"\n\t\t\t\ttitle=\"Muokkaa otsikkoa\"\n\t\t\t\tcancel-title=\"peru\"\n\t\t\t\tok-title=\"tallenna\"\n\t\t\t\t@ok=\"updateTitle\"\n\t\t\t\t:header-bg-variant=\"primaryBG\"\n\t\t\t\t:header-text-variant=\"primaryText\">\n\t\t\t\t<b-form-textarea v-model=\"title\" rows=\"3\"></b-form-textarea>\n\t\t\t\t<div v-if=\"sending\" class=\"alert alert-info\">lähetetään...</div>\n\t\t\t</b-modal>\n\n\t\t\t<!-- MODAL KARHUVIESTI -->\n\t\t\t<b-modal v-model=\"show_modal_due_notice\"\n\t\t\t\ttitle=\"Lähetä karhuviesti\"\n\t\t\t\tcancel-title=\"peru\"\n\t\t\t\tok-title=\"lähetä\"\n\t\t\t\t@ok=\"sendDueNotice\"\n\t\t\t\t:header-bg-variant=\"primaryBG\"\n\t\t\t\t:header-text-variant=\"primaryText\">\n\t\t\t\tkarhuviesti asiakkaalle:\n\t\t\t\t<b-form-textarea v-model=\"due_notice\" rows=\"6\"></b-form-textarea>\n\t\t\t\t<div v-if=\"sending\" class=\"alert alert-info\">lähetetään...</div>\n\t\t\t</b-modal>\n\n\t\t\t<!-- MODAL PYYNNÖN PERUUTUS -->\n\t\t\t<b-modal v-model=\"show_modal_cancel_request\"\n\t\t\t\ttitle=\"peruuta kaukolainapyyntö\"\n\t\t\t\tcancel-title=\"peru\"\n\t\t\t\tok-title=\"merkitse peruutetuksi\"\n\t\t\t\t@ok=\"setCancelled()\"\n\t\t\t\t:header-bg-variant=\"primaryBG\"\n\t\t\t\t:header-text-variant=\"primaryText\">\n\t\t\t\t<div class=\"alert alert-danger\" v-if=\"request.status == 'lainassa'\">Teos on lainassa! </div>\n\t\t\t\t<template v-if=\"laheta_peruutusilmoitus === 'yes'\">\n\t\t\t\t\tperuutusviesti asiakkaalle:\n\t\t\t\t\t<b-form-textarea v-model=\"cancel_reason\" rows=\"6\"></b-form-textarea>\n\t\t\t\t</template>\n\t\t\t\t<b-form-checkbox\n\t\t\t\t  id=\"checkbox-ei-peruutusviestia\"\n\t\t\t\t  v-model=\"laheta_peruutusilmoitus\"\n\t\t\t\t  name=\"checkbox-ei-peruutusviestia\"\n\t\t\t\t  value=\"yes\"\n\t\t\t\t  unchecked-value=\"no\"\n\t\t\t\t>\n\t\t\t\t  lähetä sähköposti-ilmoitus asiakkaalle\n\t\t\t\t</b-form-checkbox>\n\t\t\t\t<div v-if=\"sending\" class=\"alert alert-info\">lähetetään...</div>\n\t\t\t</b-modal>\n\n\n\t\t\t<!-- MODAL ARKISTOINNIN PERUUTUS-->\n\t\t\t<b-modal v-model=\"show_modal_cancel_archive\"\n\t\t\t\ttitle=\"palauta käsittelyyn\"\n\t\t\t\tcancel-title=\"peru\"\n\t\t\t\tok-title=\"palauta käsittelyyn\"\n\t\t\t\t@ok=\"setNonArchived()\"\n\t\t\t\t:header-bg-variant=\"primaryBG\"\n\t\t\t\t:header-text-variant=\"primaryText\">\n\t\t\t\t<div v-if=\"sending\" class=\"alert alert-info\">lähetetään...</div>\n\t\t\t</b-modal>\n\n\t\t\t<!-- MODAL SAAPUNEEKSI-ILMOITTAMISLOMAKE -->\n\t\t\t<b-modal v-model=\"show_modal_arrived\"\n\t\t\t\tsize=\"lg\"\n\t\t\t\ttitle=\"merkitse saapuneeksi\"\n\t\t\t\tcancel-title=\"peru\"\n\t\t\t\tok-title=\"merkitse saapuneeksi\"\n\t\t\t\t@ok=\"setArrived\"\n\t\t\t\t:header-bg-variant=\"primaryBG\"\n\t\t\t\t:header-text-variant=\"primaryText\">\n\n\t\t\t\t<b-form-group v-if=\"arrived_order\" style=\"max-width:450px\">\n\t\t\t\t\t<template v-if=\"request.teos_on == 'kirja'\">\n\t\t\t\t\t\t<label>eräpäivä (pp.kk.vvvv)</label>\n\t\t\t\t\t\t<b-input v-model=\"arrived_order.erapaiva\"></b-input>\n\t\t\t\t\t</template>\n\n\t\t\t\t\t<label>maksu</label>\n\t\t\t\t\t<b-input v-model=\"arrived_order.maksu\"></b-input>\n\n\t\t\t\t<b-form-checkbox\n\t\t\t\t  id=\"checkbox-2\"\n\t\t\t\t  v-model=\"laheta_saapumisilmoitus\"\n\t\t\t\t  name=\"checkbox-2\"\n\t\t\t\t  value=\"yes\"\n\t\t\t\t  unchecked-value=\"no\"\n\t\t\t\t>\n\t\t\t\t  lähetä saapumisilmoitus\n\t\t\t\t</b-form-checkbox>\n\n\t\t\t\t</b-form-group>\n\t\t\t\t<div v-if=\"sending\" class=\"alert alert-info\">lähetetään...</div>\n\t\t\t\t<div class=\"alert alert-danger\" v-if=\"error\">{{error}}</div>\n\t\t\t</b-modal>\n\n\t\t\t<!-- MODAL HUOMIOLOMAKE -->\n\t\t\t<b-modal v-model=\"show_modal_note\"\n\t\t\t\tsize=\"lg\"\n\t\t\t\ttitle=\"huomautuksia\"\n\t\t\t\t@ok=\"setNote\"\n\t\t\t\t@cancel=\"note = request.huomautuksia\"\n\t\t\t\t:header-bg-variant=\"primaryBG\"\n\t\t\t\t:header-text-variant=\"primaryText\"\n\t\t\t>\n\t\t\t\t<b-form-textarea\n\t\t\t\t  id=\"textarea\"\n\t\t\t\t  v-model=\"note\"\n\t\t\t\t  placeholder=\"\"\n\t\t\t\t  rows=\"10\"\n\t\t\t\t></b-form-textarea>\n\t\t\t\t<div v-if=\"sending\" class=\"alert alert-info\">lähetetään...</div>\n\n\t\t\t</b-modal>\n\n\t\t\t<!-- MODAL TILAUSLOMAKE -->\n\t\t\t<b-modal v-model=\"show\"\n\t\t\t\tsize=\"lg\"\n\t\t\t\ttitle=\"tilauslomake\"\n\t\t\t\t:header-bg-variant=\"primaryBG\"\n\t\t\t\t:header-text-variant=\"primaryText\"\n\t\t\t>\n\t\t\t\t<WEOrderForm @exit=\"loadData()\" v-bind:request=\"request\"></WEOrderForm>\n\t\t\t\t<template v-slot:modal-footer>\n\t\t\t\t\t<div></div>\n\t\t\t\t</template>\n\t\t\t</b-modal>\n\n\n\t\t\t<!-- MODAL MAKSAJAN VALINTA -->\n\t\t\t<b-modal v-model=\"show_modal_payer\"\n\t\t\t\tsize=\"lg\"\n\t\t\t\ttitle=\"maksaja\"\n\t\t\t\t:header-bg-variant=\"primaryBG\"\n\t\t\t\t:header-text-variant=\"primaryText\"\n\t\t\t\t@ok=\"setPayer\"\n\t\t\t\t@cancel=\"cancelPayer\"\n\t\t\t>\n\n\t\t\t\t<b-form-checkbox\n\t\t\t\t  id=\"checkbox-1\"\n\t\t\t\t  v-model=\"payer_is_client\"\n\t\t\t\t  name=\"checkbox-1\"\n\t\t\t\t  value=\"yes\"\n\t\t\t\t  unchecked-value=\"no\"\n\t\t\t\t>\n\t\t\t\t  asiakas maksaa itse\n\t\t\t\t</b-form-checkbox>\n\n\t\t\t\t<b-form v-if=\"payer_is_client != 'yes'\">\n\t\t\t\t\t<b-form-group style=\"margin-top:30px\">\n\t\t\t\t\t\t<label>valitse maksaja</label>\n\t\t\t\t\t\t<b-select\n\t\t\t\t\t\t\tv-model=\"payer_selected\"\n\t\t\t\t\t\t\t:options=\"organisations\"\n\t\t\t\t\t\t\tvalue-field=\"_id\"\n\t\t\t\t\t\t\ttext-field=\"nimi\">\n\t\t\t\t\t\t</b-select>\n\n\t\t\t\t\t\t<b-form-textarea v-if=\"payer_selected\"\n\t\t\t\t\t\t  id=\"textarea\"\n\t\t\t\t\t\t  v-model=\"payer_info\"\n\t\t\t\t\t\t  placeholder=\"Lisätietoa maksuun liittyen...\"\n\t\t\t\t\t\t  rows=\"3\"\n\t\t\t\t\t\t  max-rows=\"6\"\n\t\t\t\t\t\t></b-form-textarea>\n\t\t\t\t\t</b-form-group>\n\t\t\t\t</b-form>\n\t\t\t\t<div v-if=\"sending\" class=\"alert alert-info\">lähetetään...</div>\n\t\t\t</b-modal>\n\n\n\t\t\t<!-- MODAL ULKOPUOLINEN ASIAKAS -->\n\t\t\t<b-modal v-model=\"show_modal_external\" title=\"ulkopuolinen asiakas\" @ok=\"saveExternalClient\">\n\t\t\t\t<b-form-group style=\"margin-top:30px\">\n\t\t\t\t\t<label>sukunimi</label>\n\t\t\t\t\t<b-input v-model=\"external_client.sukunimi\"></b-input>\n\t\t\t\t\t<label>etunnimi</label>\n\t\t\t\t\t<b-input v-model=\"external_client.etunimi\"></b-input>\n\t\t\t\t\t<label>sähköposti (PAKOLLINEN)</label>\n\t\t\t\t\t<b-input v-model=\"external_client.sahkoposti\"></b-input>\n\t\t\t\t\t<label>kortin numero</label>\n\t\t\t\t\t<b-input v-model=\"external_client.kirjastokortin_numero\"></b-input>\n\t\t\t\t</b-form-group>\n\t\t\t\t<div v-if=\"sending\" class=\"alert alert-info\">lähetetään...</div>\n\t\t\t</b-modal>\n\n\t\t\t<!-- MODAL LIITÄ ASIAKAS -->\n\t\t\t<b-modal v-model=\"show_modal_join_client\" title=\"liitä asiakas pyyntöön\" cancel-title=\"peru\" ok-title=\"liitä\" @ok=\"saveJoinClient\">\n\t\t\t\t<b-form-group v-if=\"join_client\" style=\"margin-top:30px\">\n\t\t\t\t\t<label>sukunimi</label>\n\t\t\t\t\t<p><b>{{join_client.sukunimi}}</b></p>\n\t\t\t\t\t<label>etunnimi</label>\n\t\t\t\t\t<p><b>{{join_client.etunimi}}</b></p>\n\t\t\t\t\t<label>kortin numero</label>\n\t\t\t\t\t<p>{{join_client.kirjastokortin_numero}}</p>\n\t\t\t\t\t<label>sähköposti(t)</label>\n\t\t\t\t\t<p><b>{{join_client.sahkoposti.join(', ')}}</b></p>\n\t\t\t\t\t<label>lisää sähköposti asiakkaalle (valinnainen)</label>\n\t\t\t\t\t<b-input v-model=\"add_sahkoposti\" />\n\n\n\t\t\t\t</b-form-group>\n\t\t\t\t<div v-if=\"sending\" class=\"alert alert-info\">lähetetään...</div>\n\t\t\t</b-modal>\n\n\t\t</div>\n\n\t\t<div v-else class=\"alert alert-info\">lataan...</div>\n\n\t\t<!-- ARCHIVE BANNER-->\n\t\t<img v-if=\"ready && (request.status == 'arkistoitu' || request.status == 'peruttu')\" style=\"position:absolute;top: 120px; left:0%\" src=\"@/assets/images/arkistoitu_vino.png\">\n\n\n\t</b-container>\n\n</template>\n\n\n<script>\nimport axios from 'axios'\nimport WEOrderForm from './WEOrderForm.vue'\nimport DueDate from './WEDueDateDisplay.vue'\nimport web from '../web.js'\n\nexport default {\n\tname: 'WERequests',\n\tcomponents: {WEOrderForm, DueDate},\n\tdata: function() {\n\t\treturn {\n\t\t\trequest: null,\n\t\t\tclient: null,\n\t\t\tclient_query: '',\n\t\t\ttitle: '',\n\t\t\tjoin_client: null,\n\t\t\tadd_sahkoposti: '',\n\t\t\tpayer: null,\n\t\t\tpayer_selected: null,\n\t\t\tpayer_info: '',\n\t\t\tpayer_is_client: 'no',\n\t\t\torders: [],\n\t\t\tclients_result: null,\n\t\t\tarrived_order : null,\n\t\t\tlaheta_saapumisilmoitus: 'yes',\n\t\t\tlaheta_peruutusilmoitus: 'yes',\n\t\t\torganisations: [],\n\t\t\tready: false,\n\t\t\terror: null,\n\t\t\tnote:'',\n\t\t\tshow: false,\n\t\t\tsending: false,\n\t\t\tshow_modal_arrived: false,\n\t\t\tshow_modal_payer: false,\n\t\t\tshow_modal_loan_date: false,\n\t\t\tshow_modal_due_notice: false,\n\t\t\tshow_modal_external: false,\n\t\t\tshow_modal_note: false,\n\t\t\tshow_modal_title: false,\n\t\t\tshow_modal_cancel_request: false,\n\t\t\tshow_modal_cancel_archive: false,\n\t\t\tshow_modal_join_client: false,\n\t\t\tcancel_reason: '',\n\t\t\tdue_notice: '',\n\t\t\tnew_loan_date: '',\n\t\t\texternal_client: {},\n\t\t\tloan_library_name: '',\n\t\t\tprimaryBG: 'primary',\n\t\t\tprimaryText: 'white',\n\t\t\ttilaus_uusittavissa: 'yes',\n\t\t\ttilaus_info: '',\n\t\t\tfields: [\n\t\t\t\t{key:'teoksen_tiedot'},\n\t\t\t\t{key:'tilaajan_nimi'},\n\t\t\t\t{key:'tilaajan_sahkoposti', label: 'tilaajan sähköposti'},\n\t\t\t\t{key: 'toiminto'}\n\t\t\t],\n\t\t\torder_fields: [\n\t\t\t\t{key: 'kirjaston_nimi'},\n\t\t\t\t{key: 'status', label: 'status'},\n\t\t\t\t{key: 'pvm', label: 'tilaus tehty'},\n\t\t\t\t{key: 'pvm_saapunut', label: 'saapunut'},\n\t\t\t\t{key: 'toiminto'}\n\t\t\t],\n\t\t\tclient_fields: [\n\t\t\t\t{key: 'sukunimi'},\n\t\t\t\t{key: 'etunimi'},\n\t\t\t\t{key: 'sahkoposti', label: 'sähköposti'},\n\t\t\t\t{key: 'valitse', label: 'valitse'},\n\t\t\t]\n\t\t}\n\t},\n\tprops: ['status'],\n\n\n\twatch: {\n\t\t$route(to, from) {\n\t\t\tif(this.$route.params.id) {\n\t\t\t\tthis.loadData()\n\t\t\t} else {\n\t\t\t\tthis.current = null\n\t\t\t}\n\t\t}\n\t},\n\n\tmethods: {\n\t\topenJoinClient(item) {\n\t\t\tthis.show_modal_join_client = true\n\t\t\tthis.join_client = item\n\t\t},\n\n\t\tformatDate(date, reverse, comb) {\n\t\t\tif(!comb) comb = '.'\n\t\t\tvar out = []\n\t\t\tif(date) {\n\t\t\t\tvar d = new Date(date)\n\t\t\t\tif(d instanceof Date && isFinite(d)) {\n\t\t\t\t\tout.push(d.getFullYear())\n\t\t\t\t\tout.push((d.getMonth() + 1).toString().padStart(2, \"0\"))\n\t\t\t\t\tout.push(d.getDate().toString().padStart(2, \"0\"))\n\t\t\t\t\tif(reverse) return out.reverse().join(comb)\n\t\t\t\t\telse return out.join(comb)\n\t\t\t\t} else {\n\t\t\t\t\treturn date\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn '-'\n\t\t\t}\n\t\t},\n\n\t\tisExternal() {\n\t\t\tif(this.request.tilaajan_sahkoposti.includes('_external_') && !this.request.tilaaja) return true\n\t\t\telse return false\n\t\t},\n\t\t// join client by _id to request\n\t\t// add additional email to client if provided\n\t\tasync saveJoinClient(bvModalEvt) {\n\t\t\tif(bvModalEvt) bvModalEvt.preventDefault()\n\t\t\tvar update = {tilaaja: this.join_client._id}\n\t\t\tvar update_client = {}\n\n\t\t\tvar update_url = this.$G.api_url + \"/api/pyynnot/\" + this.$route.params.id\n\t\t\tvar update_client_url = this.$G.api_url + \"/api/asiakkaat/\" + this.join_client._id\n\t\t\ttry {\n\t\t\t\tvar update_response = await axios.put(update_url, update)\n\t\t\t\tif(this.add_sahkoposti.includes('@')) {\n\t\t\t\t\tthis.join_client.sahkoposti.push(this.add_sahkoposti)\n\t\t\t\t\tupdate_client.sahkoposti =  [...new Set(this.join_client.sahkoposti)]\n\t\t\t\t}\n\t\t\t\tvar client_response = await axios.put(update_client_url, update_client)\n\t\t\t\tthis.loadData()\n\t\t\t\tthis.show_modal_join_client = false\n\t\t\t} catch(e) {\n\t\t\t\talert('Asiakkaan liittäminen tai sähköpostin lisäys ei onnistunut! ' + e )\n\t\t\t}\n\n\t\t},\n\n\t\tasync saveExternalClient(bvModalEvt) {\n\t\t\tbvModalEvt.preventDefault()\n\t\t\tif(!this.external_client.sahkoposti || !this.external_client.sahkoposti.includes('@') || this.external_client.sahkoposti == '') {\n\t\t\t\talert(\"Sähköposti on pakollinen tieto\")\n\t\t\t\treturn\n\t\t\t}\n\t\t\tvar url = this.$G.api_url + \"/api/asiakkaat?sahkoposti=\" + this.external_client.sahkoposti\n\t\t\ttry {\n\t\t\t\tvar search_response = await axios.get(url)\n\t\t\t\tvar update = {'tilaajan_sahkoposti': this.external_client.sahkoposti}\n\t\t\t\tvar update_url = this.$G.api_url + \"/api/pyynnot/\" + this.$route.params.id\n\t\t\t\tvar update_response = await axios.put(update_url, update)\n\t\t\t\tvar result = await search_response.data\n\t\t\t\t// if we did not find client, then add it\n\t\t\t\tif(result.length == 0) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar client_url = this.$G.api_url + \"/api/asiakkaat/\"\n\t\t\t\t\t\tvar client_response = await axios.post(client_url, this.external_client)\n\t\t\t\t\t\tthis.join_client = client_response.data\n\t\t\t\t\t\tawait this.saveJoinClient()\n\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\talert(e)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.show_modal_external = false\n\t\t\t\tthis.loadData()\n\t\t\t} catch(e) {\n\t\t\t\talert(e)\n\t\t\t\tconsole.log(e)\n\t\t\t}\n\t\t},\n\n\t\tcancelPayer() {\n\t\t\tif(this.request.maksaja == 'asiakas') this.payer_is_client = 'yes'\n\t\t},\n\n\t\tasync setPayer(e) {\n\t\t\tvar update = {'maksaja_varmistettu': this.payer_selected, \"maksaja_info\": this.payer_info, 'maksaja': 'laitos'}\n\t\t\t// client is paying\n\t\t\tif(this.payer_is_client == 'yes') update = {\"maksaja_varmistettu\": null, \"maksaja\": 'asiakas'}\n\n\t\t\ttry {\n\t\t\t\tvar url = this.$G.api_url + \"/api/pyynnot/\" + this.$route.params.id\n\t\t\t\tvar update_result = await axios.put(url, update);\n\t\t\t\tthis.loadData()\n\n\t\t\t} catch(e) {\n\t\t\t\talert(e)\n\t\t\t}\n\t\t},\n\n\t\tasync updateTitle() {\n\t\t\ttry {\n\t\t\t\tawait web.updateRequest(this.$route.params.id, {teoksen_tiedot: this.title})\n\t\t\t\tthis.loadData()\n\t\t\t} catch(e) {\n\t\t\t\talert(e)\n\t\t\t}\n\t\t},\n\n\t\tsetNonArchived() {\n\t\t\tvar url = this.$G.api_url + \"/api/pyynnot/\"+ this.$route.params.id\n\t\t\tvar update = {status: 'kasittelyssa'}\n\t\t\taxios.put(url, update)\n\t\t\t.then(response => {\n\t\t\t\tthis.loadData()\n\t\t\t})\n\t\t\t.catch(data => {\n\t\t\t\talert('Muutoksen tallettaminen epäonnistui ' + this.getError(data,''))\n\t\t\t})\n\t\t},\n\n\t\topenArrived(order) {\n\t\t\tthis.arrived_order = order\n\t\t\tthis.arrived_order.erapaiva = this.$G.getToday('reverse', 1)\n\t\t\tthis.show_modal_arrived = true\n\t\t},\n\n\t\tasync openKarhuRequest() {\n\t\t\ttry {\n\t\t\t\tvar response = await axios(this.$G.api_url + \"/api/saatteet?_id=asiakas: karhu\")\n\t\t\t\tthis.due_notice = response.data[0].saate\n\t\t\t\tthis.due_notice = this.due_notice.replace('[[FI]]',this.$G.getInfo(this.request, 'fi'))\n\t\t\t\tthis.due_notice = this.due_notice.replace('[[EN]]',this.$G.getInfo(this.request, 'en'))\n\t\t\t\tthis.due_notice = this.due_notice.replace('[[ERAPAIVA]]', this.formatDate(this.request.tilaus_saatu.pvm_erapaiva, 'reverse', '.'))\n\t\t\t\tthis.due_notice = this.due_notice.replace('[[ERAPAIVA]]',this.formatDate(this.request.tilaus_saatu.pvm_erapaiva, 'reverse', '.'))\n\t\t\t} catch(e) {\n\t\t\t\talert('karhuviestipohjaa ei saatu')\n\t\t\t}\n\n\t\t\tthis.show_modal_due_notice = true\n\t\t},\n\n\t\topenCancelRequest() {\n\t\t\taxios.get(this.$G.api_url + \"/api/saatteet?_id=asiakas: peruutusviesti\")\n\t\t\t.then(response => {\n\t\t\t\tthis.cancel_reason = response.data[0].saate\n\t\t\t\tthis.cancel_reason = this.cancel_reason.replace('[[FI]]',this.$G.getInfo(this.request, 'fi'))\n\t\t\t\tthis.cancel_reason = this.cancel_reason.replace('[[EN]]',this.$G.getInfo(this.request, 'en'))\n\t\t\t})\n\t\t\t.catch(data => {this.cancel_reason = 'peruutusviestipohjaa ei löytynyt!'})\n\t\t\tthis.show_modal_cancel_request = true\n\t\t},\n\n\t\tasync convertToBook() {\n\t\t\tvar update = {\"teos_on\": \"kirja\" }\n\t\t\tvar url = this.$G.api_url + \"/api/pyynnot/\"+ this.$route.params.id\n\t\t\taxios.put(url, update)\n\t\t\t.then(response => {\n\t\t\t\tthis.loadData()\n\t\t\t})\n\t\t\t.catch(data => {\n\t\t\t\talert('Muunnoksen tallettaminen epäonnistui ' + this.getError(data,''))\n\t\t\t})\n\t\t},\n\n\t\tsetNote(bvModalEvt) {\n\t\t\tbvModalEvt.preventDefault()\n\t\t\tthis.sending = true\n\t\t\tvar update = {\"huomautuksia\": this.note }\n\t\t\tvar url = this.$G.api_url + \"/api/pyynnot/\"+ this.$route.params.id\n\t\t\taxios.put(url, update)\n\t\t\t.then(response => {\n\t\t\t\tthis.sending = false\n\t\t\t\tthis.show_modal_note = false\n\t\t\t\tthis.loadData()\n\t\t\t})\n\t\t\t.catch(data => {\n\t\t\t\talert('Huomion tallettaminen epäonnistui')\n\t\t\t\tthis.error = data\n\t\t\t\tthis.sending = false\n\t\t\t})\n\t\t},\n\n\t\tsetDueDate() {\n\t\t\tif(this.new_loan_date == '') this.new_loan_date = this.formatDate(this.request.tilaus_saatu.pvm_erapaiva, 'reverse','.')\n\t\t},\n\n\t\tasync sendDueNotice(bvModalEvt) {\n\t\t\tbvModalEvt.preventDefault()\n\t\t\tthis.sending = true;\n\t\t\tvar update = {\"notice\": this.due_notice }\n\t\t\tvar url = this.$G.api_url + \"/api/pyynnot/\"+ this.$route.params.id + \"/karhu\"\n\t\t\ttry {\n\t\t\t\tvar response = await axios.post(url, update)\n\t\t\t\tthis.sending = false\n\t\t\t\tthis.show_modal_due_notice = false\n\t\t\t\tthis.loadData()\n\t\t\t} catch(e) {\n\t\t\t\tthis.sending = false\n\t\t\t\tvar msg = ''\n\t\t\t\tif(e.response.data && e.response.data.error) msg = e.response.data.error\n\t\t\t\talert(msg)\n\t\t\t}\n\t\t},\n\n\t\tsetCancelled() {\n\t\t\tthis.sending = true\n\t\t\tvar update = {\"peruutuksen_syy\": this.cancel_reason ,\"laheta_peruutusilmoitus\": this.laheta_peruutusilmoitus}\n\t\t\tvar url = this.$G.api_url + \"/api/pyynnot/\"+ this.$route.params.id + \"/cancelled\"\n\t\t\taxios.put(url, update)\n\t\t\t.then(response => {\n\t\t\t\tthis.sending = false\n\t\t\t\tthis.loadData()\n\t\t\t})\n\t\t\t.catch(data => {\n\t\t\t\talert('peruutus epäonnistui')\n\t\t\t\tthis.sending = false\n\t\t\t\tthis.error = data\n\t\t\t})\n\t\t},\n\n\t\tsetLoanDate(bvModalEvt) {\n\t\t\tthis.sending = true\n\t\t\tbvModalEvt.preventDefault()\n\t\t\tvar update = {\n\t\t\t\t\"due_date\": this.new_loan_date.split('.').reverse().join('-'),\n\t\t\t\t\"info\": this.tilaus_info,\n\t\t\t\t\"uusittavissa\": this.tilaus_uusittavissa\n\t\t\t }\n\t\t\tvar url = this.$G.api_url + \"/api/pyynnot/\"+ this.$route.params.id + \"/due_date\"\n\t\t\taxios.put(url, update)\n\t\t\t.then(response => {\n\t\t\t\tthis.sending = false\n\t\t\t\tthis.show_modal_loan_date = false\n\t\t\t\tthis.loadData()\n\t\t\t})\n\t\t\t.catch(data => {\n\t\t\t\tthis.sending = false\n\t\t\t\talert(this.getError(data, 'eräpäivän asettaminen epäonnistui'))\n\t\t\t})\n\t\t},\n\n\t\tsetReturned() {\n\t\t\tthis.sending = true\n\t\t\tvar update = {\"pvm_palautettu\": this.$G.getToday(), \"status\": 'palautettu'}\n\t\t\tvar url = this.$G.api_url + \"/api/pyynnot/\" + this.$route.params.id + \"/returned\"\n\n\t\t\taxios.put(url, update)\n\t\t\t.then(response => {\n\t\t\t\tthis.sending = false\n\t\t\t\tthis.loadData()\n\t\t\t})\n\t\t\t.catch(data => {\n\t\t\t\tthis.sending = false\n\t\t\t\talert(this.getError(data, 'Arkistointi epäonnistui'))\n\t\t\t})\n\t\t},\n\n\t\tsetNotAvailable(order_id) {\n\t\t\tthis.sending = false\n\t\t\t// update order\n\t\t\tvar resp = null\n\n\t\t\tvar url = this.$G.api_url + \"/api/pyynnot/\" + this.$route.params.id + \"/tilaukset/\"+ order_id + \"/not_available\";\n\t\t\taxios.put(url, {})\n\t\t\t.then(response => {\n\t\t\t\tthis.sending = false\n\t\t\t\tthis.loadData()\n\t\t\t})\n\t\t\t.catch(data => {\n\t\t\t\tthis.sending = false\n\t\t\t\t//this.error = this.getError(data, 'Pyyntö epäonnistui')\n\t\t\t\talert(this.getError(data, 'Pyyntö epäonnistui'))\n\t\t\t})\n\t\t},\n\n\t\tsetArrived(bvModalEvt) {\n\t\t\tbvModalEvt.preventDefault()\n\t\t\tthis.sending = false\n\t\t\t// update order\n\t\t\tvar resp = null\n\t\t\tvar update = {\n\t\t\t\t\"erapaiva\": this.arrived_order.erapaiva.split('.').reverse().join('-'),\n\t\t\t\t\"maksu\": this.arrived_order.maksu,\n\t\t\t\t\"laheta_saapumisilmoitus\": this.laheta_saapumisilmoitus\n\t\t\t}\n\t\t\tvar url = this.$G.api_url + \"/api/pyynnot/\" + this.$route.params.id + \"/tilaukset/\"+ this.arrived_order._id + \"/arrived\";\n\t\t\taxios.put(url, update)\n\t\t\t.then(response => {\n\t\t\t\tthis.sending = false\n\t\t\t\tthis.show_modal_arrived = false\n\t\t\t\tthis.loadData()\n\t\t\t})\n\t\t\t.catch(data => {\n\t\t\t\tthis.sending = false\n\t\t\t\t//this.error = this.getError(data, 'Pyyntö epäonnistui')\n\t\t\t\talert(this.getError(data, 'Pyyntö epäonnistui'))\n\t\t\t})\n\t\t},\n\n\t\tcheckDate(date) {\n\t\t\t// expecting dd.mm.YYYY\n\t\t\tvar splitted = date.split('.')\n\t\t\tif(splitted.length !== 3) return false\n\t\t},\n\t\tasync reserve(id) {\n\t\t\tvar url = this.$G.api_url + \"/api/pyynnot/\"+ id;\n\t\t\tvar result = await axios.get(url);\n\t\t\tvar item = result.data\n\t\t\tif(item && (item['status'] == '' || item['status'] == 'uusi')) {\n\t\t\t\tvar update = {status: 'kasittelyssa', \"kasittelija\": this.$G.user}\n\t\t\t\tvar update_result = await axios.put(url, update);\n\t\t\t}\n\t\t},\n\n\t\tsetLoanLibrary() {\n\t\t\tfor(var order of this.orders) {\n\t\t\t\tif(order.pvm_saapunut) this.loan_library_name = order.kirjaston_nimi\n\t\t\t}\n\t\t},\n\n\t\tasync searchClients() {\n\t\t\tvar url = this.$G.api_url + \"/api\"\n\t\t\tvar r = await axios.get(url + \"/asiakkaat/?search=\" + this.client_query)\n\t\t\tthis.clients_result = r.data\n\t\t},\n\n\t\tasync loadData() {\n\t\t\tthis.show = false\n\t\t\tthis.error = null\n\t\t\tthis.arrived_order = null\n\t\t\tthis.ready = false\n\t\t\tthis.payer_selected = null\n\t\t\tthis.payer_is_client = 'no'\n\t\t\ttry {\n\t\t\t\tvar url = this.$G.api_url + \"/api\"\n\t\t\t\tconst [r_request, r_organisations] = await Promise.all([\n\t\t\t\t\taxios.get(url + \"/pyynnot/\" + this.$route.params.id),\n\t\t\t\t\taxios.get(url + \"/organisaatiot\")\n\t\t\t\t]);\n\n\t\t\t\tthis.request = r_request.data\n\t\t\t\tif(this.request.tilaus_saatu) {\n\t\t\t\t\tthis.tilaus_uusittavissa = this.request.tilaus_saatu.uusittavissa\n\t\t\t\t\tthis.tilaus_info = this.request.tilaus_saatu.info\n\t\t\t\t}\n\n\t\t\t\tif(!this.request.tilaajan_sahkoposti) {\n\t\t\t\t\tthis.request.tilaajan_sahkoposti = 'VIRHEELLINEN TILAAJA'\n\t\t\t\t}\n\n\t\t\t\tthis.title = this.request.teoksen_tiedot\n\t\t\t\tthis.orders = this.request.tilaukset\n\t\t\t\tthis.note = this.request.huomautuksia\n\t\t\t\tthis.organisations = r_organisations.data\n\t\t\t\tif(this.request.maksaja_varmistettu && this.request.maksaja_varmistettu._id)\n\t\t\t\t\tthis.payer_selected =  this.request.maksaja_varmistettu._id\n\t\t\t\tif(this.request.maksaja === 'asiakas') this.payer_is_client = 'yes'\n\t\t\t\tthis.setLoanLibrary()\n\n\t\t\t\t// external client\n\t\t\t\tif(this.request.tilaajan_sahkoposti.includes(\"_external_\")) {\n\t\t\t\t\tthis.external_client.sukunimi = this.request.sukunimi\n\t\t\t\t\tthis.external_client.etunimi = this.request.etunimi\n\t\t\t\t\tthis.external_client.kirjastokortin_numero = this.request.kirjastokortin_numero\n\t\t\t\t\tthis.client_query = this.request.sukunimi\n\t\t\t\t\tthis.searchClients()\n\t\t\t\t}\n\n\t\t\t\tthis.ready = true\n\t\t\t\tif(this.request.status === 'uusi') {\n\t\t\t\t\tthis.reserve(this.request._id)\n\t\t\t\t}\n\t\t\t} catch(e) {\n\t\t\t\talert(e)\n\t\t\t\tthis.error = \"virhe\"\n\t\t\t\tthis.ready = true\n\t\t\t}\n\t\t},\n\t\tgetError(e, msg) {\n\t\t\tif(e.response && e.response.data && e.response.data.error) return e.response.data.error\n\t\t\telse return msg\n\t\t}\n\t},\n\n\tmounted() {\n\t\tthis.loadData()\n\t}\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WERequest.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WERequest.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WERequest.vue?vue&type=template&id=73c88aa6&scoped=true&\"\nimport script from \"./WERequest.vue?vue&type=script&lang=js&\"\nexport * from \"./WERequest.vue?vue&type=script&lang=js&\"\nimport style0 from \"./WERequest.vue?vue&type=style&index=0&id=73c88aa6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"73c88aa6\",\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/logo.cf45db45.svg\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-container',{attrs:{\"fluid\":\"\"}},[_c('h1',[_vm._v(\"Asiakkaat\")]),(!_vm.ready)?_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"lataan...\")]):_vm._e(),(!_vm.current_client)?_c('b-card',{attrs:{\"title\":\"haku\"}},[_c('b-row',{staticClass:\"my-1\"},[_c('b-col',{attrs:{\"sm\":\"4\"}},[_c('b-form-input',{attrs:{\"id\":\"input-default\",\"placeholder\":\"hae sukunimellä tai sähköpostilla\"},nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.search.apply(null, arguments)}},model:{value:(_vm.search_term),callback:function ($$v) {_vm.search_term=$$v},expression:\"search_term\"}}),_c('b-button',{on:{\"click\":_vm.search}},[_vm._v(\"hae\")])],1)],1)],1):_vm._e(),(_vm.search_result.length !== 0 && !_vm.current_client)?_c('div',[_c('b-table',{attrs:{\"items\":_vm.search_result,\"fields\":_vm.fields},scopedSlots:_vm._u([{key:\"cell(sahkoposti)\",fn:function(data){return [_c('b',{staticClass:\"text-info\"},[_vm._v(_vm._s(data.value.join(', ')))])]}},{key:\"cell(sukunimi)\",fn:function(data){return [_c('b-link',{attrs:{\"to\":'/asiakkaat/' + data.item._id}},[_vm._v(_vm._s(data.value))])]}}],null,false,1301209900)})],1):_vm._e(),(_vm.current_client)?_c('div',[(!_vm.edit)?_c('b-card',{attrs:{\"title\":_vm.current_client.sukunimi + ', ' + _vm.current_client.etunimi,\"header-bg-variant\":\"dark\"}},[_c('table',_vm._l((_vm.fields),function(field){return _c('tr',{key:field.key},[_c('td',{staticStyle:{\"min-width\":\"200px\"}},[_vm._v(_vm._s(field.label))]),(field.key == 'sahkoposti')?_c('td',{staticStyle:{\"min-width\":\"350px\"}},_vm._l((_vm.current_client.sahkoposti),function(s){return _c('div',{key:s},[_c('a',{attrs:{\"href\":'mailto:' + s}},[_vm._v(_vm._s(s))])])}),0):_c('td',[_c('b',[_vm._v(_vm._s(_vm.current_client[field.key]))])])])}),0),(!_vm.edit)?_c('b-icon',{staticClass:\"float-right pointer\",attrs:{\"icon\":\"pen\",\"variant\":\"primary\"},on:{\"click\":function($event){_vm.edit = !_vm.edit}}},[_vm._v(\"muokkaa\")]):_vm._e()],1):_vm._e(),(_vm.edit)?_c('b-card',{attrs:{\"title\":_vm.current_client.sukunimi,\"header-bg-variant\":\"dark\"}},[_c('table',{staticClass:\"table table-striped\"},_vm._l((_vm.fields),function(field){return _c('tr',{key:field.key},[_c('td',{staticStyle:{\"min-width\":\"200px\"}},[_vm._v(_vm._s(field.label))]),(field.key == 'sahkoposti')?_c('td',{staticStyle:{\"min-width\":\"350px\"}},[(_vm.current_client[field.key] && _vm.current_client[field.key][0])?_c('b-form-input',{model:{value:(_vm.current_client[field.key][0]),callback:function ($$v) {_vm.$set(_vm.current_client[field.key], 0, $$v)},expression:\"current_client[field.key][0]\"}}):_vm._e(),(_vm.current_client[field.key])?_c('b-form-input',{model:{value:(_vm.current_client[field.key][1]),callback:function ($$v) {_vm.$set(_vm.current_client[field.key], 1, $$v)},expression:\"current_client[field.key][1]\"}}):_vm._e()],1):(field.key == 'ulkopuolinen')?_c('td',[_c('b-form-checkbox',{attrs:{\"id\":\"checkbox-1\",\"name\":\"checkbox-1\"},model:{value:(_vm.current_client.ulkopuolinen),callback:function ($$v) {_vm.$set(_vm.current_client, \"ulkopuolinen\", $$v)},expression:\"current_client.ulkopuolinen\"}})],1):_c('td',{staticStyle:{\"min-width\":\"350px\"}},[_c('b-form-input',{model:{value:(_vm.current_client[field.key]),callback:function ($$v) {_vm.$set(_vm.current_client, field.key, $$v)},expression:\"current_client[field.key]\"}})],1)])}),0),_c('b-container',[_c('b-button',{staticClass:\"float-right\",staticStyle:{\"margin-left\":\"20px\"},attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){return _vm.saveForm()}}},[_vm._v(\"tallenna\")]),_c('b-button',{staticClass:\"float-right\",on:{\"click\":function($event){_vm.edit = !_vm.edit}}},[_vm._v(\"peru\")])],1)],1):_vm._e(),_c('b-link',{attrs:{\"to\":'/asiakkaat'}},[_vm._v(\"takaisin hakuun\")]),_c('h2',{staticStyle:{\"margin-top\":\"40px\"}},[_vm._v(_vm._s(_vm.laina_title))]),_c('b-form-checkbox',{attrs:{\"id\":\"checkbox-1\",\"name\":\"show-all-requests\"},model:{value:(_vm.show_all_requests),callback:function ($$v) {_vm.show_all_requests=$$v},expression:\"show_all_requests\"}},[_vm._v(\" näytä kaikki pyynnöt \")]),_c('b-table',{attrs:{\"items\":_vm.requests,\"fields\":_vm.request_fields},scopedSlots:_vm._u([{key:\"cell(tiedot)\",fn:function(data){return [_c('div',{staticStyle:{\"min-width\":\"250px\"}},[_c('b-link',{attrs:{\"to\":'/pyynnot/' + data.item._id}},[_vm._v(_vm._s(data.item.teoksen_tiedot))])],1)]}},{key:\"cell(kirjasto)\",fn:function(data){return [(data.item.tilaus_saatu)?_c('b-link',{attrs:{\"to\":'/kirjastot/' + data.item.tilaus_saatu.kirjasto_id}},[_vm._v(_vm._s(data.item.tilaus_saatu.kirjaston_nimi))]):_vm._e()]}},{key:\"cell(tilaus_saatu.pvm_erapaiva)\",fn:function(data){return [_c('DueDate',{attrs:{\"item\":data.item}})]}},{key:\"cell(_id)\",fn:function(data){return [_vm._v(\" \"+_vm._s(data.value)+\" \")]}}],null,false,2355413550)})],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template >\n\t<b-container fluid>\n\t\t<h1>Asiakkaat</h1>\n\n\t\t<div v-if=\"!ready\" class=\"alert alert-info\">lataan...</div>\n\n\t\t<!-- display search -->\n\t\t<b-card title=\"haku\" v-if=\"!current_client\">\n\t\t  <b-row class=\"my-1\">\n\t\t\t<b-col sm=\"4\">\n\t\t\t  <b-form-input @keydown.enter.native=\"search\" v-model=\"search_term\" id=\"input-default\" placeholder=\"hae sukunimellä tai sähköpostilla\"></b-form-input>\n\t\t\t  <b-button @click=\"search\">hae</b-button>\n\t\t\t</b-col>\n\t\t  </b-row>\n\t\t</b-card>\n\n\t\t<!-- display search result -->\n\t\t<div v-if=\"search_result.length !== 0 && !current_client\">\n\t\t\t\t<b-table :items=\"search_result\" :fields=\"fields\">\n\t\t\t\t\t<template v-slot:cell(sahkoposti)=\"data\">\n\t\t\t\t\t\t<b class=\"text-info\">{{ data.value.join(', ') }}</b>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-slot:cell(sukunimi)=\"data\">\n\t\t\t\t\t\t\t<b-link :to=\"'/asiakkaat/' + data.item._id\">{{data.value}}</b-link>\n\t\t\t\t\t</template>\n\t\t\t\t</b-table>\n\t\t</div>\n\n\t\t<!-- display individual item -->\n\t\t<div v-if=\"current_client\">\n\n\t\t\t<b-card v-if=\"!edit\" :title=\"current_client.sukunimi + ', ' + current_client.etunimi\" header-bg-variant=\"dark\">\n\n\t\t\t\t<table>\n\t\t\t\t\t<tr v-for=\"field in fields\" :key=\"field.key\">\n\t\t\t\t\t\t<td style=\"min-width:200px\">{{field.label}}</td>\n\t\t\t\t\t\t<td v-if=\"field.key == 'sahkoposti'\" style=\"min-width:350px\" >\n\n\t\t\t\t\t\t\t<div v-for=\"s in current_client.sahkoposti\" :key=\"s\">\n\t\t\t\t\t\t\t\t<a :href=\"'mailto:' + s\">{{s}}</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td v-else><b>{{current_client[field.key]}}</b></td>\n\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\n\t\t\t\t<b-icon v-if=\"!edit\" @click=\"edit = !edit\" icon=\"pen\" class=\"float-right pointer\" variant=\"primary\">muokkaa</b-icon>\n\n\t\t\t</b-card>\n\n\t\t<!-- edit form -->\n\t\t<b-card v-if=\"edit\" :title=\"current_client.sukunimi\" header-bg-variant=\"dark\">\n\t\t\t<table class=\"table table-striped\">\n\t\t\t\t<tr v-for=\"field in fields\" :key=\"field.key\">\n\t\t\t\t\t<td style=\"min-width:200px\">{{field.label}}</td>\n\t\t\t\t\t<td v-if=\"field.key == 'sahkoposti'\" style=\"min-width:350px\" >\n\t\t\t\t\t\t<b-form-input v-if=\"current_client[field.key] && current_client[field.key][0]\" v-model=\"current_client[field.key][0]\"></b-form-input>\n\t\t\t\t\t\t<b-form-input v-if=\"current_client[field.key]\" v-model=\"current_client[field.key][1]\"></b-form-input>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td v-else-if=\"field.key == 'ulkopuolinen'\">\n\t\t\t\t\t\t<b-form-checkbox\n\t\t\t\t\t\t  id=\"checkbox-1\"\n\t\t\t\t\t\t  v-model=\"current_client.ulkopuolinen\"\n\t\t\t\t\t\t  name=\"checkbox-1\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t</b-form-checkbox>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td v-else style=\"min-width:350px\" ><b-form-input v-model=\"current_client[field.key]\"></b-form-input></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\t\t\t<b-container>\n\n\n\t\t\t<b-button  @click=\"saveForm()\" class=\"float-right\" variant=\"primary\" style=\"margin-left:20px\">tallenna</b-button>\n\t\t\t<b-button  @click=\"edit = !edit\" class=\"float-right\" >peru</b-button>\n\t\t\t</b-container>\n\t\t</b-card>\n\n\n\t\t\t<b-link :to=\"'/asiakkaat'\">takaisin hakuun</b-link>\n\n\t\t\t<h2 style=\"margin-top:40px\">{{laina_title}}</h2>\n\t\t\t<b-form-checkbox\n\t\t\t\t  id=\"checkbox-1\"\n\t\t\t\t  v-model=\"show_all_requests\"\n\t\t\t\t  name=\"show-all-requests\"\n\t\t\t\t>\n\t\t\t\t  näytä kaikki pyynnöt\n\t\t\t</b-form-checkbox>\n\t\t\t<b-table :items=\"requests\" :fields=\"request_fields\">\n\n\t\t\t\t<template v-slot:cell(tiedot)=\"data\">\n\t\t\t\t\t<div style=\"min-width:250px\">\n\t\t\t\t\t\t<b-link :to=\"'/pyynnot/' + data.item._id\">{{data.item.teoksen_tiedot}}</b-link>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\n\t\t\t\t<template v-slot:cell(kirjasto)=\"data\">\n\t\t\t\t\t<b-link v-if=\"data.item.tilaus_saatu\" :to=\"'/kirjastot/' + data.item.tilaus_saatu.kirjasto_id\">{{data.item.tilaus_saatu.kirjaston_nimi}}</b-link>\n\n\t\t\t\t</template>\n\n\t\t\t\t<template v-slot:cell(tilaus_saatu.pvm_erapaiva)=\"data\">\n\t\t\t\t\t<DueDate :item=\"data.item\"></DueDate>\n\t\t\t\t</template>\n\n\t\t\t\t<template v-slot:cell(_id)=\"data\">\n\t\t\t\t\t{{data.value}}\n\t\t\t\t</template>\n\t\t\t</b-table>\n\n\t\t</div>\n\n\t</b-container>\n\n</template>\n\n\n<script>\nimport DueDate from './WEDueDateDisplay.vue'\nexport default {\n\tname: 'WEClient',\n\tcomponents: {DueDate},\n\tdata: function() {\n\t\treturn {\n\t\t\tsearch_term: '',\n\t\t\tsearch_result: [],\n\t\t\trequests: [],\n\t\t\tall_requests: [],\n\t\t\tshow_all_requests: false,\n\t\t\tcurrent_client: null,\n\t\t\tready: true,\n\t\t\tedit: false,\n\t\t\tlaina_title: 'lainassa olevat kaukolainat',\n\t\t\tlaina_button_title: 'näytä kaikki kaukolainapyynnöt',\n\t\t\tfields: [\n\t\t\t\t{key: 'sukunimi', label:'sukunimi'},\n\t\t\t\t{key: 'etunimi', label:'etunimi'},\n\t\t\t\t{key: 'sahkoposti', label:'sähköposti'},\n\t\t\t\t{key: 'kirjastokortin_numero', label:'kirjastokortti'},\n\t\t\t\t{key: 'puhelin', label:'puhelin'},\n\t\t\t\t{key: 'osoite', label:'osoite'},\n\t\t\t\t{key: 'huomio', label:'lisätieto'},\n\t\t\t\t{key: 'ulkopuolinen', label:'ulkopuolinen asiakas'}\n\t\t\t],\n\t\t\trequest_fields: [\n\t\t\t\t{key: '_id', label: 'tunniste'},\n\t\t\t\t{key: 'teos_on', label: 'tyyppi'},\n\t\t\t\t{key: 'tiedot'},\n\t\t\t\t{key: 'kirjasto', label: 'kirjasto'},\n\t\t\t\t{key: 'maksu', label: 'maksu'},\n\t\t\t\t{key: 'maksaja', label: 'maksaja'},\n\t\t\t\t{key: 'status'},\n\t\t\t\t{key: 'tilaus_saatu.pvm_erapaiva', label: 'eräpäivä'},\n\t\t\t]\n\t\t}\n\t},\n\n\twatch: {\n\t\tshow_all_requests: function() {\n\t\t\tthis.showAllRequests()\n\t\t},\n\t\t// because of <keep-alive>, route changes must check that we are in correct path\n\t\t$route(to, from) {\n\t\t\tif(to.path.includes('/asiakkaat')) {\n\t\t\t\tif(this.$route.params.id) {\n\t\t\t\t\tthis.loadData()\n\t\t\t\t\t// if we hit back button *while in* client view, then we reset current client\n\t\t\t\t} else if(from.path.includes('/asiakkaat')) {\n\t\t\t\t\tthis.current_client = null\n\t\t\t\t\t// if we came from somewhere else with current set, then re-route so that URL matches current id\n\t\t\t\t} else {\n\t\t\t\t\tif(this.current_client) this.$router.replace({path:'/asiakkaat/' + this.current_client._id})\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tmethods: {\n\t\tsaveForm() {\n\t\t\tdelete this.current_client._id // do not try to re-save id\n\t\t\tthis.current_client.sahkoposti = this.current_client.sahkoposti.filter(x => x !='') // delete empty emails\n\t\t\tfetch(this.$G.api_url + \"/api/asiakkaat/\" + this.$route.params.id, {method:'PUT', body: JSON.stringify(this.current_client)})\n\t\t\t.then(response => { return response.json()})\n\t\t\t.then(json => {\n\t\t\t\tthis.loadData()\n\t\t\t})\n\t\t\t.catch(data => {\n\t\t\t\talert('Talletus ei onnistunut' + data)\n\t\t\t\tconsole.log('error' + data)\n\t\t\t})\n\t\t},\n\t\tloadData() {\n\t\t\tif(this.$route.params.id) {\n\t\t\t\tthis.ready = false\n\t\t\t\tthis.edit = false\n\t\t\t\tthis.current_client = null\n\t\t\t\tfetch(this.$G.api_url + \"/api/asiakkaat/\" + this.$route.params.id)\n\t\t\t\t.then(response => { return response.json()})\n\t\t\t\t.then(json => {\n\t\t\t\t\tthis.current_client = json\n\t\t\t\t\tthis.loadRelated()\n\t\t\t\t})\n\t\t\t\t.catch(data => {console.log('error' + data)})\n\t\t\t}\n\t\t},\n\n\t\tshowAllRequests() {\n\t\t\tif(this.show_all_requests) {\n\t\t\t\tthis.requests = this.all_requests\n\t\t\t\tthis.laina_title = 'kaikki kaukolainapyynnöt'\n\t\t\t\tthis.laina_button_title = 'näytä vain lainassa olevat'\n\t\t\t} else {\n\t\t\t\tthis.requests = this.sortByStatus(this.all_requests)\n\t\t\t\tthis.laina_title = 'lainassa olevat kaukolainat'\n\t\t\t\tthis.laina_button_title = 'näytä kaikki kaukalainapyynnöt'\n\t\t\t}\n\t\t},\n\n\t\tsortByStatus(items) {\n\t\t\tvar out = []\n\t\t\tfor(var item of items) {\n\t\t\t\tif(item.status === 'lainassa') out.push(item)\n\t\t\t}\n\t\t\treturn out\n\t\t},\n\n\t\tloadRelated() {\n\t\t\tfetch(this.$G.api_url + \"/api/pyynnot/?sort=tilaus_saatu.pvm_erapaiva&reverse=1&tilaaja=\" + this.current_client._id)\n\t\t\t.then(response => { return response.json()})\n\t\t\t.then(json => {\n\t\t\t\tthis.all_requests = json\n\t\t\t\tthis.requests = this.sortByStatus(json)\n\t\t\t\tthis.ready = true\n\t\t\t})\n\t\t\t.catch(data => {console.log('error' + data)})\n\t\t},\n\n\t\tasync search() {\n\t\t\tthis.current_client= null\n\t\t\tif(this.search_term !== '') {\n\t\t\t\t//if(!this.search_term.includes('*')) this.search_term = this.search_term + '*'\n\t\t\t\tvar search = 'search=' + this.search_term\n\t\t\t\t//if(this.search_term.includes('@')) search = 'sahkoposti=' + this.search_term\n\n\t\t\t\tvar result = await fetch(this.$G.api_url + \"/api/asiakkaat?\" + search)\n\t\t\t\tthis.search_result = await result.json()\n\t\t\t}\n\t\t}\n\t},\n\n\tmounted() {\n\t\tthis.loadData()\n\t}\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WEClient.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WEClient.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WEClient.vue?vue&type=template&id=19f14bac&\"\nimport script from \"./WEClient.vue?vue&type=script&lang=js&\"\nexport * from \"./WEClient.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/arkistoitu_vino.c22fb25a.png\";"],"sourceRoot":""}